<%- include('../components/start.component.html', { pageInfo: data.pageInfo }); _%>
<%- include('../components/javascript.component.html') %>

<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents-area">Skip to main contents</a></li>
        </ul>
    </div>

    <!--// #skip_navigation -->
        <!-- #header -->
        <!--// #header -->
        <!-- #contents -->
    <div id="fe-wrap" class="wrap" data-menuId="<%- data.pageInfo.menuId %>">    
        <%- include('../../../common_en/views/components/header.component.html', { title: 'MY BILLS', svcInfo: data.svcInfo,  pageInfo: data.pageInfo }); _%>
        <!--
		<div id="header" class="header-wrap">
			<div class="h-belt">
				<div class="h-default">
					<div class="h-menu">
						<button type="button" class="icon-gnb-menu"><span class="blind">menu open</span></button>
					</div>
                    <div class="h-tit">MY BILLS</div>
				</div>
            </div>
		</div>
        -->

        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">Main contents</span></h2>

            <div class="container" data-id="submain-container" >
                <%- include('../../../common_en/views/components/common.select-line.component.html', { svcInfo: data.svcInfo, xtEid: {single: data.xtEid.line, multiple : data.xtEid.line} }); _%>
                
                <!-- .cont-box -->
                <div class="cont-box">
                    <div class="user-month-bill mb100">
                        <div class="this-month-bill">
                        <!--
                            <p class="stit">Aug. Fees <span class="term">2020.7.1. ~ 2020.7.31.</span></p>
                            <p class="price"><span class="won">₩</span>85,050</p>
                      
                            <p class="stit">Aug. Fees <span class="term"><%=data.usageFirstDay%> ~ <%=data.usageFirstDay%></span></p>
                            <p class="price"><span class="won">₩</span><%=data.useAmtTot%></p>
                        -->
                        <p class="stit"><%=data.selClaimDtM%>. Fees <span class="term"><%=data.claimFirstDay%> ~ <%=data.claimLastDay%></span></p>
                        <p class="price"><span class="won">₩</span><%=data.claimPay%></p>

                        </div>
                        <p class="msg-type2 mt4"><span class="txt-point">₩<%=data.claimDisAmtAbs%></span> worth of discounts received</p>
                        
                    </div>

                    <%_if(data.colBamtText){_%>
                    <dl class="fees-list">
                        <dt>Previous Balance</dt>
                        <dd><%=data.colBamtText%></dd>
                    </dl>
                    <dl class="fees-list">
                        <dt>Total charges including <br/>previous balance</dt>
                        <dd class="red"><%=data.totSumPayText%></dd>
                    </dl>
                    <% } %>

                    <ul class="bt-slice mt20 mb4">
                        <li>
                            <button type="button"
                                    data-href="/en/myt-fare/billguide/guide" 
                                    data-id="bill-report"
                                    data-xt_eid="<%=data.xtEid.guide%>"
                                    data-xt_csid="NO" 
                                    data-xt_action="BC"
                                    class="btn-round1 btn-style1">View Detailed Monthly Fees</button>
                        </li>
                    </ul>
                </div>
                <!--// .cont-box -->
                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- .cont-box -->
                <div class="cont-box nogaps">
                   <ul class="full-link-list">
                        <li>
                            <button type="button"
                                data-href="/en/myt-fare/bill/hotbill" 
                                data-id="bill-hot"                                
                                data-xt_eid="<%=data.xtEid.hotbill%>"
                                data-xt_csid="NO" 
                                data-xt_action="BC"
                                onclick="goHotBill();">
                                <span class="inner">
                                    <span class="tit">Real-time Monthly Fees</span>
                                </span>
                            </button>
                        </li>
                        <%_ if( data.miriAmt){ _%>
                        <li>
                            <button type="button"
                                data-href="/en/myt-fare/info/miri" 
                                data-id="bill-hot"                                
                                data-xt_eid="<%=data.xtEid.miri%>"
                                data-xt_csid="NO" 
                                data-xt_action="BC"
                                onclick="goMiri();">
                                <span class="inner">
                                    <span class="tit">MIRI Payments</span>
                                    <span class="text type2">Balance ₩<%=data.miriAmt%></span>
                                </span>
                            </button>
                        </li>                        
                        <% } %>                           
                    </ul>
                </div>
                <!--// .cont-box -->

                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- .cont-box -->
                <div class="cont-box nogaps-ver pb0"  data-id="bill-chart">
                    <h3 class="graph-tit">Fees for the past (6) months</h3>
                    <div class="chart-wrap kjs10"></div>
                </div>
                <!--// .cont-box -->
            </div>
        </div>
        <!--// #contents -->
        <%- include('../../../common_en/views/components/footer.component.html', { svcInfo: data.svcInfo, pageInfo: data.pageInfo }); %>        
    </div>
</body>
<script>
    var data = '<%- JSON.stringify(data) %>';
    var jsObj;
    $(document).ready(function () {
        jsObj = new Tw.MyTFareSubMain({
            $element: $('[data-id=submain-container]'),
            data: JSON.parse(data)
        });
        
        // this.$billChart = $('body').find('[data-id=bill-chart]');
        // this.$billChart.chart2({
        // target:'.kjs10',
        // type : 'bar6',
        // average : true,
        // legend : ['Fees', 'Discount'],
        // link : true,
        // unit : '₩', // gb, 원, time
        // data_arry : [
        // <% for(var i=0; i < data.billInvAmtList.length; i++) { _%>
        //     {
        //         t : '<%=data.billInvAmtList[i].invDtText%>',
        //         v : <%=data.billInvAmtList[i].invAmt%>,
        //         v2 :<%=data.billInvAmtList[i].dcAmt%>,
        //         class : 'chartLink<%=i%>'
        //     },
        // <%_ } _%>
        // ]
        // });
        // this.$billChart.on('click', '.kjs10 button', $.proxy(_onClickedBillReport, this));
    });


    
    function goHotBill(){
        document.location.href = "/en/myt-fare/bill/hotbill";
    }
    function goMiri(){
        document.location.href = "/en/myt-fare/info/miri";
    }


    /*
        average : 평균 제공 여부
        legend : 범례
        unit : gb, 원, time
        link : 링크여부 (button태그로 link0 ~ 숫자 증가하는식의 class명)
        data_arry.t : 기준일
        data_arry.v : 숫자
        data_arry.class : link true시 button태그에 class명 생략시 위에 기본률에 따름
        data_arry.length 에 맞춰서 style 자동 조절
        ex) 4개 이상일 경우 가로 스크롤 제공₩
    */


    // function _onClickedBillReport( event ){
    //     alert("test");
    //     var clsName = event.target.className;
    //     var index = clsName.replace('chartLink', '');

    //     var data = jsObj.data;

    //     var selectData = data.billInvAmtList[index];
    //     var selectInvDt = selectData.invDt;

    //     var param = {
    //         date: selectInvDt
    //     };
    //     jsObj._historyService.goLoad('/en/myt-fare/billguide/guide?' + $.param(param));
    // }

</script>

<%- include('../components/end.component.html') %>
