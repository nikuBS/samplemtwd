<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); _%>
<%- include ../../components/javascript.component.html _%>
<%- include ../../components/bill/en.myt-fare.bill.guide.billgroup.html _%>

    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents-area">Skip to main contents</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div id="fe-wrap" class="wrap" data-menuId="<%- pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../../common_en/views/components/header.component.html', { svcInfo: svcInfo, title: 'BILLS' }); _%>


        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">Main contents</span></h2>

            <div class="container" data-id="submain-container">
                <%- include('../../../../common_en/views/components/common.select-line.component.html', { svcInfo: svcInfo, xtEid: { single: data.xtEid.line, multiple : data.xtEid.line } }); _%>

                <hr class="cont-sp type1" aria-hidden="true"/>

                <div class="cont-box nogaps">
                    <dl class="call-plan">
                        <dt>Subscribed Plan</dt><!-- 201006 text 수정 -->
                        <dd><%=svcInfo.prodNmEn%></dd>
                    </dl>
                </div>

                <hr class="cont-sp type1" aria-hidden="true"/>
                
                <!-- .cont-box -->
                <div class="cont-box">
                    <div class="user-month-bill">
                        <div class="this-month-bill">
                            <p class="stit"><%=data.commDataInfo.selClaimDtM%> Fees <span class="term"><%=data.commDataInfo.selStaDt%> ~ <%=data.commDataInfo.selEndDt%></span></p>
                            <p class="price"><span class="won">₩</span><%=data.commDataInfo.useAmtTot%></p>
                            <div class="btn-wrap">
                                <button type="button"
                                        data-id="bill-report"
                                        data-xt_eid="<%=data.xtEid.selectBill%>"
                                        data-xt_csid="NO" 
                                        data-xt_action="BC"
                                        data-target="conditionChangeBtn"
                                        class="btn-round2 btn-style3"   >Select Bill</button>
                            </div>
                        </div>
                        <p class="msg-type2 mt4"><span class="txt-point">₩<%=data.commDataInfo.discount%></span> worth of discounts received</p>
                    </div>
                    <%_ if( data.miriAmt ){ _%>
                    <div class="tod-miri-bill">
                        <button type="button"
                                data-href="/en/myt-fare/info/miri"
                                data-id="bill-miri"              
                                data-xt_eid="<%=data.xtEid.miri%>"
                                data-xt_csid="NO" 
                                data-xt_action="BC"
                                class="btn-miri"
                                onclick="goMiri();">                      
                            <span class="inner-flex">
                                <span class="tod-ico-miri"><span class="tod-blind">miri</span></span>
                                <span class="txt-wrap">
                                    ₩<span class="num"><%=data.miriAmt%></span> has been automatically<br>
                                    deducted from your MIRI balance
                                </span>
                            </span>
                        </button>
                    </div>               
                    <% } %>       
                    <%_ if( data.typeChk == 'A5' && data.lineDtlLst && data.lineDtlLst.length > 0){ _%>
                    <p class="info-charge-data">
                        The total amount billed for <strong><%=data.repSvcNum%> </strong> includes<br/>
                        combined charges for a total of <strong><%=data.paidAmtMonthSvcCnt%></strong> lines
                    </p>
                    <% } %>
                </div>
                <!--// .cont-box -->
                <hr class="cont-sp type1" aria-hidden="true"/>

                <div class="cont-box nogaps" data-role="fe-bill-menu">

                <!-- .cont-box 
                <div class="cont-box noborder">
                    <p class="fs-info footnote01" id="aria-footnote-01">The target display items are exclude VAT</p>
                    <p class="fs-info footnote02" id="aria-footnote-02">Display item is a third-party fees charged on our behalf</p>
                </div>
                .cont-box -->

            </div>
        </div>
        <!--// #contents -->
        <%- include('../../../../common_en/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
    </div>
<script>

    $(document).ready(function () {
      /**
       * A4 : 개별청구회선
       * A5 : 통합청구(대표)회선
       * A6 : 통합청구(일반)회선
       * @type {string}
       */
        var data = '<%- escape(JSON.stringify(data)) %>';
        var $el = $('#fe-wrap');
   //     new Tw.MyTFareBillGuideIntegratedRep($el, data);
       new Tw.MyTFareBillGuideCommon($el, data);

   /*
    * A4. 개별청구회선 | this._billpayInfo.paidAmtMonthSvcCnt === 1
    * A5. 통합청구회선 대표 | this._billpayInfo.repSvcYn === 'Y'
    * A6. 통합청구회선 대표아님 |
   */

    });
    function goMiri(){
        document.location.href = "/en/myt-fare/info/miri";
    }
</script>
<% include ../../components/end.component.html _%>
