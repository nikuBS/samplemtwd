<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo, includeRoam: true }); %>
<body class="rn">
<div id="roamingMyuse">
    <div id="appbar" class="gnb-opaque">
        <span class="menu icon-gnb-menu">
            <img src="<%= CDN %>/img/product/roam/ico_menu_b.svg" alt="메뉴" width="24" height="24" />
        </span>
        <h1>나의 T로밍 이용 현황</h1>
        <a href="/common/search-main">
            <img class="search" src="<%= CDN %>/img/svg/icon_48px_titlebar_search.svg" width="24" height="24" alt="검색" />
        </a>
    </div>
    <%- include('../components/header.component.html', { title: '나의 T로밍 이용 현황', svcInfo: svcInfo }) %>
    <div id="contents" class="mt60">
    <div class="card">
        <h2>
            로밍 요금제
            <span class="count">총 <span class="colorPoint" id="countTariff"><%= tariffs.length %></span>건</span>
        </h2>
        <% if (tariffs.length === 0) { %>
        <div class="empty">
            <img src="<%= CDN %>/img/product/roam/ico_empty.svg" />
            <p>
                이용 중인 로밍 요금제가 없습니다.
            </p>
        </div>
        <% } %>
        <% for (var tariff of tariffs) { %>
        <div class="item">
            <a href="/product/callplan?prod_id=<%= tariff.prodId %>">
                <h3>
                    <%= tariff.prodNm %>
                    <img class="arrow" src="<%= CDN %>/img/product/roam/ico_arrow.png" width="13" />
                </h3>
            </a>
            <div class="row">
                <% if (tariff.startDate.isAfter(now)) { %>
                <span class="label colorPoint fontsize15">이용 예정</span>
                <span class="value colorPoint bold">D-<%= Math.floor(tariff.startDate.diff(now) / 86400000) %></span>
                <% } else if (tariff.endDate && tariff.endDate.isBefore(now)) { %>
                <span class="label fontsize15">이용 완료</span>
                <span class="value bold"><%= Math.floor(now.diff(tariff.endDate) / 86400000) %>일 지남</span>
                <% } else { %>
                <span class="label colorPoint fontsize15">이용 중</span>
                    <% if (tariff.endDate) { %>
                    <span class="value colorPoint bold"><%= Math.floor(tariff.endDate.diff(now) / 86400000) %>일 남음</span>
                    <% } %>
                <% } %>
            </div>
            <div class="row">
                <% if (tariff.endDate) { %>
                    <span class="label colorGray">가입 기간</span>
                    <span class="value colorGray">
                        <%= tariff.startDate.format('YYYY. M. D.') %> <%= tariff.startTime %>
                        -
                        <%= tariff.endDate.format('YYYY. M. D.') %> <%= tariff.endTime %>
                    </span>
                <% } else { %>
                    <span class="label colorGray">가입일</span>
                    <span class="value colorGray"><%= tariff.scrbDt %></span>
                <% } %>
            </div>

            <% for (var button of tariff.btnList) { %>
            <div class="row">
                <a href="<%= button.btnLinkUrl %>?prod_id=<%= tariff.linkProdId %>">
                <span class="value button">
                    <%= button.btnNm %>
                </span>
                </a>
            </div>
            <% } %>

            <% if (tariff.data || tariff.phone || tariff.sms) { %>
            <div class="divider"></div>
            <% } %>

            <% if (tariff.data) { %>
            <div class="row mt6">
                <span class="label">데이터</span>
            </div>
            <div class="row">
                <span class="label colorGray">제공량</span>
                <span class="value bold"><%= tariff.data.total %></span>
            </div>
                <% if (tariff.data.used) { %>
            <div class="row">
                <span class="label colorGray">사용량</span>
                <span class="value bold"><%= tariff.data.used %></span>
            </div>
                <% } %>
            <% } %>

            <% if (tariff.sms) { %>
            <div class="row mt6">
                <span class="label">문자메시지</span>
            </div>
            <div class="row">
                <span class="label colorGray">제공량</span>
                <span class="value bold"><%= tariff.sms.total %></span>
            </div>
            <% } %>

            <% if (tariff.phone) { %>
            <div class="row mt6">
                <span class="label">음성</span>
            </div>
            <div class="row">
                <span class="label colorGray">제공량</span>
                <span class="value bold"><%= tariff.phone.total %></span>
            </div>
            <% } %>
        </div>
        <% } %>
    </div>
    <div class="card">
        <h2>
            로밍 부가서비스
            <span class="count">총 <span class="colorPoint" id="countAddon"><%= addons.length %></span>건</span>
        </h2>
        <% if (addons.length === 0) { %>
        <div class="empty">
            <img src="<%= CDN %>/img/product/roam/ico_empty.svg" />
            <p>
                이용 중인 로밍 부가서비스가 없습니다.
            </p>
        </div>
        <% } %>
        <% for (var addon of addons) { %>
        <div class="item">
            <a href="/product/callplan?prod_id=<%= addon.prodId %>">
                <h3>
                    <%= addon.prodNm %>
                    <img class="arrow" src="<%= CDN %>/img/product/roam/ico_arrow.png" width="13" />
                </h3>
            </a>
            <div class="row">
                <span class="label colorPoint fontsize15">이용 중</span>
            </div>
            <div class="row">
                <span class="label colorGray">가입일</span>
                <span class="value colorGray"><%= addon.scrbDt %></span>
            </div>
            <% for (var button of addon.btnList) { %>
                <div class="row">
                    <a href="<%= button.btnLinkUrl %>?prod_id=<%= addon.prodId %>">
                <span class="value button">
                    <%= button.btnNm %>
                </span>
                    </a>
                </div>
            <% } %>
        </div>
        <% } %>
    </div>
    </div>
    <%- include('../../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }) %>
</div>
<%- include('../../components/roaming-next/roaming.menu.html', {svcInfo}); %>
</body>
<% include ../../components/javascript.component.html %>
<script type="text/javascript">
  $(document).ready(function () {
    new Tw.RoamingMyuse($('#roamingMyuse'));
  });
</script>
<% include ../../components/end.component.html %>
