<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body class="rn">
<div id="productRoaming">
    <div id="gnb">
        <span class="menu">
            <img src="<%= CDN %>/img/product/roam/menu_black.png" alt="컨텍스트 메뉴" width="24" height="24" />
        </span>
        <img class="logo" src="<%= CDN %>/img/product/roam/logo.png" alt="로고" width="94" height="24" />
    </div>
    <div id="background"></div>
    <div id="contents">
        <h2>해외여행 갈 땐</h2>
        <h2 class="colorPoint">T로밍과 함께 !</h2>
        <p class="description">
            T로밍 요금제를 통해 해외에서도 국내처럼 <br />
            자유롭게 baro 통화하세요.
        </p>
        <div class="card">
            <h3>국가별 맞춤 로밍 요금제 추천</h3>
            <p class="description">여행하실 나라를 선택해주세요</p>
            <div id="nations">
                <ul></ul> 
            </div>
            <p class="description">찾으시는 나라가 없으신가요?</p>
            <form action="#" onsubmit="console.log('nation-search'); return false;">
            <div class="field-container">
                <input type="text" placeholder="원하시는 국가 명을 입력해주세요" id="nation-search" />
                <img src="<%= CDN %>/img/product/roam/ico_search_a.png" width="21" height="21" alt="Search" />
            </div>
            </form>
            <div class="link">
                <a href="#" onclick="openNationsPopup(); return false;">전체 국가보기</a>
            </div>
        </div>
        <div class="banner">
            <a href="/product/roaming/info/barocall">
                <img src="<%= CDN %>/img/product/roam/banner_01.png" alt="광고배너 Baro 통화" />
            </a>
        </div>
        <div class="card">
            <h3>로밍 요금제 한눈에 보기</h3>
            <div id="tariffs">
            </div>
        </div>
        <div class="card no-padding">
            <a href="/product/roaming/coupon">
                <div class="menu-link border-bottom">
                    <img class="icon" src="<%= CDN %>/img/product/roam/ico_coupon.png" width="32" />
                    <span>로밍 카드/쿠폰</span>
                    <img class="arrow" src="<%= CDN %>/img/product/roam/ico_arrow.png" width="13" />
                </div>
            </a>
            <a href="/product/roaming/fi/guide">
                <div class="menu-link">
                    <img class="icon" src="<%= CDN %>/img/product/roam/ico_barobox.png" width="32" />
                    <span>baro Box 대여</span>
                    <img class="arrow" src="<%= CDN %>/img/product/roam/ico_arrow.png" width="13" />
                </div>
            </a>
        </div>
    </div>
    <!-- 
        출국 전 알아두면 좋은 정보
        로밍 중 휴대폰 분실 안내
    -->
</div>
<div id="nationsPopup">
    <div class="closePopup" onclick="closePopup();">X</div>
</div>
<div id="schedulePopup">
    <div class="closePopup" onclick="closePopup();">X</div>
</div>
<script type="text/x-handlebars-template" id="tpl-nation-card">
    <li onclick="openSchedulePopup('{{ code }}');">
        <img src="{{ imageUrl }}" width="{{ width }}">
        <span>{{ name }}</span>
    </li>
</script>
<script type="text/x-handlebars-template" id="tpl-tariff-card">
    <div class="tariff">
        <img src="<%= CDN %>/img/product/roam/{{ icon }}" alt="product-icon" /> 
        <h4>{{ title }}</h4>
        <h5>{{ subtitle }}</h5>
    </div>
</script>
</body>
<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    new Tw.NextRoaming($('#productRoaming'), '<%= pageInfo.menuId %>')
    fillRecommendedNations();
    fillTariffs();
    $('#nation-search').autocomplete({
      source: ['중국', '일본', '베트남', '필리핀', '미국', '이탈리아'],
      delay: 50,
      minLength: 0,
    });
  });
  function fillRecommendedNations() {
    const GAP = 6;
    const COLUMN = 3;
    const container = document.getElementById('nations');
    const nationWidth = Math.floor((container.clientWidth - GAP * COLUMN) / COLUMN);
    const ul = document.querySelector('#nations ul');
    const template = Handlebars.compile($('#tpl-nation-card').html());
    for (let i = 0; i < nationList.length; i++) {
      const item = nationList[i];
      const li = template({
        width: nationWidth - GAP,
        name: item.name,
        code: item.code,
        imageUrl: item.url,
      });
      ul.innerHTML += li;
    }
  }
  function fillTariffs() {
    const template = Handlebars.compile($('#tpl-tariff-card').html());
    const container = document.getElementById('tariffs');
    container.innerHTML = '';
    for (var i=0; i<tariffList.length; i++) {
      const item = tariffList[i];
      container.innerHTML += template({
        icon: item.icon,
        title: item.name,
        subtitle: item.description,
      });
    }
  }
  function openNationsPopup() {
    $('#productRoaming').css('display', 'none');
    $('#nationsPopup').css('display', 'block');
  }
  function openSchedulePopup(code) {
    $('#productRoaming').css('display', 'none');
    $('#schedulePopup').css('display', 'block');
  }
  function closePopup() {
    $('#nationsPopup').css('display', 'none');
    $('#schedulePopup').css('display', 'none');
    $('#productRoaming').css('display', 'block');
  }

  const tariffList = [
    {url: '', name: 'baro 요금제', description: '전세계 주요국가에서', icon: 'icon_planet.png'},
    {url: '', name: 'One Pass', description: '출장을 자주 간다면', icon: 'icon_onepass.png'},
    {url: '', name: 'One Pass VIP', description: '해외에서도 데이터를 무제한으로', icon: 'icon_vip.png'},
  ];

  const nationList = [
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_01.png',
      'name': '중국',
      'code': 'china',
    },
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_02.png',
      'name': '일본',
      'code': 'japan',
    },
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_03.png',
      'name': '베트남',
      'code': 'vietnam',
    },
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_04.png',
      'name': '필리핀',
      'code': 'philippines',
    },
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_05.png',
      'name': '미국',
      'code': 'america',
    },
    {
      'url': '<%= CDN %>/img/product/roam/img_nation_s_06.png',
      'name': '이탈리아',
      'code': 'italy',
    },
  ];
</script>
<% include ../../components/end.component.html %>
