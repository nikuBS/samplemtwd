<%#
* FileName: product.mobileplan.lookup.tplan.html
* Author: Ji Hun Yang (jihun202@sk.com)
* Date: 2018.09.17
%>
<%- include('../../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->
<div class="wrap step" data-menuId="<%= pageInfo.menuId %>">
    <div class="popup-page nobg tw-popup no-btn txt-screed">
        <!-- #header -->
        <%- include('../components/header.component.html', { title: '혜택 이용내역', type: 'popup', svcInfo: svcInfo, pageInfo: pageInfo }); %>
        <!--// #header -->
        <!-- .container-wrap -->
        <div class="container-wrap">
            <h2 class="blind">내용</h2>
            <div class="container">

                <div class="ti-caption-gray">
                    <h3 class="tit">인피니티 상품 혜택</h3>
                </div>

                <div class="benefit-tit">
                    <div class="tit">
                        <p class="subtit">사용중인 혜택</p>
                        <strong class="tit"><%= beforeTDiyGrNm %></strong>
                        <p class="subtxt"><%- beforeTDiyGrDesc %></p>
                    </div>
                    <a href="/product/mobileplan/setting/tplan?prod_id=NA00005959" title="인피니티 혜택 변경"
                       aria-haspopup="true">혜택 변경</a>
                </div>

                <div class="ti-caption-gray">
                    <button class="bt-select fe-btn_category" title="혜택이용 카테고리 선택" aria-haspopup="true"><%= beforeTDiyGrNmCategory %></button>
                    <p class="num">혜택 이용내역 총 <em><%= listTotal %></em>건</p>
                </div>

                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <div class="announcement-box wrap-gaps-top">
                        <div class="announcement-txt">최근 50건의 이용내역만 조회하실 수 있습니다.</div>
                    </div>
                    <% if (beforeTDiyGrCd === 'NA00006114') { %>
                    <div class="cont-box nogaps-ver pb0">
                        <!-- .component -->
                        <div class="component">
                            <div class="component-box tabs">
                                <div class="tab-area new"><!-- 타입별 탭형태 변환 -->
                                    <div class="tab-linker">
                                        <ul role="tablist">
                                            <li role="tab" aria-selected="<%= tabId === 'onepass' ? 'true' : 'false' %>" aria-controls="tab1-tab" id="tab1"><a href="javascript:void(0)" class="fe-tab" data-key="onepass">T로밍 OnePass</a></li><!-- 링크 이동시 활성화 된 탭에 aria-selected="true" 설정 -->
                                            <li role="tab" aria-selected="<%= tabId === 'martina' ? 'true' : 'false' %>" aria-controls="tab3-tab" id="tab2"><a href="javascript:void(0)" class="fe-tab" data-key="martina">마티나 라운지</a></li>
                                        </ul>
                                    </div>
                                    <!-- 탭메뉴만 넣어달라는 요청으로 .tab-contents는 넣지 않음 -->
                                </div>
                            </div>
                        </div>
                        <!--// .component -->
                    </div>
                    <% } %>
                    <% if ( benefitList && Object.keys(benefitList).length > 0 ) {
                        const keys = Object.keys(benefitList).reverse();
                        for (var i in keys) {
                            const list = benefitList[keys[i]],
                                listKeys = Object.keys(benefitList[keys[i]]);

                            if (i !== '0') { %>
                            <div class="ti-caption-gray">
                                <h3 class="tit year"><%= keys[i] %></h3>
                            </div>
                            <div class="cont-box nogaps">
                            <% } %>
                                <div class="daily-benefit-use">
                                    <ul>
                                        <% for (var j in listKeys) {
                                            const item = benefitList[keys[i]][listKeys[j]];
                                            if ( listCase === 'A' ) { %>
                                            <li>
                                                <p class="date"><%= item.issueDtKey %></p>
                                                <% for ( var k in item.list ) {
                                                multipleClass = k !== '0' ? 'multiple' : '';
                                                %>
                                                <dl class="<%= multipleClass %>">
                                                    <dt>혜택</dt>
                                                    <dd><%= item.list[k].relProdNm %></dd>
                                                    <dt>사용여부</dt>
                                                    <dd><%= item.list[k].issueGb %></dd>
                                                    <% if ( item.list[k].effDt ) { %>
                                                    <dt>발급일/만료일</dt>
                                                    <dd><%= item.list[k].issueDt %>~<%= item.list[k].effDt %></dd>
                                                    <% } else { %>
                                                    <dt>발급일</dt>
                                                    <dd><%= item.list[k].issueDt %></dd>
                                                    <% } %>
                                                    <dt>사용일</dt>
                                                    <% if ( item.list[k].hpnDt ) { %>
                                                    <dd><%= item.list[k].hpnDt %></dd>
                                                    <% } else { %>
                                                    <dd>-</dd>
                                                    <% } %>
                                                </dl>
                                                <% } %>
                                            </li>
                                            <% } else { %>
                                            <li>
                                                <p class="date"><%= item.benfStaDtKey %></p>
                                                <% for ( var k in item.list ) {
                                                multipleClass = k !== '0' ? 'multiple' : '';
                                                %>
                                                <dl class="<%= multipleClass %>">
                                                    <dt><%= item.list[k].prodLabel %></dt>
                                                    <dd><%= item.list[k].prodNm %></dd>
                                                    <dt>지원 시작일</dt>
                                                    <dd><%= item.list[k].benfStaDt %></dd>
                                                    <% if ( item.list[k].benfEndDt ) { %>
                                                    <dt>지원 종료일</dt>
                                                    <dd><%= item.list[k].benfEndDt %></dd>
                                                    <% } %>
                                                </dl>
                                                <% } %>
                                            </li>
                                            <% } %>
                                        <% } %>
                                    </ul>
                                </div>
                            <% if (i !== '0') { %>
                            </div>
                            <% } %>
                        <% } %>
                    <% } else { %>
                    <div class="contents-empty">
                        <span class="ico type1"></span>
                        <p class="desc">이용내역이 없습니다.</p>
                    </div>
                    <% } %>
                </div>

            </div>
        </div>
        <!--// .container-wrap -->
        <!-- .popup-closeBtn -->
        <button class="popup-closeBtn fe-common-back"><span class="blind">팝업 페이지 닫기</span></button>
        <!--// .popup-closeBtn -->
    </div>
</div>
</body>
<% include ../../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    new Tw.ProductMobileplanLookupTplan($('.wrap'), '<%= beforeTDiyGrCd %>');
  });
</script>
<% include ../../../components/end.component.html %>
