<%#
* @file product.mobileplan.html
* @author Jiyoung Jo
* @since 2018.09.06
* id: MP
%>

<%- include('../components/start.component.html', { pageInfo: locals.pageInfo }); %>

<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <!-- Grand open 접근성 수정 -->
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
            <!--  //Grand open 접근성 수정 -->
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap" data-menuId="<%= pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../common/views/components/header.component.html', { title: '요금제', svcInfo: svcInfo, pageInfo: locals.pageInfo }); %>
        <!--// #header -->
        <!-- #contents -->
        <% const BENEFIT = { type: '데이터', 'money-type': '음성', sms: '문자' }; %>
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container">
                <% if (svcInfo && svcInfo.svcAttrCd.includes('M') && svcInfo.prodNm) { %>
                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- my -->
                <div class="cont-box nogaps">
                    <div class="calling-plan">
                        <a class="wrap-link" href="/myt-join/myplan">
                            <i class="badge icon-badge-plan-use"><span class="blind">이용중</span></i>
                            <span class="stit"><%= svcInfo.prodNm %></span>
                        </a>
                    </div>
                </div>
                <!--//my -->
                <% } %>
                
                <hr class="cont-sp type1" aria-hidden="true" id="fe-header-t"/>
                <!-- 스와이프 -->
                <div class="cont-box nogaps noborder">
                    <div class="main-slide-banner slide-pagingtype">
                        <!-- .widget -->
                        <div class="widget">
                            <div class="widget-box">
                                <div class="slider-box">
                                    <ul class="slider" data-location="T" id="fe-banner-t"></ul>
                                </div>
                            </div>
                        </div>
                        <!--// .widget -->
                    </div>
                </div>
                <!-- //스와이프 -->

                <!-- 많이 찾는 요금제 -->
                <% const groups = productData.groups.grpProdList; %>
                <% if (groups && groups.length > 0) { %> 
                <hr class="cont-sp type1" aria-hidden="true" />
                <div class="cont-box nogaps-btm widget">
                    <div class="headingbox-wrap">
                        <h3 class="title"><%= productData.groups.expsTitNm %></h3>
                        <div class="btn">
                            <a href="/product/mobileplan/list" class="bt-link-tx underline">전체 요금제</a>
                        </div>
                    </div>

                    <div class="widget-box toggle01">
                        <ul class="representcharge-list">
                        <% const GROUP_MAX_COUNT = 7;
                        for (let i = 0; i < Math.min(groups.length, GROUP_MAX_COUNT); i++) {
                            const group = groups[i]; %>
                            <li>
                                <button role="button" aria-pressed="false" class="representcharge-info">
                                    <h4 class="title"><%= group.prodGrpNm %><% if (group.prodGrpFlagImgUrl) { %><img class="lte" src="<%= group.prodGrpFlagImgUrl %>" alt="<%= group.prodGrpId === 'T000000076' ? '5G폰' : 'LTE폰' %>"><% } %></h4>
                                    <% if (group.prodGrpIconImgUrl) { %> <div class="img-box"><% if (group.prodGrpIconImgUrl) { %><img src="<%= group.prodGrpIconImgUrl %>" alt=""><% } %></div><% } %>
                                    <p class="text"><%= group.prodGrpDesc %></p>
                                </button>

                                <div class="productinfoscroll-box slide-nopd">
                                    <!-- .widget -->
                                    <div class="widget"> 
                                        <div class="widget-box horizontal">
                                            <div class="horizontal-slide slide-nopd">
                                                <ul class="horizontal-list">
                                                    <% group.prodList.map(product => { %>
                                                    <li data-url="/product/callplan?prod_id=<%= product.prodId %>" class="fe-go-plan">
                                                        <button type="button" class="product-info">
                                                            <div class="product-info-btn">
                                                                <h5 class="title"><%= product.prodNm %></h5>
                                                                <% if (product.basFeeInfo.isNaN) { %>
                                                                    <p class="info"><span class="money money-noleft"><%= product.basFeeInfo.value %></span></p>
                                                                <% } else { %>
                                                                    <p class="info"><span class="money money-noleft"><%= product.basFeeInfo.value %></span>원</p>
                                                                <% } %>
                                                            </div>
                                                            <% if (product.displayInfo) { %>
                                                            <div class="<%= product.displayInfo.icon %>">
                                                                <span class="blind"><%= BENEFIT[product.displayInfo.icon] %></span>
                                                                <span class="str"><%= product.displayInfo.value %></span><%= product.displayInfo.unit %>
                                                            </div>
                                                            <% } %>
                                                        </button>
                                                    </li>
                                                    <% }); %>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        <% } %>
                        </ul>
                    </div>
                </div>
                <% } %>
                <!-- //대표 요금제 보기 -->

                <!-- 광고성 정보 수신동의(선택) -->
                <% if (isLogin && isAdRcvAgreeBannerShown) { %>
                <div class="cont-box bgnone noborder tod-alram-box" id="fe-ad-rcv-agree-banner">
                    <div class="shadow-box">
                        <div class="alarm_list">
                            <div class="banner-box">
                                <img src="<%= CDN %>/img/etc/alarm_img05.png" alt="딱 맞는 추천 요금제 및 새로운 요금제 소식을 알려드릴까요?">
                            </div>
                            <div class="con-box">
                                <ul class="on-off-list new">
                                    <li>
                                        <div class="tod-alarm-txt">
                                            <p class="con1 pd0">T World 광고성 정보 수신동의 (선택)</p>
                                            <button type="button" class="tod-link-type" aria-haspopup="true" id="fe-bt-detail-ad-rcv-agree-banner">상세보기</button>
                                        </div>
                                        <span class="widget">
                                            <span class="widget-box switch">
                                                <span class="btn-switch type1" id="fe-bt-on-ad-rcv-agree-banner"> <!-- toggle class on  -->
                                                    <span class="switch-style" role="checkbox" aria-checked="false">
                                                        <span class="off-tx">꺼짐</span>
                                                        <input type="checkbox" title="T World 광고성 정보 수신동의">
                                                        <span class="on-tx">켜짐</span>
                                                    </span>
                                                </span>
                                            </span>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <button class="tod-alarm-close" id="fe-bt-close-ad-rcv-agree-banner"><span class="blind">알람닫기</span></button>
                        </div>
                    </div>
                </div>
                <% } %>
                <!-- 광고성 정보 수신동의(선택) -->
                
                <% const filters = productData.myFilters && productData.myFilters.list;
                const recommendedTags = productData.recommendedTags.tagList;
                if (filters || recommendedTags) { %>
                <hr class="cont-sp type1" aria-hidden="true"/>
                <!-- 추천태그 -->
                <div class="cont-box nogaps-btm widget">
                    <h3 class="suggest-tag-title">추천 태그</h3>
                    <% if (filters) { %>
                    <div class="suggest-tag-titlebox">
                        <a class="suggest-tag-link" href="/product/mobileplan/list<%= filters.length > 0 ? '?filters=' + filters.map(filter => filter.prodFltId).join(',') : '' %>">
                            <p class="text">
                                유사한 요금제를 찾아보세요! 
                                <span class="textnumber">(<span class="number"><%= productData.myFilters.prodCnt %></span>개) </span>
                            </p>
                            <div class="taglist-wrap">
                                <% filters.map(filter => { %>
                                <span class="tag-text">#<%= filter.prodFltNm %></span>
                                <% }); %>
                            </div>
                        </a>
                    </div>
                    <% } %>

                    <% if (recommendedTags) { %>
                    <div class="widget-box toggle02">
                        <div class="suggest-tag-list">
                            <ul>
                                <% recommendedTags.map(tag => { %>
                                <li><a href="/product/mobileplan/list?tag=<%= tag.tagId %>" class="link">#<%= tag.tagNm %></a></li>
                                <% }); %>
                            </ul>
                        </div>
                        <div class="suggest-tag-morewrap">
                            <button role="button" aria-pressed="false" class="suggest-tag-more">
                                <span class="more">더 보기</span>
                            </button>
                        </div>
                    </div>
                    <% } %>
                </div>
                <!--//추천태그 -->
                <% } %>

                <% if ( false ) { // @TODO 해당 페이지 다음 차수 개발, 진입 안되도록 히든 처리 %>
                <hr class="cont-sp type1" aria-hidden="true"/>

                <div class="findyourplan-wrap">
                    <a class="link" href="/product//mobileplan/find">
                        <dl class="desc">
                            <dt class="title">내게 맞는 요금제 찾기</dt>
                            <dd class="text">내 사용패턴, 할인 정보 등에 딱 맞는<br>요금제를 추천해드려요!</dd>
                        </dl>
                    </a>
                </div>
                <% } %>


                <!-- 이런 요금제는 어떠세요? -->
                <% const recommendedPlans = productData.recommendedPlans.prodList;
                if (recommendedPlans && recommendedPlans.length > 0) { %>
                <hr class="cont-sp type1" aria-hidden="true"/>
                
                <div class="cont-box nogaps-btm bgnone">
                    <div class="headingbox-wrap">
                        <h3 class="title">이런 요금제는 어떠세요?</h3>
                    </div>
                    <div class="productinfoscroll-box block-type slide-nopd">
                        <!-- .widget -->
                        <div class="widget"> 
                            <div class="widget-box horizontal">
                                <div class="horizontal-slide slide-nopd">
                                    <ul class="horizontal-list">
                                        <% const PLANS_MAX_COUNT = 5;
                                        for (let i = 0; i < Math.min(recommendedPlans.length, PLANS_MAX_COUNT); i++) {
                                        const plan = recommendedPlans[i]; %>
                                        <li>
                                            <a type="button" class="product-info" href="/product/callplan?prod_id=<%= plan.prodId %>">
                                                <h5 class="title"><%= plan.prodNm %></h5>
                                                <% if (plan.basFeeInfo.isNaN) { %>
                                                    <p class="info"><span class="money money-noleft"><%= plan.basFeeInfo.value %></span></p>
                                                <% } else { %>
                                                    <p class="info"><span class="money money-noleft"><%= plan.basFeeInfo.value %></span>원</p>
                                                <% } %>
                                                <% if (plan.displayInfo) { %>
                                                    <div class="<%= plan.displayInfo.icon %>">
                                                        <span class="blind"><%= BENEFIT[plan.displayInfo.icon] %></span>
                                                        <span class="str"><%= plan.displayInfo.value %></span><%= plan.displayInfo.unit || '' %>
                                                    </div>
                                                <% } %>
                                            </a>
                                        </li>
                                        <% } %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- .widget -->
                    </div>
                </div>
                <% } %>

                
                <!-- 다른 페이지를 찾고 계신가요? -->
                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">다른 페이지를 찾고 계신가요?</h3>
                    <ul class="pg-link-list">
                        <li>
                            <a href="/product/mobileplan-add"><i class="icon-vas-40"></i>부가서비스</a>
                        </li>
                        <li>
                            <a href="/product/wireplan"> <i class="icon-internet-40"></i>인터넷 / 전화 /  IPTV</a>
                        </li>
                        <li>
                            <a href="/product/roaming"><i class="icon-roaming-40"></i>T로밍</a>
                        </li>
                        <li>
                            <a href="/benefit/submain/discount"><i class="icon-discount-40"></i>혜택 / 할인 > 요금 할인</a>
                        </li>
                        <li>
                            <a href="/benefit/submain/combinations"><i class="icon-discount-40"></i>혜택 / 할인 > 결합 할인  </a>
                        </li>
                    </ul>
                </div>
                <!-- //다른 페이지를 찾고 계신가요? -->
            </div>
        </div>
        <!--// #contents -->
        <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
    </div>
</body>

<% include ../../components/javascript.component.html %>
<script>
    $(document).ready(function() {
        new Tw.ProductSubmain($('.wrap'), '<%= pageInfo.menuId %>');
    })
</script>
<% include ../../components/end.component.html %>
