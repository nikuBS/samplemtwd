<%#
* FileName: product.mobileplan-add.html
* Author: Jiyoung Jo (jiyoungjo@sk.com)
* Date: 2018.10.09
* id: MV_01
%>

<% include ../../components/start.component.html %>

<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#gnb">메뉴 바로가기</a></li>
            <li><a href="#contents">본문 바로가기</a></li>
            <li><a href="#footer">푸터 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap" data-menuId="<%= pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../common/views/components/header.component.html', { title: '부가서비스', svcInfo: svcInfo }); %>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 class="blind">내용</h2>
            <div class="container">
                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- my -->
                <% if (svcInfo && additionData.myAdditions) { %>
				<div class="cont-box nogaps">
                    <div class="calling-plan">
                        <a class="wrap-link" href="/myt-join/additions">
                            <i class="badge icon-badge-plan-use"><span class="blind">이용중</span></i>
                            <span class="stit"><%= additionData.myAdditions.recentlyJoinsProdNm %><% if (additionData.myAdditions.addProdCnt > 1) { %> 외 <%= additionData.myAdditions.addProdCnt - 1 %>건<% } %></span>
                        </a>
                    </div>
                </div>
                <% } %>
                <!--//my -->

                <!-- 필터옵션영역 -->
				<div class="cont-box bgnone noborder gaps-style03">
                    <div class="contheader-box">
                        <div class="totalfilter-wrap">
                            <span class="total">총 <span class="number-text"><%= additionData.additions.productCount %></span>건</span>
                            <!-- <button type="button" class="filter-btn">필터</button> -->
                            <button type="button" class="filter-btn date-in fe-select-filter" aria-haspopup="true">
                                <% const searchOption = additionData.additions.searchOption, filters = searchOption && searchOption.searchFltIds;
                                if (filters) { %>
                                    <span class="datebox">
                                    <% for (let i = 0; i < Math.min(2, filters.length); i++) {
                                        if (i > 0) { %>,<% } %>
                                        <%= filters[i].prodFltNm %>
                                    <% } 
                                    %>
                                    </span>
                                    <% if (filters.length > 2) { %>
                                        <span class="text">외</span>
                                        <span class="number"><%= filters.length - 2 %></span>
                                        <span class="text">건</span> <% }
                                } else if (searchOption && searchOption.searchProdTagNm) { %>
                                    <span class="datebox"><%= searchOption.searchProdTagNm %></span>
                                <% } else { %>
                                    <span class="datebox">전체 부가서비스</span>
                                <% } %>
                            </button>
                        </div>
                        <div class="filter-select">
                            <button type="button" class="filterselect-btn fe-select-order" aria-haspopup="true">
                                <% if (params.searchOrder === 'highprice') { %>
                                    높은 가격순
                                <% } else if (params.searchOrder === 'lowprice') { %>
                                    낮은 가격순
                                <% } else { %>
                                    추천순
                                <% } %>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- //필터옵션영역 -->

                <!-- 부가서비스 목록 -->
                <% const additions = additionData.additions.products;
                if (additions) { %>
                <div class="cont-box bgnone nogaps-hoz noborder"><!-- 더보기 버튼이 있을때 noborder 필요 -->
                    <ul class="extraservice-list">
                        <% additions.map(addition => { %>
                        <li class="category-type">
                            <a class="link" href="/product/callplan/<%= addition.prodId %>">
                                <div class="products-titleinfo">
                                    <p class="title"><%= addition.prodNm %></p>
                                    <p class="info"><span class="money"><%= addition.basFeeAmt.value %></span><% if (!addition.basFeeAmt.isNaN) { %>원<% } %></p>
                                </div>
                                <% if (addition.filters && addition.filters.length > 0) { %>
                                <div class="taglist-wrap">
                                    <% addition.filters.map(filter => { %>
                                        #<%= filter.prodFltNm %>&nbsp;&nbsp;
                                    <% }); %>
                                </div>
                                <% } %>
                                <p class="products-detailinfo"><%= addition.prodSmryDesc || ''%></p>
                            </a>
                        </li>
                        <% }); %>
                    </ul>
                    <% const leftCount = additionData.additions.productCount - additions.length, last = additions[additions.length - 1]; %>
                    <div class="extraservice-more full-width"><!-- cont-box에 noborder추가시 full-width 추가 -->
                        <button class="<%= leftCount ? '' : 'none' %> btn bbe5" data-last-product="<%= last && last.prodId %>" data-left-count="<%= leftCount %>">더 보기</button>
                    </div>
                </div>
                <% } %>

                <!-- 다른 페이지를 찾고 계신가요? -->
                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">다른 페이지를 찾고 계신가요?</h3>
                    <ul class="pg-link-list">
                        <li>
                            <a href="/product/mobileplan">
                                <i class="icon-price-plan-40"><span class="blind">요금제</span></i>
                                요금제
                            </a>
                        </li>
                        <li>
                            <a href="/product/wireplan">
                                <i class="icon-internet-40"><span class="blind">인터넷 / 전화 /  IPTV</span></i>
                                인터넷 / 전화 /  IPTV
                            </a>
                        </li>
                        <li>
                            <a href="/product/roaming">
                                <i class="icon-roaming-40"><span class="blind">T로밍</span></i>
                                T로밍
                            </a>
                        </li>
                        <li>
                            <a href="/benefit/submain/discount">
                                <i class="icon-discount-40"><span class="blind">혜택 / 할인 > 요금 할인</span></i>
                                혜택 / 할인 > 요금 할인
                            </a>
                        </li>
                        <li>
                            <a href="/benefit/submain/combinations">
                                <i class="icon-discount-40"><span class="blind">혜택 / 할인 > 결합 할인  </span></i>
                                혜택 / 할인 > 결합 할인  
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- //다른 페이지를 찾고 계신가요? -->

            </div>
        </div>
        <!--// #contents -->
        <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
    </div>
</body>

<% include ../../components/javascript.component.html %>
<script>
    $(document).ready(function () {
        new Tw.ProductList($('.wrap'), <%- JSON.stringify(params) %>, { code: 'F01200', type: 'additions' });
    });
</script>
<% include ../../components/mobileplan-add/product.mobileplan-add.list.component.html %>
<% include ../../components/end.component.html %>