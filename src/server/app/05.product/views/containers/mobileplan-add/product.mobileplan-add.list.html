<%#
* FileName: product.mobileplan-add.html
* Author: Jiyoung Jo (jiyoungjo@sk.com)
* Date: 2018.10.09
* id: MV_01
%>

<% include ../../components/start.component.html %>

<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#gnb">메뉴 바로가기</a></li>
            <li><a href="#contents">본문 바로가기</a></li>
            <li><a href="#footer">푸터 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <!-- #header -->
        <%- include('../../../common/views/components/header.component.html', { title: '부가서비스', svcInfo, option: { line: true } }); %>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 class="blind">내용</h2>
            <div class="container">
                <!-- 사용중인 상품 -->
                <% if (svcInfo && additionData.myAdditions) { %>
                <div class="cont-box noborder gaps-style01">
                    <div class="submain-myfeeproducts-wrap">
                        <!-- <a href="#" class="submain-myfeeproducts">
                          <h3 class="title">사용중인 상품</h3>
                          <p class="text">band 데이터 퍼펙트S</p>
                      </a> -->
                        <a href="/myt-join/myplanadd" class="submain-myfeeproducts">
                            <h3 class="title">사용중인 상품</h3>
                            <p class="text"><span class="tx-bold"><%= additionData.myAdditions.recentlyJoinsProdNm %></span> 외 <%= additionData.myAdditions.addProdCnt %>건</p>
                        </a>
                    </div>
                </div>
                <% } %>
                <!--//사용중인 상품 -->

                <div class="ti-caption-gray">
                    <button class="bt-select fe-select-order" title="정렬 선택" aria-haspopup="true">추천순</button>
                    <div class="num">
                        <button class="bt-select fe-select-filter" title="조건 선택" aria-haspopup="true">
                            <% const searchOption = additionData.additions.searchOption; %>
                            <% const filters = searchOption && searchOption.searchFltIds %>
                            <% if (filters) { %>
                                <% for (let i = 0; i < Math.min(2, filters.length); i++) { %>
                                    <% if (i > 0) { %>,<% } %>
                                    #<span class="vbl tx-bold"><%= filters[i].prodFltNm %></span>
                                <% } %>
                                <% if (filters.length > 2) { %> 외<%= filters.length - 2 %>건 <% } %>
                            <% } else if (searchOption && searchOption.searchProdTagNm) { %>
                                #<span class="vbl tx-bold"><%= searchOption.searchProdTagNm %></span>
                            <% } else { %>
                                #<span class="vbl tx-bold">전체 부가서비스</span>
                            <% } %>
                        </button>
                    </div>
                </div>

                <!-- 이런 요금제는 어떠세요? -->
                <% const additions = additionData.additions.products; %>
                <% if (additions) { %>
                <div class="cont-box nogaps-hoz">
                    <ul class="recommendedrate-list">
                        <!-- 왼쪽 상품 이미지가 이미지로 들어갈경우 -->
                        <% for (let i = 0; i < additions.length; i++) { %>
                        <% const addition = additions[i]; %>
                        <!-- 왼쪽 상품 이미지가 bg로 들어갈경우(아래전체 type[n]으로 처리) -->
                        <li class="type01">
                            <a href="/product/mobileplan-add/callplan/<%= addition.prodId %>" class="product-infolink">
                                <div class="img-box"><img class="lte" src="<%= addition.prodIconImgUrl %>" alt="명칭"></div>
                                <div class="products-titleinfo">
                                    <h5 class="title">
                                        <%= addition.prodNm %>
                                    </h5>
                                    <% if (addition.basFeeAmt.isNaN) { %>
                                        <p class="info"><span class="money"><%= addition.basFeeAmt.value %></span></p>
                                    <% } else { %>
                                        <p class="info">월<span class="money"><%= addition.basFeeAmt.value %></span>원</p>
                                    <% } %>
                                </div>
                                <% if (addition.filters && addition.filters.length > 0) { %>
                                <div class="taglist-wrap">
                                    <% for (let j = 0; j < addition.filters.length; j++) { %>
                                    <span class="tag-text">#<%= addition.filters[j].prodFltNm %></span>
                                    <% } %>
                                </div>
                                <% } %> 
                                <% if (addition.prodSmryDesc) { %>
                                    <p class="products-detailinfo"><%= addition.prodSmryDesc %></p>
                                <% } %>
                            </a>
                        </li>
                        <% } %>
                    </ul>
                    <% const leftCount = additionData.additions.productCount - additions.length; %>
                    <% if (leftCount > 0) { %>
                    <div class="bt-more gap-style">
                        <button data-last-product="<%= additions[additions.length - 1].prodId %>" data-left-count="<%= leftCount %>">더보기(<%= leftCount %>)</button>
                    </div>
                    <% } %>
                </div>
                <% } %>
                <!-- //이런 요금제는 어떠세요? -->
                <hr class="cont-sp type1" aria-hidden="true" />
                <!-- cont-box -->
                <div class="cont-box">
                    <h3>다른상품 더보기</h3>
                    <!-- .widget -->
                    <div class="widget">
                        <div class="widget-box horizontal">
                            <div class="horizontal-slide">
                                <ul class="horizontal-list add-prod">
                                    <li>
                                        <div>
                                            <a href="/product/mobileplan">
                                                <span class="ico type1"></span>
                                                <span>모바일<br />요금제</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <a href="/product/wireplan">
                                                <span class="ico type4"></span>
                                                <span>인터넷/전화/IPTV</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <button>
                                                <span class="ico type3"></span>
                                                <span>T 로밍</span><!--TODO: 링크 이동 추가 필요(ID: TR)-->
                                            </button>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <a href="/benefit/index">
                                                <span class="ico type2"></span>
                                                <span>혜택&middot;할인</span>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- .widget -->
                </div>
                <!-- // cont-box -->
            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>

<% include ../../components/javascript.component.html %>
<script>
    $(document).ready(function () {
        new Tw.ProductList($('.wrap'), <%- JSON.stringify(params) %>, { code: 'F01200', type: 'additions' });
    });
</script>
<% include ../../components/mobileplan-add/product.mobileplan-add.list.component.html %>
<% include ../../components/end.component.html %>