<%#
* FileName: product.detail.html
* Author: Ji Hun Yang (jihun202@sk.com)
* Date: 2018.09.11
%>

<% include ../components/start.component.html %>
<body class="bg-productdetail">
<% if ( basicInfo && ( basicInfo.bgimgUrl || basicInfo.smrySurrColor ) ) { %>
<style type="text/css">
    <% if ( basicInfo.smrySurrColor ) { %>
        .bg-productdetail .header-wrap { background-color: <%= basicInfo.smrySurrColor %> }
        .bg-productdetail .productdetails-bg { background-color: <%= basicInfo.smrySurrColor %> }
    <% } %>
    <% if ( basicInfo.bgimgUrl ) { %>
        .bg-productdetail .productdetails-bg { background-image: url('<%= basicInfo.bgimgUrl %>'); }
    <% } %>
</style>
<% } %>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#gnb">메뉴 바로가기</a></li>
        <li><a href="#contents">본문 바로가기</a></li>
        <li><a href="#footer">푸터 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->
<!-- #header -->
<%- include('../../../common/views/components/header.component.html', { title: '상품상세', svcInfo, option: { line: true }
}); %>
<!--// #header -->
<!-- #contents -->
<div class="wrap" data-prod_id="<%= prodId %>" data-ctg_cd="<%= basicInfo.ctgCd %>" data-ctg_key="<%= ctgKey %>"
     data-filter_ids="<%= filterIds %>">
    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <h2 class="blind">내용</h2>
        <div class="container">

            <!-- 상품타이틀 -->
            <div class="cont-box nogaps-hoz productdetails-bg">
                <div class="productdetails-wrap">
                    <h3 class="productdetails-title">
                        <% if ( ctgKey === 'plans' && prodRedisInfo.summary.prodSmryDesc ) { %>
                        <span class="sub"><%= prodRedisInfo.summary.prodSmryDesc %></span>
                        <% } %>
                        <% if ( prodRedisInfo.summary.prodNm ) { %>
                        <div class="title"><%= prodRedisInfo.summary.prodNm %></div>
                        <% } %>
                    </h3>
                    <% if (basicInfo.prodFilterFlagList) { %>
                    <div class="productdetails-taglist">
                        <% for (var i in basicInfo.prodFilterFlagList) { %>
                        <a href="/product/<%= ctgKey %>?filters=<%= basicInfo.prodFilterFlagList[i].prodFltId %>"
                           class="tag-text">#<%= basicInfo.prodFilterFlagList[i].prodFltNm %></a>
                        <% } %>
                    </div>
                    <% } %>
                    <% if ( basicInfo.prodStCd === 'E1000' ) { %>
                    <% if ( ctgKey === 'plans' && (prodRedisInfo.summaryCase === '2' || basicInfo.prodScrbYn === 'N') )
                    { %>
                    <p class="productdetails-text02"><%= prodRedisInfo.summary.sktProdBenfCtt %></p>
                    <% } %>
                    <% if ( ctgKey === 'plans' && (prodRedisInfo.summaryCase === '3' && basicInfo.prodScrbYn === 'Y') )
                    { %>
                    <%- prodRedisInfo.summary.ledDtlHtmlCtt %>
                    <% } %>
                    <% if ( ctgKey === 'additions' && prodRedisInfo.summary.prodSmryDesc ) { %>
                    <p class="productdetails-text02"><%= prodRedisInfo.summary.prodSmryDesc %></p>
                    <% } %>
                    <% } %>
                    <% if ( basicInfo.ctgCd === 'F01200' && basicInfo.svcOfrCoNm ) { %>
                    <p class="productdetails-text03">서비스 제공 : <%= basicInfo.svcOfrCoNm %></p>
                    <% } %>
                </div>
                <div class="productdetails-ledgercase">
                    <% if ( prodRedisInfo.summary.basFeeInfo ) { %>
                    <p class="price-text">
                        월정액(부가세포함)<br>
                        <strong class="price-type"><%= prodRedisInfo.summary.basFeeInfo.value %></strong>
                        <% if ( !prodRedisInfo.summary.basFeeInfo.isNaN ) { %>
                        <span class="unit">원</span>
                        <% } %>
                    </p>
                    <% } %>
                    <% if ( basicInfo.prodStCd !== 'E1000' ) { %>
                    <div class="limit">
                        가입제한 상품
                    </div>
                    <% } else { %>
                    <% if ( basicInfo.prodScrbYn === 'Y' && (ctgKey === 'plans' && svcInfo.prodId !== prodId || ctgKey
                    === 'additions' && !isAdditionsJoined) ) { %>
                    <div class="btn">
                        <button type="button" class="bt-white1 fe-btn_join">가입</button>
                    </div>
                    <% } %>
                    <% if ( basicInfo.prodTermYn === 'Y' && (ctgKey === 'additions' && isAdditionsJoined) ) { %>
                    <div class="btn">
                        <button type="button" class="bt-white2 fe-btn_terminate">해지</button>
                    </div>
                    <% } %>
                    <% if ( basicInfo.prodScrbYn === 'N' && (ctgKey === 'plans' && svcInfo.prodId !== prodId || ctgKey
                    === 'additions' && !isAdditionsJoined) ) { %>
                    <div class="limit">
                        가입제한 상품
                    </div>
                    <% } %>
                    <% } %>
                </div>
                <% if ( (prodRedisInfo.summaryCase === '1' || prodRedisInfo.summaryCase === '2')
                && (prodRedisInfo.summary.basOfrDataQtyCtt || prodRedisInfo.summary.basOfrVcallTmsCtt ||
                prodRedisInfo.summary.basOfrCharCntCtt) ) { %>
                <ul class="productdetails-utill">
                    <% if ( prodRedisInfo.summary.basOfrDataQtyCtt ) { %>
                    <li>- 데이터 <strong class="str">
                        <% if ( prodRedisInfo.summary.basOfrDataQtyCtt.isNaN ) { %>
                        <%= prodRedisInfo.summary.basOfrDataQtyCtt.value %>
                        <% } else { %>
                        <%= prodRedisInfo.summary.basOfrDataQtyCtt.value.data +
                        prodRedisInfo.summary.basOfrDataQtyCtt.value.unit %>
                        <% } %>
                    </strong></li>
                    <% } %>
                    <% if ( prodRedisInfo.summary.basOfrVcallTmsCtt ) { %>
                    <li>- 음성 <strong class="str">
                        <%= prodRedisInfo.summary.basOfrVcallTmsCtt.value %>
                    </strong></li>
                    <% } %>
                    <% if ( prodRedisInfo.summary.basOfrCharCntCtt ) { %>
                    <li>- 문자 <strong class="str">
                        <% if ( prodRedisInfo.summary.basOfrCharCntCtt.isNaN ) { %>
                        <%= prodRedisInfo.summary.basOfrCharCntCtt.value %>
                        <% } else { %>
                        <%= prodRedisInfo.summary.basOfrCharCntCtt.value + prodRedisInfo.summary.basOfrCharCntCtt.unit
                        %>
                        <% } %>
                    </strong></li>
                    <% } %>
                </ul>
                <% } %>
            </div>
            <!-- //상품타이틀 -->

            <% if ( ctgKey === 'plans' && (prodRedisInfo.summaryCase === '3' && basicInfo.prodScrbYn === 'Y')
            || ctgKey === 'additions' && prodRedisInfo.summary.sktProdBenfCtt ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <div class="submain-findyourplan-wrap type01">
                <button type="button" class="submain-findyourplan">
                    <h3 class="title">SKT만의 혜택</h3>
                    <p class="text"><%= prodRedisInfo.summary.sktProdBenfCtt %></p>
                </button>
            </div>
            <% } %>

            <!-- 상단 배너 -->
            <% if ( prodRedisInfo.banner.T ) { %>
            <% if ( prodRedisInfo.banner.T.imgFilePathNm ) { %>
            <img src="<%= prodRedisInfo.banner.T.imgFilePathNm %>">
            <% } else { %>
            <%- prodRedisInfo.banner.T.bnnrDtlHtmlCtt %>
            <% } %>
            <% } %>
            <!-- //상단 배너 -->

            <% if ( false ) { // @todo 인터넷, 전화, TV, 결합상품 에서만 노출, 카테고리 코드 미확정 및 CBT 범위(모바일) 미해당이므로 주석 처리 %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 가입상담  -->
            <div class="joinconsulting-wrap">
                <p class="text">가입상담을 받아보시겠어요?</p>
                <div class="btn">
                    <div class="bt-alone">
                        <button class="bt-line-blue1">예약</button>
                    </div>
                </div>
            </div>
            <!-- //가입상담  -->
            <% } %>

            <% if ( ctgKey === 'plans' && (svcInfo.prodId !== prodId) ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <div class="offer-save-wrap">
                <p>이 요금제로 바꾸면 월 <span class="str">8,000</span> 원 절약됩니다.</p>
                <a href="/product/find-my-best-plans" class="btn">요금제 상세보기</a>
            </div>
            <% } %>

            <% if ( ctgKey === 'plans' && svcInfo.prodId === prodId || ctgKey === 'additions' && isAdditionsJoined ) {
            %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 기가입상품  -->
            <div class="joinconsulting-wrap">
                <p class="text">이용중인 상품 입니다.</p>
                <% if ( basicInfo.linkBtnList.setting && basicInfo.linkBtnList.setting.length > 0 ) { %>
                <div class="btn">
                    <div class="bt-alone">
                        <button class="fe-btn_setting bt-line-blue1">
                            <% if ( basicInfo.linkBtnList.setting && basicInfo.linkBtnList.setting.length > 0 ) { %>
                            설정
                            <% } else { %>
                            <%= basicInfo.linkBtnList.setting[0].linkNm %>
                            <% } %>
                        </button>
                    </div>
                    <ul class="fe-setting_btn_list" style="display: none">
                        <% for (var i in basicInfo.linkBtnList.setting) { %>
                        <li data-url="<%= basicInfo.linkBtnList.setting[i].linkUrl %>"><%=
                            basicInfo.linkBtnList.setting[i].linkNm %>
                        </li>
                        <% } %>
                    </ul>
                </div>
                <% } %>
            </div>
            <!-- //기가입상품  -->
            <% } %>

            <% if ( prodRedisInfo.contents.LA || prodRedisInfo.contents.R ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>
            <% if ( prodRedisInfo.contents.LA ) { %>
            <div class="product-visualization prCont"><%- prodRedisInfo.contents.LA %></div>
            <% } %>
            <% if ( prodRedisInfo.contents.R ) { %>
            <div class="product-visualization prCont"><%- prodRedisInfo.contents.R %></div>
            <% } %>
            <% } %>

            <% if ( prodRedisInfo.contents.LIST && prodRedisInfo.contents.LIST.length > 0 ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 팝업 띄우는 링크 -->
            <div class="cont-box nogaps noborder">
                <ul class="link-long-list">
                    <% for (var i in prodRedisInfo.contents.LIST) { %>
                    <li>
                        <div class="link-long">
                            <button class="fe-btn_contents_detail" data-contents="<%= i %>">
                                <%= prodRedisInfo.contents.LIST[i].briefTitNm %>
                                <span class="tx-sub">
                    <span class="ico"><span class="blind">보기</span></span>
                  </span>
                            </button>
                        </div>
                        <div class="none fe-contents_detail_item" aria-hidden="true"
                             data-title="<%= prodRedisInfo.contents.LIST[i].briefTitNm %>"
                             data-class="<%= prodRedisInfo.contents.LIST[i].vslClass %>">
                            <%- prodRedisInfo.contents.LIST[i].ledDtlHtmlCtt %>
                        </div>
                    </li>
                    <% } %>
                </ul>
            </div>
            <!-- //팝업 띄우는 링크 -->
            <% } %>

            <!-- 중단 배너 -->
            <% if ( prodRedisInfo.banner.C ) { %>
            <% if ( prodRedisInfo.banner.C.imgFilePathNm ) { %>
            <img src="<%= prodRedisInfo.banner.C.imgFilePathNm %>">
            <% } else { %>
            <%- prodRedisInfo.banner.C.bnnrDtlHtmlCtt %>
            <% } %>
            <% } %>
            <!-- //중단 배너 -->

            <% if ( series && series.seriesProdList.length > 0 ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 상품 -->
            <div class="cont-box nogaps-hoz">
                <div class="widget-box">
                    <ul class="representcharge-list">
                        <li class="on">
                            <button role="button" aria-pressed="false" class="representcharge-info">
                                <h4 class="title"><%= series.prodGrpNm %></h4>
                                <div class="img-box"><% if ( series.prodImg ) { %><img class="lte"
                                                                                       src="<%= series.prodImg %>"
                                                                                       alt="<%= series.prodGrpnm %>"><%
                                    } %>
                                </div>
                                <p class="text"><%= series.prodGrpDesc %></p>
                            </button>
                            <ul class="representcharge-product">
                                <% for (var i in series.seriesProdList) { %>
                                <li>
                                    <a href="/product/detail/<%= series.seriesProdList[i].prodId %>"
                                       class="product-infolink">
                                        <div class="products-titleinfo">
                                            <h5 class="title"><%= series.seriesProdList[i].prodNm %></h5>
                                            <% if ( series.seriesProdList[i].basFeeInfo.isNaN ) { %>
                                            <p class="info"><span class="money"><%= series.seriesProdList[i].basFeeInfo.value %></span>
                                            </p>
                                            <% } else { %>
                                            <p class="info">월<span class="money"><%= series.seriesProdList[i].basFeeInfo.value %></span>원
                                            </p>
                                            <% } %>
                                        </div>
                                        <dl class="products-additionalinfo">
                                            <% if ( series.seriesProdList[i].basOfrDataQtyCtt ) { %>
                                            <dt>데이터</dt>
                                            <% if (series.seriesProdList[i].basOfrDataQtyCtt.isNaN) { %>
                                            <dd>
                                                <span class="point"><%= series.seriesProdList[i].basOfrDataQtyCtt.value %></span>
                                            </dd>
                                            <% } else { %>
                                            <dd>
                                                <span class="point"><%= series.seriesProdList[i].basOfrDataQtyCtt.value.data + series.seriesProdList[i].basOfrDataQtyCtt.value.unit %></span>
                                            </dd>
                                            <% } %>
                                            <% } %>
                                            <% if ( series.seriesProdList[i].basOfrVcallTmsCtt ) { %>
                                            <dt>음성</dt>
                                            <dd><%= series.seriesProdList[i].basOfrVcallTmsCtt.value %></dd>
                                            <% } %>
                                            <% if ( series.seriesProdList[i].basOfrCharCntCtt ) { %>
                                            <dt>문자</dt>
                                            <% if (series.seriesProdList[i].basOfrVcallTmsCtt.isNaN) { %>
                                            <dd><%= series.seriesProdList[i].basOfrCharCntCtt.value %></dd>
                                            <% } else { %>
                                            <dd><%= series.seriesProdList[i].basOfrCharCntCtt.value +
                                                series.seriesProdList[i].basOfrCharCntCtt.unit %>
                                            </dd>
                                            <% } %>
                                            <% } %>
                                        </dl>
                                    </a>
                                </li>
                                <% } %>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- //상품 -->
            <% } %>

            <div class="fe-recommended_rate_list" style="display: none">
                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- 유사한 요금제/부가서비스 찾기-->
                <div class="cont-box">
                    <div class="recommendedrate-wrap">
                        <h3 class="title">유사한 <%= ctgName %> 찾기</h3>
                        <div class="more">
                            <button class="link fe-btn_recommended_rate_list_more" style="display: none">더보기</button>
                        </div>
                    </div>
                    <div class="recommendedratetaglist-wrap">
                        <% for (var i in basicInfo.prodFilterFlagList) { %>
                        <a href="/product/<%= ctgKey %>?filters=<%= basicInfo.prodFilterFlagList[i].prodFltId %>"
                           class="tag-text">#<%= basicInfo.prodFilterFlagList[i].prodFltNm %></a>
                        <% } %>
                    </div>
                    <ul class="recommendedrate-list"></ul>
                </div>
                <!-- //유사한 요금제/부가서비스 찾기 -->
            </div>

            <% if ( ctgKey === 'additions' && prodFilterInfo ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 다른 부가상품 더보기-->
            <div class="cont-box">
                <h3>다른 부가상품 더보기</h3>
                <!-- .widget -->
                <div class="widget">
                    <div class="widget-box horizontal">
                        <div class="horizontal-slide">
                            <ul class="horizontal-list add-prod">
                                <% for( var i in prodFilterInfo.filters ) { %>
                                <li>
                                    <div>
                                        <a href="/product/mobileplan-add/list?filters=<%= prodFilterInfo.filters[i].prodFltId %>">
                                            <span class="ico type1"></span>
                                            <span><%= prodFilterInfo.filters[i].prodFltNm %></span>
                                        </a>
                                    </div>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- .widget -->
            </div>
            <!-- //다른 부가상품 더보기 -->
            <% } %>

            <% if ( recommends.recommendProdList && recommends.recommendProdList.length > 0 ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 함께하면 더욱 유용한 상품 -->
            <div class="cont-box">
                <h3>함께하면 더욱 유용한 상품</h3>
                <!-- .widget -->
                <div class="widget">
                    <div class="widget-box horizontal">
                        <div class="horizontal-slide">
                            <ul class="horizontal-list useful-goods">
                                <% for ( var i in recommends.recommendProdList ) { %>
                                <li>
                                    <div>
                                        <button class="bg1 fe-btn_recommend_prod"
                                                data-prod_id="<%= recommends.recommendProdList[i].prodId %>">
                                            <!-- 보라색 -->
                                            <span class="located top">
                          <span class="txt-tit"><%= recommends.recommendProdList[i].prodNm %></span>
                                                <!-- @todo TBD --><span class="txt-type">부가상품</span><!-- // -->
                        </span>
                                            <span class="located bottom">
                          <span class="txt-detail"><%= recommends.recommendProdList[i].prodSmryDesc %></span>
                        </span>
                                            <span class="ico"></span>
                                        </button>
                                    </div>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- .widget -->
            </div>
            <!-- //함께하면 더욱 유용한 상품 -->
            <% } %>

            <% if ( recommends.recommendAppList && recommends.recommendAppList.length > 0 ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- 함께하면 더욱 스마트한 앱서비스 -->
            <div class="cont-box">
                <h3>함께하면 더욱 스마트한 앱서비스</h3>
                <!-- .widget -->
                <div class="widget">
                    <div class="widget-box horizontal">
                        <div class="horizontal-slide">
                            <ul class="horizontal-list smart-app">
                                <% for ( var i in recommends.recommendAppList ) { %>
                                <li>
                                    <div>
                                        <button class="fe-btn_recommend_prod"
                                                data-prod_id="<%= recommends.recommendAppList[i].prodId %>">
                                            <% if ( recommends.recommendAppList[i].appImg ) { %>
                                            <img class="ico" src="<%= recommends.recommendAppList[i].appImg %>">
                                            <% } %>
                                            <span><%= recommends.recommendAppList[i].prodNm %></span>
                                        </button>
                                    </div>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- .widget -->
            </div>
            <!-- // 함께하면 더욱 스마트한 앱서비스 -->
            <% } %>

            <!-- 하단 배너 -->
            <% if ( prodRedisInfo.banner.B ) { %>
            <% if ( prodRedisInfo.banner.B.imgFilePathNm ) { %>
            <img src="<%= prodRedisInfo.banner.B.imgFilePathNm %>">
            <% } else { %>
            <%- prodRedisInfo.banner.B.bnnrDtlHtmlCtt %>
            <% } %>
            <% } %>
            <!-- //하단 배너 -->

            <% if ( relateTags && relateTags.length > 0 ) { %>
            <hr class="cont-sp type1" aria-hidden="true"/>
            <!-- cont-box -->
            <div class="cont-box gaps-style02">
                <h3 class="suggest-tag-title">추천태그</h3>
                <ul class="suggest-tag-list openlist-wrap">
                    <% for (var i in relateTags) { %>
                    <li><a href="/product/<%= ctgKey %>?tag=<%= relateTags[i].tagId %>" class="link">#<%=
                        relateTags[i].tagNm %></a></li>
                    <% } %>
                </ul>
            </div>
            <% } %>
            <% if (false) { %>
            <!--//cont-box -->
            <hr class="cont-sp type1" aria-hidden="true"/>
            <ul class="bt-slice share">
                <li class="bt-white3">
                    <button>공유하기</button>
                </li>
            </ul>
            <% } %>

        </div>
    </div>
    <!--// #contents -->
    <!-- #footer -->
    <footer id="fe-all-menu">
        <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
        <%- include('../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo
        }); %>
    </footer>
    <!--// #footer -->
</div>
</body>
<% include ../components/javascript.component.html %>
<% include ../components/detail/product.detail.recommended-rate.html %>
<script>
  $(document).ready(function () {
    new Tw.ProductDetail($('.wrap'));
  });
</script>
<% include ../components/end.component.html %>
