<%#
* FileName: myt-fare.bill.guide.integrated-rep.html
* Author: Kim Myoung-Hwan (skt.P130714@partner.sk.com)
* Date: 2018.09.12
%>

<% include ../../components/start.component.html %>
<% include ../../components/javascript.component.html %>

<script id="fe-entryTplPaidAmtSvcCdList" type="text/x-handlebars-template">
    {{!-- 주석 : 유형별 서비스 사용요금 --}}
    {{# each resData as |rootItem rootIndex|}}
    <li>
        <span class="tit">{{rootItem.svcNm}}</span>
        <span class="value type2">{{rootItem.amt}}원</span>
    </li>
    {{/each}}
</script>

<script id="fe-entryTplChild" type="text/x-handlebars-template">
    {{!-- 주석 : 자녀사용요금 --}}
    {{# each resData as |rootItem rootIndex|}}
    <li>
        <button>
            <span class="ico-wrap"><i class="icon-cellphone-80"><span class="blind">cellphone</span></i></span>
            <span class="cont">
                <span class="info-title">{{rootItem.eqpMdlNm}}<i class="icon-children ml6"><span class="blind">자녀</span></i></span>
                <span class="info-sub">{{rootItem.svcNum}}</span>
                <span class="price">{{rootItem.detailInfo.useAmtTot}}원</span>
            </span>
        </button>
    </li>
    {{/each}}
</script>

<script id="fe-entryTplUseBill" type="text/x-handlebars-template">

    <!-- .cont-box -->
    <div class="cont-box nogaps-btm">
        <div class="statement-cont type2">
            <div class="single-list">
                <span class="title">
                    {{!-- 주석 아이콘 --}}
                    {{#if_icon rootItem.label }}
                    {{/if_icon}}
                    <span class="in-tx type2">{{resData.useSvcType.svcType}}</span>
                </span>
            </div>
            <div class="statement-detail">
                <!-- .widget -->
                <div class="widget">
                    <div class="widget-box accordion">
                        <div class="acco-cover"><!-- toggle : 한개만 열기 -->
                            <div class="acco-style">
                                <ul class="acco-list">

                                    {{!-- 주석 : billItmLclNm --}}
                                    {{# each resData.useBill as |largeItem largeIndex|}}

                                    <li class="acco-box noborder">

                                        <div class="acco-tit">
                                            <button role="button" aria-pressed="false">
                                                <div class="in-title">
                                                    <span class="tit">{{largeItem.id}}</span>
                                                    <span class="tx-cont {{#if_dc_red largeItem.id }}{{/if_dc_red}}">{{largeItem.totPrice}} 원</span>
                                                </div>
                                            </button>
                                        </div>
                                        <div class="acco-cont">

                                            <div class="in-cont">
                                                <div class="basic-list">
                                                    <ul>

                                                        {{!-- 주석 billItmSclNm --}}
                                                        {{# each largeItem.children as |midItem midIndex|}}

                                                        <li>
                                                            <div class="inner-top">
                                                                <span class="title">{{midItem.id}}</span>
                                                                <span class="tx-cont">{{midItem.totPrice}} 원</span>
                                                            </div>
                                                            <div class="inner-row">
                                                                <ul>

                                                                    {{!-- 주석 --}}
                                                                    {{# each midItem.children as |smaItem smaIndex|}}
                                                                    <li>
                                                                        <span class="title">{{smaItem.billItmNm}}</span>
                                                                        <span class="tx-cont">{{smaItem.invAmt}} 원</span>
                                                                    </li>
                                                                    {{/each}}

                                                                </ul>
                                                            </div>

                                                        </li>
                                                        {{/each}}

                                                    </ul>

                                                    <div class="noti-words">
                                                        <span class="inner-words" id="aria-footnote-05">
                                                            <i class="icon-fnote ml6"><span class="blind">각주 참고</span></i>부가가치세 제외 대상 표시
                                                        </span>
                                                        <span class="inner-words" id="aria-footnote-06">
                                                            <i class="icon-acompany"><span class="blind">타사</span></i>당사에서 청구 대행하는 타사 요금
                                                        </span>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </li>

                                    {{/each}}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!--// .widget -->
            </div>
        </div>
    </div>
    <!--// .cont-box -->

</script>

<script id="fe-entryTplBill" type="text/x-handlebars-template">
    {{!-- 주석 : svcMgmtNum --}}
    {{# each resData as |rootItem rootIndex|}}
    <!-- .cont-box -->
    <div class="cont-box nogaps-btm">
        <div class="statement-cont type2">
            <div class="single-list">
                <span class="title">
                    {{!-- 주석 아이콘 --}}
                    {{#if_icon rootItem.label }}
                    {{/if_icon}}
                    <span class="in-tx">{{rootItem.label}}<span class="val">{{rootItem.svcInfoNm}}</span></span>
                    <button class="bt-link-tx underline"><a href="/product/callplan/{{rootItem.prodId}}">{{rootItem.prodNm}}</a></button>
                </span>
                <span class="price">{{rootItem.totPrice}}원</span>
            </div>
            <div class="statement-detail">
                <!-- .widget -->
                <div class="widget">
                    <div class="widget-box accordion">
                        <div class="acco-cover"><!-- toggle : 한개만 열기 -->
                            <div class="acco-style">

                                <ul class="acco-list">

                                    {{!-- 주석 : billItmLclNm --}}
                                    {{# each rootItem.children as |largeItem largeIndex|}}

                                    <li class="acco-box">
                                        <div class="acco-tit">
                                            <button role="button" aria-pressed="false">
                                                <div class="in-title">
                                                    <span class="tit">{{largeItem.id}}</span>
                                                    <span class="tx-cont {{#if_dc_red largeItem.id }}{{/if_dc_red}}">{{largeItem.totPrice}} 원</span>
                                                </div>
                                            </button>
                                        </div>
                                        <div class="acco-cont">
                                            <div class="in-cont">

                                                <div class="basic-list">
                                                    <ul>

                                                        {{!-- 주석 billItmSclNm --}}
                                                        {{# each largeItem.children as |midItem midIndex|}}
                                                        <li>
                                                            <div class="inner-top">
                                                                <span class="title">

                                                                    {{!-- 주석 콘텐츠이용료 자세히보기 --}}
                                                                    {{#if_contents midItem.id }}
                                                                    {{/if_contents}}

                                                                    {{!-- 주석 타사 --}}
                                                                    {{#if_third_party midItem.id '콘텐츠이용료'}}
                                                                    {{/if_third_party}}
                                                                    {{#if_third_party midItem.id '소액결제'}}
                                                                    {{/if_third_party}}
                                                                </span>
                                                                <span class="tx-cont">{{midItem.totPrice}} 원</span>
                                                            </div>
                                                            <div class="inner-row">
                                                                <ul>

                                                                    {{!-- 주석 --}}
                                                                    {{# each midItem.children as |smaItem smaIndex|}}
                                                                    <li>
                                                                        <span class="title">{{smaItem.billItmNm}}</span>
                                                                        <span class="tx-cont">{{smaItem.invAmt}} 원</span>
                                                                    </li>
                                                                    {{/each}}

                                                                </ul>
                                                            </div>

                                                        </li>

                                                        {{/each}}


                                                    </ul>
                                                    <div class="noti-words">
                                                        <span class="inner-words" id="aria-footnote-05">
                                                            <i class="icon-fnote ml6"><span class="blind">각주 참고</span></i>부가가치세 제외 대상 표시
                                                        </span>
                                                        <span class="inner-words" id="aria-footnote-06">
                                                            <i class="icon-acompany"><span class="blind">타사</span></i>당사에서 청구 대행하는 타사 요금
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>

                                    {{/each}}

                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
                <!--// .widget -->
            </div>
        </div>
    </div>
    <!--// .cont-box -->
    <hr class="cont-sp type1" aria-hidden="true"/>
    {{/each}}

</script>

<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#gnb">메뉴 바로가기</a></li>
        <li><a href="#contents">본문 바로가기</a></li>
        <li><a href="#footer">푸터 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->

<div id="fe-wrap" class="wrap">

    <%- include('../../../../common/views/components/header.component.html', { title: '요금안내서' }); %>

    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <div class="container">

            <div class="user-greeting">
                <i class="icon-dialog-emoji-56"><span class="blind">dialog emoji</span></i>
                <% if(commDataInfo.discount != 0 ){ %>
                <p class="msg">이번 달에는 요금할인을 <%=commDataInfo.discount %>원 받으셨어요.<br /><span class="str">SK텔레콤과 함께해 주셔서 감사합니다.</span></p>
                <% } else { %>
                <p class="msg"><%= svcInfo.mbrNm %>님,<br /><span class="str">SK텔레콤과 함께해 주셔서 감사합니다.</span></p>
                <% } %>
            </div>

            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <div class="calling-plan">
                    <button class="wrap-link">
                        <a href="/product/callplan/<%= svcInfo.prodId %>">
                        <i class="icon-badge-plan-my mr8"><span class="blind">my</span></i>
                        <span class="stit"><%= svcInfo.prodNm %></span>
                        </a>
                    </button>
                </div>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box">
                <div class="user-month-bill">
                    <div class="this-month-bill type3">
                        <p class="stit"><%=commDataInfo.selClaimDt %>
                            <span data-target="searchNmSvcType">
                                <i class="icon-whole"><span class="blind"><%=commDataInfo.intBillLineList[0].svcType %></span></i>
                            </span>
                        </p>
                        <% if( billpayInfo.useAmtTot != 0 ){ %>
                        <p class="price"><%=commDataInfo.useAmtTot %></p>
                        <p class="term"><%=commDataInfo.selStaDt %> ~ <%=commDataInfo.selEndDt %></p>
                        <% } %>
                        <div class="btn-wrap"><button class="btn-round2 btn-style3" data-target="conditionChangeBtn">조건 변경</button></div>
                    </div>
                    <% if( billpayInfo.useAmtTot == 0 ){ %>
                    <div class="result-none type2">
                        이번 달에 사용하신 이용요금이 없습니다.
                    </div>
                    <% } %>

                    <div class="detail-bill">
                        <ul data-target="hbPaidAmtSvcCdListArea">
                        </ul>
                    </div>
                </div>
                <% if( billpayInfo.coClCd === 'B' ){ %>
                <p class="txt-desc2 tx-normal mt22">SK브로드밴드를 통해 가입하신 서비스일 경우 청구요금에 포함되지 않습니다. 전화 106 또는 SK브로드밴드 웹사이트를 이용해 주세요.</p>
                <% } %>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <div data-target="hbDetailListArea">

            </div>

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <ul class="btn-link-list">
                    <% if(showConditionInfo.autopayYn == 'N' && showConditionInfo.selectNonPaymentYn == 'Y' ){ %>
                    <li class="last-line">
                        <button data-target="feePayBtn">요금 납부</button>
                    </li>
                    <% } %>
                    <li class="last-line">
                        <button data-target="payListBtn">납부 내역 조회</button>
                    </li>
                </ul>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps-btm" id="divChildListHaeder">
                <h3 class="tit-type6">자녀 회선 이용요금</h3>

                <ul class="my-line-info" data-target="hbChildListArea">

                </ul>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <ul class="full-link-list">
                    <li>
                        <button data-target="callGiftBtn">
                                <span class="inner">
                                    <span class="tit">콜기프트 사용요금</span>
                                </span>
                        </button>
                    </li>
                    <li>
                        <button data-target="roamingBtn">
                                <span class="inner">
                                    <span class="tit">로밍 사용요금</span>
                                </span>
                        </button>
                    </li>
                    <li>
                        <button data-target="donationBtn">
                                <span class="inner">
                                    <span class="tit">기부금/후원금</span>
                                </span>
                        </button>
                    </li>
                </ul>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps-btm">
                <h3 class="tx-bold">꼭 확인해 주세요</h3>
                <ul class="noti-list">
                    <li>이용요금 <button id="MF_02_01_tip_01" type="button" class="tip-view">TIP</button></li>
                    <li>로밍 이용요금 안내 <button id="MF_02_01_tip_02" type="button" class="tip-view">TIP</button></li>
                </ul>
            </div>
            <!--// .cont-box -->

            <!-- TBD
            <hr class="cont-sp type1" aria-hidden="true"/>
            <img src="<%= CDN %>/img/dummy/DC_02_TBD3.jpg" alt="페이지 바로가기 노출 영역" style="width:100%;vertical-align:top;"/>
             -->

        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
</div>

<script>

    $(document).ready(function () {
      new Tw.MyTFareBillGuideIntegratedRep( $('#fe-wrap'), {
      reqQuery: <%-JSON.stringify(reqQuery) %>,
      svcInfo: <%-JSON.stringify(svcInfo) %>,
      allSvc: <%-JSON.stringify(allSvc) %>,
      billpayInfo : <%-JSON.stringify(billpayInfo) %>,
      commDataInfo : <%-JSON.stringify(commDataInfo) %>,
      intBillLineInfo : <%-JSON.stringify(intBillLineInfo) %>,
      childLineInfo : <%-JSON.stringify(childLineInfo) %>,
      showConditionInfo : <%-JSON.stringify(showConditionInfo) %>,
      unpaidBillsInfo : <%-JSON.stringify(unpaidBillsInfo) %>
  } );
  });
</script>
<% include ../../components/end.component.html %>
