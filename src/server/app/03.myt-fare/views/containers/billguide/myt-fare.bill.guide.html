<%#
* MenuName: 나의 요금 > 요금안내서
* @file myt-fare.bill.guide.html
* @author 양정규
* @since 2020.01.28
* Summay: 요금안내서 화면
_%>
<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); _%>
<% include ../../components/javascript.component.html _%>
<script id="fe-entryTplPaidAmtSvcCdList" type="text/x-handlebars-template">
    {{!-- 주석 : 유형별 서비스 사용요금 --}}
    {{# each resData as |rootItem rootIndex|}}
        <li>
            <span class="tit">{{rootItem.svcNm}}</span>
            <span class="value type2">{{rootItem.amt}}원</span>
        </li>
    {{/each}}
</script>
<script id="fe-entryTplChild" type="text/x-handlebars-template">
    <div>
        {{!-- 주석 : 자녀사용요금 --}}
        {{# each resData as |rootItem rootIndex|}}
            <li>
                <button data-target="childBillInfo" data-svc-mgmt-num="{{rootItem.svcMgmtNum}}">
                    <span class="ico-wrap"><i class="icon-cellphone-80"><span class="blind">cellphone</span></i></span>
                    <span class="cont">
                <span class="info-title">{{rootItem.eqpMdlNm}}<i class="icon-children ml6"><span class="blind">자녀</span></i></span>
                <span class="info-sub">{{rootItem.svcNum}}</span>
                <span class="price">{{rootItem.detailInfo.useAmtTot}}원</span>
            </span>
                </button>
            </li>
        {{/each}}
    </div>
</script>
<script id="fe-bill-detail" type="text/x-handlebars-template">
    <div class="statement-detail">
        <!-- .widget -->
        <div class="widget">
            <div class="widget-box accordion">
                <div class="acco-cover"><!-- toggle : 한개만 열기 -->
                    <div class="acco-style">
                        <ul class="acco-list">

                            {{!-- 주석 : billItmLclNm --}}
                            {{# each list as |largeItem largeIndex|}}

                                <li class="acco-box noborder {{#is_open_accordion largeItem}}{{/is_open_accordion}}">

                                    <div class="acco-tit">
                                        <button role="button" aria-pressed="{{#is_open_accordion_btn largeItem}}{{/is_open_accordion_btn}}">
                                            <div class="in-title">
                                                <span class="tit">{{largeItem.id}}</span>
                                                <span class="tx-cont {{#if_dc_red largeItem.id }}{{/if_dc_red}}">{{largeItem.totPrice}} 원</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="acco-cont">

                                        <div class="in-cont">
                                            <div class="basic-list">
                                                <ul>

                                                    {{!-- 주석 billItmSclNm --}}
                                                    {{# each largeItem.children as |midItem midIndex|}}

                                                        <li>
                                                            <div class="inner-top">
                                                                <span class="title">

                                                                    {{!-- 주석 콘텐츠이용료 자세히보기 --}}
                                                                    {{#if_contents midItem.id }}
                                                                    {{/if_contents}}

                                                                    {{!-- 주석 타사 --}}
                                                                    {{#if_third_party midItem.id '콘텐츠이용료'}}
                                                                    {{/if_third_party}}
                                                                    {{#if_third_party midItem.id '휴대폰결제'}}
                                                                    {{/if_third_party}}
                                                                </span>
                                                                <span class="tx-cont">{{midItem.totPrice}} 원</span>
                                                            </div>
                                                            <div class="inner-row">
                                                                <ul>

                                                                    {{!-- 주석 --}}
                                                                    {{# each midItem.children as |smaItem smaIndex|}}
                                                                        <li>
                                                                            <span class="title">{{smaItem.billItmNm}}</span>
                                                                            <span class="tx-cont">{{smaItem.invAmt}} 원</span>
                                                                        </li>
                                                                    {{/each}}

                                                                </ul>
                                                            </div>

                                                        </li>
                                                    {{/each}}

                                                </ul>

                                                <div class="noti-words">
                                                    <span class="inner-words" id="aria-footnote-{{@index}}-05">
                                                        <i class="icon-fnote ml6"><span class="blind">각주 참고</span></i>부가가치세 제외 대상 표시
                                                    </span>
                                                    <span class="inner-words" id="aria-footnote-{{@index}}-06">
                                                        <i class="icon-acompany"><span class="blind">타사</span></i>당사에서 청구 대행하는 타사 요금
                                                    </span>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </li>

                            {{/each}}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--// .widget -->
    </div>
</script>
<!--A6 : 개별회선, 통합청구(일반)회선-->
<script id="fe-entryTplUseBill" type="text/x-handlebars-template">

    <!-- .cont-box -->
    <div class="cont-box nogaps-btm">
        <div class="statement-cont type2">
            <div class="single-list">
                <span class="title">
                    {{!-- 주석 아이콘 --}}
                    {{#if_icon resData.useSvcType.svcType }}
                    {{/if_icon}}
                    <span class="in-tx type2">{{resData.useSvcType.svcType}}</span>
                </span>
            </div>

            {{>billContent list=resData.useBill}}
        </div>
    </div>
    <!--// .cont-box -->
    <hr class="cont-sp type1" aria-hidden="true"/>
</script>
<script id="fe-entryTplBill" type="text/x-handlebars-template">
    {{!-- 주석 : svcMgmtNum --}}
    {{# each resData as |rootItem rootIndex|}}
        <!-- .cont-box -->
        <div class="cont-box nogaps-btm">
            <div class="statement-cont type2">
                <div class="single-list{{#unless rootItem.prodId }} item1{{/unless}}">
                <span class="title">
                    {{!-- 주석 아이콘 --}}
                    {{#if_icon rootItem.label }}
                    {{/if_icon}}
                    <span class="in-tx">{{rootItem.label}}<span class="val">{{rootItem.svcInfoNm}}</span></span>
                    {{#if rootItem.prodId }}
                        <button class="bt-link-tx underline" data-target="goProdPageBtn"
                                data-prod-page-url="/product/callplan?prod_id={{rootItem.prodId}}">
                        {{rootItem.prodNm}}
                        </button>
                    {{else}}
                        {{#if rootItem.prodId }}
                            <button>{{rootItem.prodNm}}</button>
                        {{/if}}
                    {{/if}}

                </span>
                    <span class="price">{{rootItem.totPrice}}원</span>
                </div>

                {{>billContent list=rootItem.children}}
            </div>
        </div>
        <!--// .cont-box -->
        <hr class="cont-sp type1" aria-hidden="true"/>
    {{/each}}

</script>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->

<div id="fe-wrap" class="wrap" data-menuId="<%- pageInfo.menuId %>">
    <%- include('../../../../common/views/components/header.component.html', { svcInfo: svcInfo, title: '요금안내서' }); _%>

    <div id="contents" class="container-wrap">
        <!-- 191115 웹접근성 수정_02 -->
        <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
        <!-- //191115 웹접근성 수정_02 -->
        <div class="container">
            <%- include('../../../../../common/views/components/common.select-line.component.html', { svcInfo: svcInfo, xtEid: { single: "CMMA_A3_B12_C43-1", multiple : "CMMA_A3_B12_C43-2" } }); _%>

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <div class="calling-plan">
                    <%_ const url = feePlan.isLink ? '/product/callplan?prod_id=' + feePlan.prodId : '';  _%>
                    <button class="wrap-link <%- !url ? 'tod-no-link' : ''%>" data-target="goProdPageBtn"
                            data-prod-page-url="<%-url%>">
                        <!-- DV001-14236 뱃지 MY-> 이용중으로 변경 -->
                        <i class="badge icon-badge-plan-my use"><span class="blind">이용 중</span></i>
                        <span class="stit"><%= feePlan.prodNm || ''%></span>
                    </button>
                </div>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box">
                <div class="user-month-bill">
                    <div class="this-month-bill">
                        <p class="stit"><%=data.commDataInfo.selClaimDt%>
                            <%# 통합청구(대표) 일때만 노출 %>
                            <%if (typeChk === 'A5') {%>
                            <span data-target="searchNmSvcType">
                                <i class="icon-whole"><span class="blind"><%=data.commDataInfo.intBillLineList[0].svcType %></span></i>
                            </span>
                            <%}%>
                        </p>
                        <%# 통합청구(일반) 일때만 노출 _%>
                        <%_ if (typeChk === 'A6') { _%>
                        <p class="msg">
                            <span class="str"><%- data.commDataInfo.repSvcNm %></span>에<br/>통합청구되었습니다.
                        </p>
                        <p class="term"><%= data.commDataInfo.selStaDt %> ~ <%= data.commDataInfo.selEndDt %></p>
                        <%_ } else if ( data.billpayInfo.existBill ) { _%>
                        <p class="price"><%= data.commDataInfo.useAmtTot %>원</p>
                        <p class="term"><%= data.commDataInfo.selStaDt %> ~ <%= data.commDataInfo.selEndDt %></p>
                        <%_ } _%>
                        <div class="btn-wrap">
                            <button class="btn-round2 btn-style3" data-target="conditionChangeBtn">청구월 변경</button>
                        </div>
                    </div>
                    <%# 통합청구(일반)이 아닐 때 노출 _%>
                    <%_ if ( typeChk !== 'A6' && !data.billpayInfo.existBill ) { _%>
                    <div class="result-none type2">
                        이번 달에 사용하신 이용요금이 없습니다.
                    </div>
                    <%_ } _%>
                    <!-- 201008 [OP002-10791] 추가 -->
                    <%_ if(miriPayment) {_%>
                    <div class="tod-miri-bill">
                        <button class="btn-miri" data-url="/myt-fare/info/miri?line=<%-data.reqQuery.line%>">
                            <span class="inner-flex">
                                <span class="tod-ico-miri"><span class="tod-blind">miri</span></span>
                                <span class="txt-wrap">
                                    미리납부하신 금액(MIRI)으로<br>
                                    <span class="num"><%-miriPayment%></span>원이 자동 납부되었습니다.
                                </span>
                            </span>
                        </button>
                    </div>
                    <%_}_%>
                    <!-- //201008 [OP002-10791] 추가 -->
                    <%# 통합청구(대표) 일때만 노출 %>
                    <%_ if (typeChk === 'A5') { _%>
                    <div class="detail-bill" id="fe-bill-sum-list">
                        <ul data-target="hbPaidAmtSvcCdListArea"></ul>
                    </div>
                    <%_ } _%>
                </div>
                <%_ if ( data.billpayInfo.coClCd === 'B' ) { _%>
                <p class="txt-desc2 tx-normal mt22">SK브로드밴드를 통해 가입하신 서비스일 경우 청구요금에 포함되지 않습니다. 전화 106 또는 SK브로드밴드 웹사이트를
                    이용해 주세요.</p>
                <%_ } _%>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>

            <div data-target="hbDetailListArea"></div>

            <%# 통합청구(일반)이 아닐 때 노출 %>
            <%_ if (typeChk !== 'A6') { _%>
            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <ul class="btn-link-list">
                    <%# 주석처리 요금납부버튼 무조건 노출 if (showConditionInfo.autopayYn == 'N' && showConditionInfo.selectNonPaymentYn == 'Y') { _%>
                    <li class="last-line">
                        <button data-target="feePayBtn">요금 납부</button>
                    </li>
                    <%# } _%>
                    <li class="last-line">
                        <button data-target="payListBtn">납부내역 조회</button>
                    </li>
                </ul>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true"/>
            <%_ } _%>

            <!-- .cont-box -->
            <div id="divChildListHaeder">
                <div class="cont-box nogaps-btm">
                    <h3 class="tit-type6">자녀 회선 이용요금</h3>
                    <ul class="my-line-info" data-target="hbChildListArea"></ul>
                </div>
            </div>
            <!--// .cont-box -->

            <%_ if ([roamDonaCallBtnYn.callgiftYn,roamDonaCallBtnYn.roamingYn,roamDonaCallBtnYn.donationYn].indexOf('Y') > -1) { _%>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <ul class="full-link-list">
                    <%_ if ( roamDonaCallBtnYn.callgiftYn === 'Y' ) { _%>
                    <li>
                        <button data-target="callGiftBtn">
                                <span class="inner">
                                    <span class="tit">콜기프트 사용요금</span>
                                </span>
                        </button>
                    </li>
                    <%_ } _%>
                    <%_ if ( roamDonaCallBtnYn.roamingYn === 'Y' ) { _%>
                    <li>
                        <button data-target="roamingBtn">
                                <span class="inner">
                                    <span class="tit">로밍 사용요금</span>
                                </span>
                        </button>
                    </li>
                    <%_ } _%>
                    <%_ if ( roamDonaCallBtnYn.donationYn === 'Y' ) { _%>
                    <li>
                        <button data-target="donationBtn">
                                <span class="inner">
                                    <span class="tit">기부금/후원금</span>
                                </span>
                        </button>
                    </li>
                    <%_ } _%>
                </ul>
            </div>
            <!--// .cont-box -->
            <%_ } _%>

            <!-- .cont-box -->
            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                <ul class="pg-chk-list02">
                    <li>
                        <button id="MF_02_01_tip_01" type="button" class="btn-tip" aria-haspopup="tree">이용요금 안내<i
                                class="icon-badge-tip"><span class="blind">tip</span></i></button>
                    </li>
                    <li>
                        <button id="MF_02_01_tip_02" type="button" class="btn-tip" aria-haspopup="tree">로밍 이용요금 안내<i
                                class="icon-badge-tip"><span class="blind">tip</span></i></button>
                    </li>
                </ul>
            </div>
            <!--// .cont-box -->
        </div>
    </div>
    <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
</div>
<script>
  $(document).ready(function () {
    /**
     * A4 : 개별청구회선
     * A5 : 통합청구(대표)회선
     * A6 : 통합청구(일반)회선
     * @type {string}
     */
    var data = '<%- escape(JSON.stringify(data)) %>';
    data = JSON.parse(window.unescape(data));
    var $el = $('#fe-wrap');
    switch ('<%-typeChk%>') {
      case 'A4':
        new Tw.MyTFareBillGuideIndividual($el, data);
        break;
      case 'A5':
        new Tw.MyTFareBillGuideIntegratedRep($el, data);
        break;
      case 'A6':
        new Tw.MyTFareBillGuideIntegratedNormal($el, data);
        break;
    }
  });
</script>
<% include ../../components/end.component.html _%>
