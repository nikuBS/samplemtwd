<%#
* MenuName: 나의 요금 > 서브메인(MF2)
* @file myt-fare.submain.html
* @author Kim InHwan (skt.p132150@partner.sk.com)
* @since 2018.09.27
* Update: 2018.11.27
* Summay: 나의요금 서브메인 화면
_%>
<%- include('../components/start.component.html', { pageInfo: data.pageInfo }); _%>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->
<div class="wrap" data-menuId="<%= data.pageInfo.menuId %>">
    <!-- #header -->
    <%- include('../../../common/views/components/header.component.html', { title: '나의 요금', svcInfo: data.svcInfo,  pageInfo: data.pageInfo }); _%>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap" data-id="wrapper">
        <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
        <div class="container" data-id="submain-container">
            <%# OP002-5303 : [개선][FE](W-1910-078-01) 회선선택 영역 확대 _%>
            <%- include('../../../common/views/components/common.select-line.component.html', { svcInfo: data.svcInfo, xtEid: {single: "CMMA_A3_B12-29", multiple : "CMMA_A3_B12-28"} }); _%>
            <%# // OP002-5303 : [개선][FE](W-1910-078-01) 회선선택 영역 확대 _%>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <%_ if (data.isPPS) { _%>
            <!-- 청구요금 -->
                <%- include('../components/submain/myt-fare.submain.claim-pay.html', data) _%>
            <%_ } else { _%>
                <%_ if (!data.claim && !data.usage) { _%>
                    <%- include('../components/submain/myt-fare.submain.claim-pay-none.html') _%>
                <%_ } else { _%>
                    <!-- 청구요금 -->
                    <%- include('../components/submain/myt-fare.submain.claim-pay.html', data) _%>
                    <!-- 상세항목 -->
                    <%- include('../components/submain/myt-fare.submain.payment-detail.html', data) _%>
                    <!-- 소액결제 콘텐츠이용 -->
                    <%- include('../components/submain/myt-fare.submain.micro-payment.html', data) _%>
                    <%_ if (data.totalPayment && data.totalPayment.length > 0) { _%>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps-btm">
                <div class="tit-wrap">
                    <h3 class="tit-type6 iblock tx-regular">최근 납부 내역</h3>
                    <button type="button" title="최근 납부내역" class="btn-txt-more" data-id="payment-detail">더보기</button>
                </div>
                <ul class="review-list">
                    <% for(var i=0; i < data.totalPayment.length; i++) { _%>
                    <%- include('../components/submain/myt-fare.submain.total-payment.html', data.totalPayment[i]) %>
                    <%_ } _%>
                </ul>
            </div>
            <!--// .cont-box -->
                    <%_ } _%>
                <%_ } _%>
            <%_ } _%>
            <hr class="cont-sp type1" aria-hidden="true" data-id="bill-chart-empty"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps-ver pb0" data-id="bill-chart">
                <h3 class="graph-tit ti-caption-type01">
                    <%= data.type === 'UF' ? '최근 이용요금내역' : '최근 청구요금내역' %>
                    <button title="최근 요금 내역" type="button" class="btn-tip" page-id="<%- data.pageInfo.menuId %>" id="<%- data.type === 'UF' ? 'TC000025':'TC000024' %>">
                        <i class="icon-badge-tip"><span class="blind">tip</span></i>
                    </button>
                </h3>
                <div class="chart-wrap chart4"></div>
            </div>
            <!--// .cont-box -->

            <%- include('../components/submain/myt-fare.submain.contribution.html', data) %>

            <hr class="cont-sp type1" aria-hidden="true" data-id="banners-empty" />

            <!-- .cont-box -->
            <div class="cont-box nogaps noborder" data-id="banners">
                <div class="main-slide-banner slide-pagingtype pg-rtop">
                    <!-- .widget -->
                    <div class="widget">
                        <div class="widget-box">
                            <div class="slider-box">
                                <ul class="slider" data-id="banner-list" data-location="M"></ul>
                            </div>
                        </div>
                    </div>
                    <!--// .widget -->
                </div>
            </div>
            <!-- //.cont-box -->

            <%_
            var lineCount = (data.childLineInfo && data.childLineInfo.length || 0) + data.otherLines.length;
            if (data.type !== 'UF' && lineCount > 0) {
            _%>
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <div class="cont-box nogaps-btm" data-id="other-line">
                <div class="ti-caption-type01 pb0">
                    <h2 class="tit">다른 회선 요금 조회
                    <button title="다른 회선 요금 조회" type="button" class="btn-tip" id="MF1_tip_01" page-id="<%- data.pageInfo.menuId %>">
                        <i class="icon-badge-tip"><span class="blind">tip</span></i>
                    </button>
                    </h2>
                </div>
                <ul class="my-line-info">
                </ul>
                <!-- [OP002-3317] 다른 회선(자녀포함)이 총 20개 이상인 경우 -->
                <%_ if (lineCount >= 20) { _%>
                <div class="btn-more">
                    <button type="button">더 보기</button>
                </div>
                <%_ } _%>
            </div>
            <!-- //.cont-box -->
            <%_ } _%>

            <!-- .cont-box -->
            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">다른 페이지를 찾고 계신가요?</h3>
                <ul class="pg-link-list" data-id="other-pages">
                    <%_
                        const eid = data.xtEid;
                        <!--선불폰이 아닌경우-->
                        if ( 'P'.indexOf(data.svcInfo.svcGr) === -1) {
                    _%>
                    <li>
                        <button data-href="/myt-fare/info/history" data-xt_eid="<%= eid.billHistory %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-charge-40"><span class="blind"></span></i>나의 요금 > 요금납부내역 조회
                        </button>
                    </li>
                    <%_ } _%>
                    <!--휴대폰/포켓파이/티로그인 인 경우-->
                    <%_ if (['M1', 'M3', 'M4'].indexOf(data.svcInfo.svcAttrCd) > -1) { _%>
                    <li>
                        <button data-href="/myt-data/hotdata" data-xt_eid="<%= eid.hotdata %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-history-40"><span class="blind"></span></i>나의 데이터/통화 > 실시간 잔여량
                        </button>
                    </li>
                    <li>
                        <button data-href="/myt-join/myplancombine/infodiscount" data-xt_eid="<%= eid.infodiscount %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입정보 &gt; 약정할인/기기상환 정보
                        </button>
                    </li>
                    <li>
                        <button data-href="/benefit/my" data-xt_eid="<%= eid.myBenefit %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-discount-40"><span class="blind"></span></i>혜택/할인 &gt; 나의 혜택/할인
                        </button>
                    </li>
                    <!--PPS or 유선인경우-->
                    <%_ } _%>
                    <%_ if ('M2' === data.svcInfo.svcAttrCd || data.svcInfo.svcAttrCd.startsWith('S')) { _%>
                    <li>
                        <button data-href="/myt-join/myplan" data-xt_eid="<%= eid.myplan %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입정보 &gt; 나의 요금제
                        </button>
                    </li>
                    <li>
                        <button data-href="/myt-join/additions" data-xt_eid="<%= eid.additions %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입정보 &gt; 나의 부가서비스
                        </button>
                    </li>
                    <%_ } _%>
                </ul>
                <ul class="pg-link-list" data-id="other-pages">
                    <!--휴대폰/포켓파이/티로그인 인 경우-->
                    <%_ if (['M1', 'M3', 'M4'].indexOf(data.svcInfo.svcAttrCd) > -1) { _%>
                    <li class="tod-linktype2">
                        <button data-href="/myt-join/submain" data-netf-href="true" data-xt_eid="<%= eid.join %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"></i>나의 가입정보 <span class="stxt">나의 요금제/부가서비스를 확인하세요</span>
                        </button>
                    </li>
                    <!--유선이 아닌경우-->
                    <%_ } _%>
                    <%_ if (!data.svcInfo.svcAttrCd.startsWith('S')) { _%>
                        <%_ if ('M2' === data.svcInfo.svcAttrCd) { _%>
                    <li class="tod-linktype2">
                        <button data-href="/benefit/submain" data-xt_eid="<%= eid.discount %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-discount-40"></i>혜택/할인 <span class="stxt">고객님을 위한 다양한 혜택을 확인하세요</span>
                        </button>
                    </li>
                        <%_ } _%>
                    <li class="tod-linktype2">
                        <button data-href="/product/mobileplan" data-xt_eid="<%= eid.mobileplan %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-price-plan-40"></i>요금제 <span class="stxt">내게 맞는 요금제로 변경하세요</span>
                        </button>
                    </li>
                    <!--유선인 경우-->
                    <%_ } _%>
                    <%_ if (data.svcInfo.svcAttrCd.startsWith('S')) { _%>
                    <li class="tod-linktype2">
                        <button data-href="/benefit/submain" data-xt_eid="<%= eid.combiDiscount %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-discount-40"></i>혜택/할인 <span class="stxt">고객님을 위한 다양한 혜택을 확인하세요</span>
                        </button>
                    </li>
                    <li class="tod-linktype2">
                        <button data-href="/product/wireplan" data-xt_eid="<%= eid.wireplan %>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-internet-40"></i>인터넷/전화/IPTV <span class="stxt">내게 맞는 결합상품을 확인하세요</span>
                        </button>
                    </li>
                    <%_ } _%>
                </ul>
            </div>
            <!--// .cont-box -->
        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../common/views/components/footer.component.html', { svcInfo: data.svcInfo, pageInfo: data.pageInfo }); %>
</div>
<%- include('../components/javascript.component.html') %>
<script>
    var data = '<%- JSON.stringify(data) %>';
    $(document).ready(function () {
      new Tw.MyTFareSubMain({
        $element: $('[data-id=submain-container]'),
        data: JSON.parse(data)
      });
    });
</script>
<%- include('../components/end.component.html') %>
