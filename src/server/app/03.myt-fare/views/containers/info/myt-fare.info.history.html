<%#
* FileName: myt-fare.info.history.html
* Author: Lee Kirim (kirim@sk.com)
* Date: 2018.09.17
%>

<% include ../../components/start.component.html %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#gnb">메뉴 바로가기</a></li>
            <li><a href="#contents">본문 바로가기</a></li>
            <li><a href="#footer">푸터 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->

    <div class="wrap">
        <%- include('../../../../../common/views/components/header.component.html', { title: '요금납부내역 조회'}) %>

        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <div class="container">
                <% if(data.refundPaymentCount) { %>
                <hr class="cont-sp type1" aria-hidden="true" />
                <!-- .cont-box -->
                <div class="cont-box">
                    <div class="user-month-bill mt0">
                        <div class="this-month-bill">
                            <p class="stit">환불 받을 총 금액</p>
                            <p class="price"><%=data.refundTotalAmount%>원</p>
                            <p class="term">휴대폰 요금 <span class="tx-bold"><%=data.overPaymentCount%>건</span>이 초과 납부되었습니다.</p>
                            <span class="btn-wrap">
                                <button type="button" class="btn-round2 btn-style3" id="fe-refund-add-account">환불 받기</button>
                            </span>
                        </div>
                    </div>
                </div>
                <!--// .cont-box -->
                <% } %>

                <div class="sort-area">
                    <span class="total-qnt">총 <span class="num"><%=data.listData.mergedListData.length%></span>건</span>
                    <button class="btn-select" id="fe-type-trigger"><%=currentString%></button>
                </div>

                <div id="fe-list-wrapper">

                </div>


                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <div class="all-menu-setting">
                        <ul class="link-long-list">
                            <% if(data.isAutoWithdrawalUse) { %>
                            <li><div class="link-long"><button id="fe-go-refund-quit">자동납부 통합인출 해지<span class="tx-sub"><span class="ico"></span></span></button></div></li>
                            <% } %>
                            <% if(data.refundPaymentCnt) { %>
                            <li><div class="link-long"><button id="fe-go-refund-list">환불 처리 내역<span class="tx-sub"><span class="ico"></span></span></button></div></li>
                            <% } %>
                        </ul>
                    </div>
                </div>
                <!--// .cont-box -->

                <hr class="cont-sp type1" aria-hidden="true"/>

                <!-- .cont-box -->
                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                    <ul class="pg-chk-list">
                        <% data.noticeInfo.forEach(function(info){ %>
                            <li data-list-id="<%=info.link%>"><%=info.title%><button class="btn-tip" title="정보보기" ><i class="icon-badge-tip"><span class=
                            "blind">TIP</span></i></button></li>
                        <% }); %>
                    </ul>
                </div>
                <!--// .cont-box -->


            </div>
        </div>

        <footer id="fe-all-menu">
            <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
            <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
    <% include ../../components/javascript.component.html %>
    <script>
      $(document).ready(function () {
        new Tw.MyTFareInfoHistory($(document), '<%- JSON.stringify(data) %>');
      });
    </script>
    <script id="fe-template-items" type="text/x-handlebars-template">
        {{#each items}}
            {{#if noLink}}
            <div class="inner">
            {{else}}
            <div class="inner" data-list-id="{{listId}}">
            {{/if}}
                <div class="txt-area">
                    <span class="tit">{{#if dataSubInfo2}}[{{dataSubInfo2}}]{{/if}} {{listTitle}}</span>
                    <span class="txt">{{dataSubInfo}}</span>
                    {{#if dataSubInfo3}}
                    <span class="bar"></span>
                    <span class="txt">
                        {{dataSubInfo3}}
                    </span>
                    {{/if}}
                    {{#if reserveCancelable}}
                    <span class="bar"></span>
                    <button class="bt-link-tx underline" data-list-id="{{listId}}">취소</button>
                    {{/if}}
                </div>
                <div class="rest-cont">
                    <span class="score">{{dataAmt}}{{#if isPoint}}점{{else}}원{{/if}}</span>
                    {{#if dataDt}}
                    <span class="time">{{#if dataFullDt}}{{dataFullDt}}{{else}}{{dataDt}}{{/if}}</span>
                    {{/if}}
                </div>
            </div>
            {{#if noLink}}{{else}}<button class="btn" data-list-id="{{listId}}">상세보기</button>{{/if}}
        {{/each}}
    </script>
    <script id="fe-template-day" type="text/x-handlebars-template">
        {{#each records}}
        {{#if yearHeader}}
        {{>year year=yearHeader}}
        {{/if}}
        <li>
            <!--<span class="tx-date">{{date}}</span>-->
            {{>chargeItems items=items}}
        </li>
        {{/each}}
    </script>
    <script id="fe-template-year" type="text/x-handlebars-template">
        <li class="year-tx" data-year="{{year}}">{{year}}</li>
    </script>
    <script id="list-template-wrapper" type="text/x-handlebars-template">
        <!-- .cont-box -->
        <div class="cont-box nogaps-hoz">
            <div class="inquire-link-list">
                <ul>
                    {{>list records=records}}
                </ul>
            </div>
        </div>
        <!--// .cont-box -->
        {{#if initialMoreData}}
        <div class="bt-more">
            <button>더 보기<!--<span>({{restCount}})</span>--></button>
        </div>
        {{/if}}
    </script>
    <script id="list-empty" type="text/x-handlebars-template">
        <div class="cont-box nogaps-hoz">
            <div class="result-none type2">
                요금 납부내역이 없습니다.
            </div>
        </div>
    </script>
</body>
<% include ../../components/end.component.html %>
