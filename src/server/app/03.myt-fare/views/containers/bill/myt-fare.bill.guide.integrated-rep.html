<%#
* FileName: myt-fare.bill.guide.integrated-rep.html
* Author: Kim Myoung-Hwan (skt.P130714@partner.sk.com)
* Date: 2018.09.12
%>

<% include ../../components/start.component.html %>
<% include ../../components/javascript.component.html %>
<script id="entryTplChild" type="text/x-handlebars-template">
    <div>
        {{!-- 주석 : 자녀사용요금 --}}
        {{# each resData as |rootItem rootIndex|}}
        <div>
            <p>단말기 이름 : {{rootItem.childEqpMdNm}}</p>
            <p>단말기 번호 : {{rootItem.svcNum}}</p>
            <p>단말기 요금 : {{rootItem.detailInfo.useAmtTot}}</p>
        </div><br>
        {{/each}}
    </div>

</script>
<script id="entryTplBill" type="text/x-handlebars-template">
    <table>
        <thead>
        <th>아이디</th>
        <th>라벨</th>
        <th>총합</th>
        </thead>
        <tbody>
        {{# each resData}}
        <tr>
            <td>{{id}}</td>
            <td>{{label}}</td>
            <td>{{totPrice}}</td>
        </tr>
        {{/each}}
        </tbody>
    </table>
    <br><br>

    {{!-- 주석 : svcMgmtNum --}}
    {{# each resData as |rootItem rootIndex|}}
    <div class="payment-summary-wrap">
        <h3 class="tit">
            이동전화
            <span class="pay-summary-num">{{rootItem.label}}</span>
        </h3>
        <div class="payment-summary">
                <span class="total">
                    <span class="blind"></span>
                    <strong class="num">{{rootItem.totPrice}}</strong>
                </span>
        </div>
    </div>

    <div class="widget">
        <div class="widget-box accordion2">
            <div class="acco-style payment-list">
                <ul class="acco-box">
                    {{!-- 주석 : billItmLclNm --}}
                    {{# each rootItem.children as |largeItem largeIndex|}}
                    <li class="acco-list">
                        <div class="acco-title">
                            <button class="" role="button" aria-pressed="true">
                                <span class="pt-tit">{{largeItem.label}}</span>
                                <span class="pt-price">
                                        <span class="num">{{largeItem.totPrice}}</span>
                                    </span>
                            </button>
                        </div>
                        <div class="acco-content">
                            <ul class="payment-detail-depth1">
                                {{!-- 주석 billItmSclNm --}}
                                {{# each largeItem.children as |midItem midIndex|}}
                                <li class="">
                                    <dl class="pdt-wrap">
                                        <dt class="pdt-tit">{{midItem.label}}</dt>
                                        <dd class="pdt-price discount">{{midItem.totPrice}}</dd>
                                    </dl>
                                    <ul class="payment-detail-depth2">
                                        {{!-- 주석 --}}
                                        {{# each midItem.children as |smaItem smaIndex|}}
                                        <li class="">
                                            <dl class="pdt-wrap">
                                                <dt class="pdt-tit">{{smaItem.billItmNm}}</dt>
                                                <dd class="pdt-price discount">{{smaItem.invAmt}}</dd>
                                            </dl>
                                        </li>
                                        {{/each}}
                                    </ul>
                                </li>
                                {{/each}}
                            </ul>
                        </div>
                    </li>
                    {{/each}}
                </ul>
            </div>
        </div>
    </div>

    {{/each}}

</script>

<div id="fe-wrap">
    <h1>요금안내서-통합청구(대표)</h1>
    <div>
        <button data-target="lineChangeBtn">회선 변경하기 버튼</button>
    </div>
    <div>
        청구요금 날짜 : <%-commDataInfo.selClaimDt %>
    </div>
    <div>사용요금 : <%-commDataInfo.useAmtTot %> 원</div>
    <div>검색조건 : <span><%-commDataInfo.intBillLineList[0].svcType %></span></div>
    <div>
        사용기간 : <%-commDataInfo.selStaDt %> ~ <%-commDataInfo.selEndDt %>
    </div>
    <div>
        <%-commDataInfo.selClaimDtM %>월 사용 요금은
        <%-commDataInfo.useAmtTot %>원이고
        <%-commDataInfo.discount %>원을 할인 받으셧습니다.
    </div>
    <br><br>
    <div>
        <h3>기간 리스트</h3>

        <% for(var i=0; i < commDataInfo.conditionChangeDtList.length; i++) { %>
        <p>
            <span data-value="<%- billpayInfo.invDtArr[i] %>"><%- commDataInfo.conditionChangeDtList[i] %></span>
        </p>
        <% } %>

    </div>
    <br><br>
    <div>
        <h3>회선 리스트</h3>
        <% for(var i=0; i < commDataInfo.intBillLineList.length; i++) { %>

        <% if( i == 0) { %>
        <p>
            <span><%- commDataInfo.intBillLineList[i].svcType %></span>&nbsp;
        </p>
        <% } else {%>
        <p>
            <span><%- commDataInfo.intBillLineList[i].svcType %></span>&nbsp;
            <span>(<%- commDataInfo.intBillLineList[i].label %>)</span>
        </p>
        <% } %>

        <% } %>

    </div>

    <br><br>
    <div>
        <h3>자녀회선 사용요금</h3>
        <div data-target="hbChildListArea">

        </div>
    </div>

    <br><br><br><br>
    <div>
        <h3>리스트 내용</h3>
        <div data-target="hbDetailListArea"></div>
    </div>

</div>
<style>
    .accordion2 .acco-style .acco-list .acco-content {
        display: block;
    }
</style>

<script>
  $(document).ready(function () {
    var oMyTFareGuide = new Tw.MyTFareBillGuideIntegratedRep( $('#fe-wrap'), {
      reqQuery: <%-JSON.stringify(reqQuery) %>,
      svcInfo: <%-JSON.stringify(svcInfo) %>,
      billpayInfo : <%-JSON.stringify(billpayInfo) %>,
      commDataInfo : <%-JSON.stringify(commDataInfo) %>,
      intBillLineInfo : <%-JSON.stringify(intBillLineInfo) %>,
      childLineInfo : <%-JSON.stringify(childLineInfo) %>
  } );
  });
</script>
<% include ../../components/end.component.html %>
