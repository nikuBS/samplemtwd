<%#
* FileName: myt-fare.bill.set.html
* Author: 양정규 (skt.P130715@partner.sk.com)
* Date: 2018.09.12
%>

<% include ../../components/start.component.html %>
<% include ../../components/bill/myt-fare.bill.set.integrated.component.html %>
<body>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#gnb">메뉴 바로가기</a></li>
        <li><a href="#contents">본문 바로가기</a></li>
        <li><a href="#footer">푸터 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->
<div class="wrap" data-menuId="<%= pageInfo.menuId %>">
    <!-- #header -->
    <%- include('../../../../../common/views/components/header.component.html', { title: '요금안내서 설정',svcInfo:svcInfo}); %>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <h2 class="blind">내용</h2>
        <div class="container">
            <div class="ti-caption-gray bdt datail-veiw">
                <span class="tit"><%=svcInfo.prodNm%></span>
                <a class="detail-view" href="/product/callplan/<%=svcInfo.prodId%>"><span class="blind">자세히</span></a>
            </div>
            <!-- .cont-box -->
            <div class="cont-box now-fee-box">
                <p class="tit">
                    현재 요금안내서<br/>
                    <strong><%= data.billInfo[0].nm %></strong>
                </p>

                <% if(data.billInfo.length > 1) {%>
                <dl class="info-tx0">
                    <dt>함께 받는 요금안내서</dt>
                    <% for (let i=1; i < data.billInfo.length; i++) { %>
                        <dd>
                            <strong>
                                <%= i > 1 ? ',':'';%>
                                <%= data.billInfo[i].nm  %>
                            </strong>
                        </dd>
                    <%}%>
                </dl>
                <%}%>

                <div class="cont-box nogaps pt22">
                    <%if (['1', 'ADD'].indexOf(data.billInfo[0].cd) !== -1) {%>
                        <dl class="info-tx1">
                            <dt>우편 주소</dt>
                            <dd><%= data.fullAddr%></dd>
                        </dl>
                        <div class="info-line">
                            <dl class="info-tx1">
                                <dt>우편물 발송주기</dt>
                                <dd>
                                    <%
                                        let jugi = {
                                            '1' : '매월',
                                            '2' : '격월',
                                            '3' : '분기',
                                            '4' : '반기'
                                        };
                                    %>
                                    <%=jugi[data.billSndCyclCd]%>
                                </dd>
                            </dl>
                            <!--<dl class="info-tx1">
                                <dt>휴대폰번호</dt>
                                <dd><%=data.cntcNum1%></dd>
                            </dl>-->
                        </div>
                    <%}%>

                    <!--안내서가 "이메일"을 포함하는 경우만 보임-->
                    <%if(data.billInfo.some( (o) => o.cd === '2')){%>
                        <dl class="info-tx1">
                            <dt>이메일 주소</dt>
                            <dd><%=data.invEmailAddr%></dd>
                        </dl>
                        <!--"전자추가발송" 이 아닌 경우만 보임-->
                        <%if('ADD' !== data.billInfo[0].cd){%>
                        <dl class="info-tx1">
                            <dt>이메일 보안설정</dt>
                            <dd><%=data.scurMailYn === 'Y' ? '예':'아니오'%></dd>
                        </dl>
                        <dl class="info-tx1">
                            <dt>혜택 정보 받기</dt>
                            <dd><%=data.emailRcvAgreeYn === 'Y' ? '예':'아니오'%></dd>
                        </dl>
                        <%}%>
                    <%}%>

                    <!--우편, 유선 ( 문자 )일 때, 핸드폰 번호 보임 -->
                    <%if(data.hpNum) {%>
                        <dl class="info-tx1">
                            <dt>휴대폰번호</dt>
                            <dd><%=data.hpNum%></dd>
                        </dl>
                    <%}%>

                    <%
                        if ( data.options.length > 0 ) {
                        let options = {
                            '1':'Bill Letter 보안강화',
                            '2':'휴대폰번호 전체 표시',
                            '3':'콘텐츠 이용 상세내역 표시',
                            '4':'법정대리인 함께 수령',
                            '5':'문자 수신'
                        };
                    %>
                    <dl class="info-tx1">
                        <dt>설정한 옵션</dt>
                        <dd>
                            <% for(let i=0; i< data.options.length; i++) { %>
                                <%= options[data.options[i]]%>
                                <%if( (i+1) < data.options.length ){%><br/><%}%>
                            <%}%>
                        </dd>
                    </dl>
                    <%}%>
                </div>

                <!--"정보변경" 없는 유형 : T world 확인(SMS 수신불가 단말), 전자추가발송-->
                <%
                    if( (!('P' === data.curBillType && 'N' === data.isusimchk ) && 'ADD' !== data.billInfo[0].cd) ) {
                    let params = 'isChangeInfo=Y&billType='+ data.billInfo[0].cd + (data.billInfo.length > 1 ? '&subBillType=' + data.billInfo[1].cd : '');
                %>
                <div class="bt-alone">
                    <a class="bt-bg-blue1" href="/myt-fare/billsetup/change?<%=params%>">정보변경</a>
                </div>
                <%}%>
                <ul class="bt-slice item-two pt40">
                    <li class="bt-blue1">
                        <a href="/myt-fare/billsetup/historyreturn">반송내역</a>
                    </li>
                    <!--T world 확인은 재발행 기능 없음-->
                    <% if ( 'P' !== data.curBillType ) { %>
                    <li class="bt-blue1">
                        <!--<button>재발행</button>-->
                        <a href="/myt-fare/billsetup/reissue">재발행</a>
                    </li>
                    <%}%>
                </ul>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true"/>

            <!-- .cont-box -->
            <%if(data.integrateList && data.integrateList.length > 0){%>
            <div class="cont-box nogaps-hoz">
                <div class="list-comp-input type01">
                    <h3 class="tit">통합청구 등록회선</h3>
                    <div class="widget">
                        <div class="widget-box radio">
                            <ul id="fe-integrate-list" class="select-list" role="group">
                                <!--통합청구 등록회선 리스트 영역-->
                            </ul>
                            <div class="btn-more none">
                                <button>더 보기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr class="cont-sp type1" aria-hidden="true"/>
            <%}%>
            <!--// .cont-box -->

            <!-- .cont-box -->
            <div class="cont-box pb0">
                <p class="con-tit0 pb6">다른 요금안내서로 받기</p>
                <p class="con-txt0 pb12">T world 계정 또는 Bill Letter로 받아보시면 종이 안내서보다 <br/>빠르고 안전하게 보관하실 수 있습니다.</p>
                <ul class="link-long-list nopd">
                    <%
                        let icoName = {
                            'P': 'ico-ch-tw',
                            'H': 'ico-ch-letter',
                            'B': 'ico-ch-msg',
                            '2': 'ico-ch-email',
                            '1': 'ico-ch-post'
                        };
                        data.billList.forEach( (bill) => {
                    %>
                    <li>
                        <div class="link-long lower-h">
                            <a href="/myt-fare/billsetup/change?billType=<%=bill.cd%>&subBillType=<%=bill.cd !== 'P' ? 'X':'NO'%>">
                                <span class="<%=icoName[bill.cd]%>"></span><%= bill.nm %>
                                <span class="tx-sub">
                                    <span class="ico"></span>
                                </span>
                            </a>
                        </div>
                    </li>
                    <%})%>
                </ul>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" />
            <!-- .cont-box -->
            <p class="fee-banner0">
                <%
                    let billLetterInfo = {
                        title : '이번달 Bill Letter가 도착했습니다~',
                        msg : '월별 청구 금액과 상세 내역 등을 언제든지 편리하게 확인하세요.',
                        img : 'ic-img'
                    };
                    if ( 'H' !== data.billInfo[0].cd ) {
                        billLetterInfo.title = 'Bill Letter를 알고 계세요? ';
                        billLetterInfo.msg = '쌓여가는 요금안내서,<br/> Bill Letter 앱으로 한 번에 관리하세요.';
                        billLetterInfo.img = 'ic-img2';
                    }
                %>
                <a id="fe-app-down">
                    <span class="tit"><%= billLetterInfo.title%></span>
                    <span class="tx0"><%- billLetterInfo.msg%></span>
                    <span class="<%=billLetterInfo.img%>"></span>
                </a>
            </p>

            <!--// .cont-box -->
        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo  }); %>
</div>
</body>

<% include ../../components/javascript.component.html %>

<script>
  $(document).ready(function () {
    new Tw.MyTFareBillSet($('.wrap'), JSON.parse('<%-JSON.stringify(data.integrateList)%>'));
  });
</script>
<% include ../../components/end.component.html %>
