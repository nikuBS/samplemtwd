<%#
* @file myt-fare.bill.pay-complete.html
* @author Jayoon Kong (jayoon.kong@sk.com)
* @since 2018.11.27
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
    <div class="wrap">
        <!-- .popup hbs -->
        <div class="popup-page tw-popup fixed-bottom"><!-- 하단에 fixed 버튼으로 여백이 필요할때 .fixed-bottom 기본60여백 / 높이 30단위 class 지원 .h30, .h60, .h90 ... -->
            <!-- .container-wrap -->
            <div id="contents" class="container-wrap">
                <h2 class="blind">내용</h2>
                <div class="container">
                    <div class="complete-wrap">
                        <div class="title-box">
                            <i class="icon-complete-120"><span class="blind">complete</span></i>
                            <p class="tx-tit">
                                <%_ if (subTitle !== '') { _%><%= subTitle _%><br /><%_ } _%>
                                <span class="tx-highlight pt10"><%= mainTitle %></span>
                            </p>
                        </div>
                        <div class="tx-contents">
                            <%_ if (amount) { _%>
                            <div class="basic-list">
                                <ul>
                                    <li>
                                        <%
                                            const isPoint = type === 'point';
                                            const amountName = isPoint ? '납부 포인트' : '납부금액';
                                            const currency = isPoint ? 'P' : '원';
                                        %>
                                        <span class="title"><%-amountName%></span>
                                        <span class="tx-cont"><em><%-amountFmt%></em><%-currency%></span>
                                    </li>
                                    <%# 포인트, SKPay 는 비노출%>
                                    <%_ if ( !(['point', 'skpay'].indexOf(type) > -1) ) { _%>
                                    <%_
                                        const isCard = type === 'card';
                                        const ownerName = isCard ? '카드주명' : '예금주명';
                                        const accountName = isCard ? '카드정보' : '계좌정보';
                                    _%>
                                    <li>
                                        <span class="title"><%-ownerName%></span>
                                        <span class="tx-cont fe-mbr-nm"><%-svcInfo.mbrNm%></span></span>
                                    </li>
                                    <li>
                                        <span class="title"><%-accountName%></span>
                                        <span class="tx-cont fe-account-info"><%-`${bankOrCardName} ${cardNum}`%></span></span>
                                    </li>
                                    <%_ } _%>
                                </ul>
                            </div>
                            <%_ } _%>
                            <%_ if (description !== '') { _%>
                            <p class="code-txt"><%- description %></p>
                            <%_ } if (centerName !== '') { _%>
                            <ul class="bt-slice item-one">
                                <li><a href="<%= centerUrl %>" type="button" class="btn-round2 btn-style3"><%= centerName %></a></li>
                            </ul>
                            <%_ } _%>
                            <%_ if (useTypeText) { _%>
                            <p class="basic-txt mt32">고객님은 <strong><%-useTypeText%>를 이용 중</strong>입니다.</p>
                            <p class="basic-txt mt10">지금 결제하신 계좌와 금융거래 인증 정보로<br> 자동납부를 <strong>변경</strong>하시겠습니까?</p>
                            <%_ } _%>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bt-fixed-area">
                <%# 요금납부를 계좌이체로 한 경우 '바로 변경하기' 버튼 노출하되, 자동납부 방법이 카드,입금전용계좌,지로 인 경우만 노출.(단! 자동납부가 제휴카드인 경우는 제외)%>
                <%_
                    const addClass = !!useTypeText ? 'item-two' : '';
                    const confirmName = addClass ? '취소' : '확인';
                _%>
                <ul class="bt-slice full <%-addClass%>">
                    <li><a href="<%= confirmUrl %>" type="button" class="btn-floating btn-style2"><%-confirmName%></a></li>
                    <%_ if (addClass) { _%>
                    <li><a type="button" class="btn-floating btn-style1 fe-edit">바로 변경하기</a></li>
                    <%_ } _%>
                </ul>
            </div>
        </div>
        <!--// .popup hbs -->
    </div>
</body>
<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    var paymentOption = '<%-JSON.stringify(paymentOption)%>';
    paymentOption = JSON.parse(paymentOption);
    if (!Tw.FormatHelper.isEmpty(paymentOption)) {
      new Tw.MyTFareBillPayComplete($('.wrap'), paymentOption);
    }
  });
</script>
<% include ../../components/end.component.html %>
