<%#
* @file myt-fare.bill.common.component.html
* @author Jayoon Kong (jayoon.kong@sk.com)
* @editor 양정규
* @since 2018.09.19
%>
<% if (unpaidList) { %>
<div class="user-month-bill mt0 fe-unpaid-list">

    <div class="this-month-bill">
        <p class="stit fe-svc-name"><%= unpaidList[0].svcName %></p>
        <p class="term fe-svc-num"><%= unpaidList[0].svcNumber %>
            <% if (unpaidList.cnt > 1) { %>
            <span class="fe-multi-line"> 외 <span class="fe-line-cnt"><%= unpaidList.cnt - 1 %></span>개 회선</span>
            <% } %>
        </p>
        <p class="price mt10">
            <span class="fe-amount" data-value="<%= unpaidList.sumUnpaid %>"><%= formatHelper.addComma(unpaidList.sumUnpaid.toString()) %></span>원
        </p>
        <% if (unpaidList.cnt > 1) { %>
        <span class="btn-wrap fe-select-line"><button type="button" class="btn-round2 btn-style3">납부요금 선택</button></span>
        <% } %>
    </div>

    <%
        for (var i = 0; i < unpaidList.length; i++) {
        let _isChecked = unpaidList[i].checked;
        let _isDisabled = false;
        let _disabled = ''; // 입금전용계좌 문자신청 페이지에서만 사용
        // OP002-2797: '입금전용계좌 문자신청' 페이지 일때만 사용한다.
        // (계좌이체 납부, 체크/신용카드 납부등의 페이지에서 현재 페이지를 같이 사용하는데, 다른 페이지에서는 영향이 없어야 한다.)
        if ('M000238' === pageInfo.menuId) {
            // 당월요금만 존재 하거나 당월+미납 인 경우 "checked" 상태이며, checked 된것은 disabled 처리한다.
            _isDisabled = _isChecked = unpaidList.isOnlyThisMon || _isChecked;
            _disabled = _isDisabled ? 'disabled' : '';
        }
        let _checked = _isChecked ? 'checked':'';
    %>
    <li id="<%= i %>" class="none fe-line checkbox type01-big <%=_checked%> <%=_disabled%>"
        data-svc-mgmt-num="<%= unpaidList[i].svcMgmtNum %>"
        data-bill-acnt-num="<%= unpaidList[i].billAcntNum %>"
        role="checkbox"
        aria-checked="<%=_isChecked%>" aria-disabled="<%=_isDisabled%>"><!-- 체크 상태가 아닐 경우 .checked 클래스 삭제, aria-checked="false" -->
        <input type="checkbox" name="checkbox" value="" title="함께 납부 가능한 회선" aria-labelledby="aria-comp-checkbox2" <%=_checked%> <%=_disabled%>/>
        <!-- 체크상태일 경우 checked="false" -->
        <div class="comp-list-layout" id="aria-comp-checkbox2" aria-hidden="true">
            <p class="layout-text">
                <span class="mtext fe-svc-info"><%= unpaidList[i].svcName %> <%= unpaidList[i].svcNumber %></span>
                <span class="fe-svcNumber" style="display:none;"><%= unpaidList[i].svcNumber %></span>
                <span class="stext fe-money" data-value="<%= unpaidList[i].intMoney %>">
                    <span><%= unpaidList[i].invMoney %></span> 원
                    <%if(unpaidList[i].isUnpaid){%>
                    <span class="tod-text1">(미납요금)</span>
                    <%}%>
                </span>
                <span class="dtext fe-inv-dt" data-value="<%= unpaidList[i].invDt %>"><%= unpaidList[i].invYearMonth %></span>
            </p>
        </div>
    </li>
    <% } %>
</div>
<% } %>
