<%#
* @file myt-join.product.additions.html
* @author Jiyoung Jo
* @since 2018.10.11
* ID: MS_06
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>

<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <!-- Grand open 접근성 수정 -->
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
            <!--  //Grand open 접근성 수정 -->
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap" data-menuId="<%= pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../common/views/components/header.component.html', { title: '나의 부가서비스', svcInfo: svcInfo, pageInfo: locals.pageInfo }); %>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container">
                <div class="add-prd-top-wrap">
                    <span class="select" role="tablist">
                        <button role="tab" class="on" id="fe-all-btn" aria-selected="true">전체</button>
                        <button role="tab" id="fe-pay-btn" aria-selected="false">유료만 보기</button>
                    </span>
                    <span class="counts">총 <em><%= additions.length %></em>개</span>
                </div>

                <div class="cont-box nogaps">
                    <div class="add-prd-wrap ex-service">
                        <div class="contents-empty fe-empty <%= additions.length > 0 ? 'none' : '' %>" aria-hidden="<%= additions.length > 0 %>">
                            <span class="ico type1"><span class="blind">느낌표(!)</span></span>
                            <p class="desc">현재 사용 중인 부가서비스가 없습니다.</p>
                        </div>
                        <% if (additions.length > 0) { %>
                        <ul class="list-comp-lineinfo">
                            <% additions.map(addition => { 
                                const hasButtons = addition.btnList && addition.btnList.length > 0, hasLink = addition.prodLinkYn === "Y"; %>
                            <li class="<%= hasButtons?'add-con':''%>" data-isFree="<%= !addition.isNotFree %>">
                                <!-- 리스트 하단에 추가 컨텐츠 있을 경우 li에 class="add-con" 추가 -->
                                <% if (hasLink) { %>
                                <a href="/product/callplan?prod_id=<%= addition.linkProdId || addition.prodId %>" class="link">
                                <% } else { %>
                                <div class="not-link">
                                <% } %>
                                    <div class="lineinfo-user">
                                        <span class="info-title"><%= addition.prodNm %></span>
                                        <span class="info-sub2">가입일 <%= addition.scrbDt %></span>
                                    </div>
                                    <div class="lineinfo-data">
                                        <% if (/^[0-9,]+$/.test(addition.basFeeTxt)) { %>
                                        <span class="info-title num"><%= addition.basFeeTxt %><span class="unit ml4">원</span></span>
                                        <% } else { %>
                                            <span class="info-title num"><%= addition.basFeeTxt || '무료' %></span>
                                        <% } %>
                                        <% if (hasLink) { %><span class="ico"><span class="blind">자세히 보기</span></span><% } %>
                                    </div>
                                <% if (hasLink) { %>
                                </a>
                                <% } else { %>
                                </div>
                                <% } %>
                                    
                                <% if (hasButtons) { %>
                                    <span class="bt-wrap">
                                        <% addition.btnList.map(btn => { %>
                                            <button class="bt-tx-blue fe-btn-link" data-url="<%= btn.btnLinkUrl %>" data-prod-id="<%= addition.linkProdId || addition.prodId %>"><%= btn.btnNm %></button>
                                        <% }); %>
                                    </span>
                                <% } %>
                                <% if (addition.childItems) { %>
                                    <div class="detail">
                                    <% for (var idx = 0; idx < addition.childItems.length; idx++) { %>
                                    <dl class="show-data">
                                        <% var additionChild = addition.childItems[idx]; %>
                                        <dt><%= additionChild.prodNm %></dt>
                                        <dd>
                                            <% if (/^[0-9,]+$/.test(additionChild.basFeeTxt)) { %>
                                            <span class="number tx-bold"><%= additionChild.basFeeTxt %>원</span>
                                            <% } else { %>
                                            <span class="number tx-bold"><%= additionChild.basFeeTxt || '무료' %></span>
                                            <% } %>
                                        </dd>
                                    </dl>
                                    <% } %>
                                    </div>
                                <% } %>
                            </li>
                            <% }); %>
                        </ul>
                        <% } %>
                    </div>
                </div>

                <% if (roaming && (roaming.recentlyJoinsProdNm || roaming.addRoamingProdCnt > 0)) { %>
                <hr class="cont-sp type1" aria-hidden="true" />
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <div class="add-prd-wrap">
                        <ul class="list-comp-lineinfo">
                            <li>
                                <a href="/product/roaming/my-use<%= roaming.recentlyJoinsProdNm ? '' : '#add' %>" class="link">
                                    <div class="lineinfo-user">
                                        <span class="info-title">나의 로밍 요금제 및<br>부가서비스</span>
                                    </div>
                                    <div class="lineinfo-data">
                                        <span class="info-title">
                                        <% if (roaming.recentlyJoinsProdNm) { %>
                                            <%= roaming.recentlyJoinsProdNm %>
                                            <% if (roaming.addRoamingProdCnt > 0) { %>
                                                <span class="etc-num">외 <%= roaming.addRoamingProdCnt %>건</span>
                                            <% } %>
                                        <% } else { %>
                                            <%= roaming.addRoamingProdCnt %>건
                                        <% } %>
                                        <span class="ico"><span class="blind">자세히 보기</span></span></span>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!--// .cont-box -->
                <% } %>
                <hr class="cont-sp type1" aria-hidden="true">
                <div class="cont-box nogaps-btm">
                    <h3 class="suggest-tag-title">다른 부가서비스를 찾고 계신가요?</h3>
                    <div class="extra-servicebox">
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01231">데이터</a>
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01232">혜택 / 편의</a>
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01233">안심/보험</a>
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01234">통화 / 메세지</a>
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01235">콘텐츠 이용</a>
                        <a type="button" class="btn-round2 btn-style3" href="/product/mobileplan-add/list?filters=F01236">인증 / 결제</a>
                    </div>
                </div>
                
                <!-- 꼭 확인해 주세요 2018.11.02 추가 -->
                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                    <ul class="pg-chk-list02">
                        <li><button id="MS_06_01_tip_0<%= svcInfo.svcAttrCd === 'M3' ? 3 : 1 %>" type="button" class="btn-tip" aria-haspopup="true">부가서비스 이용안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    </ul>
                </div>
                <!-- //꼭 확인해 주세요 -->
            </div>
        </div>
        <!--// #contents -->
    </div>
    <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
</body>
<% include ../../components/javascript.component.html %>
<script>
    $(document).ready(function () {
        new Tw.MyTJoinMyPlanAdd($('.wrap'));
    });
</script>
<% include ../../components/end.component.html %>
