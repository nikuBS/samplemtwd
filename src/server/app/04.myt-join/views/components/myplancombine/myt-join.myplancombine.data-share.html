<%#
* FileName: myt-join.myplancombine.data-share.html
* @author Jiyoung Jo
* Date: 2018.10.26
* id: MS_07_01_03
%>

<!-- .cont-box -->
<% const groupInfo = combination.combinationGroup;
const isGoodFamily = prodId === 'TW20000009' || prodId === 'NA00004211' %> 
<div class="cont-box flp-other-pd-st">
    <div class="bundle-tit-wrap">
        <h3 class="tit"><%= isGoodFamily ? 'T가족결합(착한가족)' : '가족나눔데이터' %></h3>
    </div>
    <div class="basic-list bg-type mt10">
        <ul>
            <li>
                <span class="title">신청일</span>
                <span class="tx-cont"><%= groupInfo.combStaDt %></span>
            </li>
            <% if (!isGoodFamily) { %>
            <li>
                <span class="title">가입상태</span>
                <span class="tx-cont">결합완료</span>
            </li>
            <% } %>
            <li>
                <span class="title">결합회선</span>
                <span class="tx-cont"><%= groupInfo.mblSvcCnt %>회선</span>
            </li>
        </ul>
    </div>
    <% if (isGoodFamily) { %>
    <div class="expect-benefit">
        <h4 class="tit">예상 혜택</h4>
        <p class="txt">결합가족끼리<br /><span class="str">매달 데이터 선물</span><br /></p>
        <p class="sub">(횟수제한 없음)</p>
        <p class="ext-txt">2~3회선 결합하면 500MB, 4~5회선 결합하면 1,000MB 가능<br />1회에 100MB~1GB까지 선물 가능(100MB 단위)</p>
        <i class="ico-expect"></i>
    </div>
    <% } %>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true" />

<!-- .cont-box -->
<div class="cont-box">
    <div class="bundle-tit-wrap">
        <h4 class="tit">나눠쓰기 남은 데이터</h4>
        <p class="data-num"><span class="str"><%= groupInfo.grpRemainPt %></span>MB</p>
    </div>
    <div class="basic-list bg-type mt10">
        <ul>
            <li>
                <span class="title">받은 데이터</span>
                <span class="tx-cont"><%= groupInfo.grpOfrPt %> MB</span>
            </li>
        </ul>
    </div>
    <% if (combination.grpRelYn === 'Y') { %>
        <% if (Number(groupInfo.grpRemainPt) > 0) { %>
            <ul class="bt-slice mt20">
                <li class="bt-blue1">
                    <a href="/myt-join/combinations/share?id=<%= prodId %>">데이터 나눠쓰기</a>
                </li>
            </ul>
            <div class="msg-nodata-left none" aria-hidden="true">
                <i class="ico-nodata-left"></i>
                <p>남은 데이터가 없습니다.<br />다음 달에 이용해 주세요.</p>
            </div>
        <% } else { %>
            <div class="msg-nodata-left">
                <i class="ico-nodata-left"></i>
                <p>남은 데이터가 없습니다.<br />다음 달에 이용해 주세요.</p>
            </div>
        <% } %>
    <% } else { %>
    <div class="msg-nodata-left">
        <i class="ico-nodata-left"></i>
        <p>데이터가 필요하시면<br />가족대표에게 요청해 보세요</p>
    </div>
    <% } %> 
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true" />

<!-- .cont-box -->
<div class="cont-box nogaps-hoz">
    <!-- .widget -->
    <div class="widget">
        <div class="widget-box accordion2">
            <div class="acco-style data-famliy-group-list type2">
                <ul class="acco-box">
                    <%  combination.combinationWirelessMemberList.map(member => { 
                        const isMine = svcInfo.svcMgmtNum === member.svcMgmtNum; 
                        const isRep = member.relClCd === '00'; %>
                        <li class="acco-list"><!-- on , off -->
                            <div class="acco-title">
                                <button role="button" aria-pressed="false">
                                    <div class="list-wrap">
                                        <div class="list-info">
                                            <div>
                                                <% if (isMine) { %>
                                                    <strong class="me"><%= member.custNm %></strong>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                    <i class="icon-me ml5"><span class="blind">나</span></i><!-- 뱃지-나 -->
                                                <% } else { %>
                                                    <em class="me"><%= member.custNm %></em>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                <% } %>
                                            </div>
                                            <div class="num"><%= member.svcNum %></div>
                                        </div>
                                        <div class="list-arrow">
                                            <span class="ico-arrow"><span class="blind"><%= member.custNm %> 데이터 나눠쓰기 내역 자세히 보기</span></span>
                                        </div>
                                    </div>
                                </button>
                            </div>
                            <div class="acco-content">
                                <div class="data-info-list toggle-inner-list">
                                    <ul>
                                        <li>
                                            <dl>
                                                <dt>가족대표와의 관계</dt>
                                                <dd>
                                                    <% if (isRep && isMine) { %>
                                                        본인(내번호)<br />
                                                    <% } else { %>
                                                        <%= member.relClNm %><%= isMine? '(내번호)': ''%><br />
                                                    <% } %>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>총 받은 데이터</dt>
                                                <dd><%= member.membOfrPt %> MB</dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    <% }); %>                    
                </ul>
            </div>
        </div>
    </div>
    <!-- //.widget -->
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true" />
<!-- .cont-box --><!-- 2018-11-02 수정 -->
<div class="cont-box nogaps-btm">
    <h3 class="tx-bold">꼭 확인해 주세요</h3>
    <ul class="noti-list02">
        <% if (isGoodFamily) { %>
        <li><button id="MS_07_01_03_tip_01" type="button" class="tip-view-btn" title="중복가입 가능 혜택 TIP보기" aria-haspopup="true">중복가입 가능 혜택<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_03_tip_02" type="button" class="tip-view-btn" title="중복 제공 불가 혜택 TIP보기" aria-haspopup="true">중복 제공 불가 혜택<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_03_tip_03" type="button" class="tip-view-btn" title="T가족결합(착한가족) 안내 TIP보기" aria-haspopup="true">T가족결합(착한가족) 안내<span class="tip-view">TIP</span></button></li>
        <% } else { %>
        <li><button id="MS_07_01_08_tip_01" type="button" class="tip-view-btn" title="장기가입할인 및 레인보우포인트 적립 TIP보기" aria-haspopup="true">장기가입할인 및 레인보우포인트 적립<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_08_tip_02" type="button" class="tip-view-btn" title="중복가입 TIP보기" aria-haspopup="true">중복가입<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_08_tip_03" type="button" class="tip-view-btn" title="사용 가능한 요금제 TIP보기" aria-haspopup="true">사용 가능한 요금제<span class="tip-view">TIP</span></button></li>
        <% } %>
    </ul>
</div>
<!--// .cont-box -->
