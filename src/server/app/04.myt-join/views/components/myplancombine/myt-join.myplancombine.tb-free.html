<%#
* FileName: myt-join.myplancombine.tb-free.html
* @author Jiyoung Jo
* Date: 2018.10.26
* id: MS_07_01_04
%>


<!-- .cont-box -->
<% const groupInfo = combination.combinationGroup; %>
<div class="cont-box flp-other-pd-st">
    <div class="bundle-tit-wrap">
        <h3 class="tit">TB끼리 온가족프리</h3>
    </div>
    <div class="basic-list bg-type mt10">
        <ul>
            <li>
                <span class="title">신청일</span>
                <span class="tx-cont"><%= groupInfo.combStaDt %></span>
            </li>
            <li>
                <span class="title">결합회선</span>
                <span class="tx-cont"><%= groupInfo.mblSvcCnt + groupInfo.wirSvcCnt %>회선</span>
            </li>
            <li>
                <span class="title">가입상태</span>
                <span class="tx-cont">결합완료</span>
            </li>
        </ul>
    </div>
    <!--TODO: BFF 완료 시 추가 <button class="bt-link-tx underline small mt4">신청내역 조회</button> -->
    <div class="expect-benefit-slide">
        <h4 class="tit">예상 혜택</h4>
        <div class="widget horizon-fullbox"> 
            <div class="widget-box horizontal">
                <div class="horizontal-slide">
                    <ul class="horizontal-list" style="width: 471px;">
                        <% const benefit = combination.combinationWirelessMemberList.length;
                        if (benefit > 0) { %>
                            <li>
                                <button class="bg1">
                                    <!-- 파란색 -->
                                    <div class="inner">
                                        <span class="stit">휴대폰 월정액</span>
                                        <span class="stxt"><span class="str">3,300원</span> 할인</span>
                                    </div>
                                </button>
                            </li>
                            <li>
                                <button class="bg2">
                                    <!-- 녹색 -->
                                    <div class="inner">
                                        <span class="stit">무료 제공</span>
                                        <span class="stxt"><span class="str">LTE안심옵션</span> 또는 데이터<span class="str">500MB</span></span>
                                    </div>
                                </button>
                            </li>
                            <li>
                                <button class="bg3">
                                    <!-- 분홍 -->
                                    <div class="inner">
                                        <span class="stit">초고속 인터넷 요금</span>
                                        <span class="stxt"><span class="str"><%= `${benefit + 2},${benefit + 2}` %>00원</span> 할인</span>
                                    </div>
                                </button>
                            </li>
                        <% } 
                        if (benefit > 1) { %>
                            <li>
                                <button class="bg4">
                                    <!-- 보라 -->
                                    <div class="inner">
                                        <span class="stit">가족간</span>
                                        <span class="stxt"><span class="str">음성/문자 무료</span></span>
                                    </div>
                                </button>
                            </li>
                        <% } 
                        if (benefit > 2) { %>
                        <li>
                            <button class="bg5">
                                <!-- 빨강 -->
                                <div class="inner">
                                    <span class="stit">친구랑 (망내 지정 1회선)</span>
                                    <span class="stxt"><span class="str">음성/문자 무료</span></span>
                                </div>
                            </button>
                        </li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </div>
        <p class="ext-txt">결합회선 중 정지된 회선이 있을 경우(30일 이상)<br />제외되어 혜택이 다를 수 있습니다. </p>
    </div>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true" />

<!-- .cont-box -->
<div class="cont-box nogaps-hoz">
    <!-- .widget -->
    <div class="widget">
        <div class="widget-box accordion2">
            <div class="acco-style data-famliy-group-list type2">
                <ul class="acco-box">
                    <%  combination.combinationWirelessMemberList.map((member, index) => { 
                        const isMine = svcInfo.svcMgmtNum === member.svcMgmtNum; 
                        const isRep = member.relClCd === '00'; %>
                        <li class="acco-list">
                            <!-- on , off -->
                            <div class="acco-title">
                                <button role="button" aria-pressed="false">
                                    <div class="list-wrap">
                                        <div class="list-info">
                                            <div>
                                                <% if (isMine) { %>
                                                    <strong class="me"><%= member.custNm %></strong>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                    <i class="icon-me ml5"><span class="blind">나</span></i><!-- 뱃지-나 -->
                                                <% } else { %>
                                                    <em class="me"><%= member.custNm %></em>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                <% } %>
                                            </div>
                                            <div class="num"><%= member.svcNum %></div>
                                        </div>
                                        <div class="list-arrow">
                                            <span class="ico-arrow"><span class="blind">결합가족 <%= member.custNm %> 내용 자세히 보기</span></span>
                                        </div>
                                    </div>
                                </button>
                            </div>
                            <div class="acco-content">
                                <div class="data-info-list toggle-inner-list">
                                    <ul>
                                        <li>
                                            <dl>
                                                <dt>관계</dt>
                                                <dd>
                                                    <% if (isRep && isMine) { %>
                                                        본인(내번호)
                                                    <% } else { %>
                                                        <%= member.relClNm %><%= isMine? '(내번호)': ''%><br />
                                                    <% } %>
                                                    <% if (combination.grpRelYn === 'Y' || groupInfo.mblSvcCnt < 2) { %><a class="bt-link-tx underline red" href="/product/callplan?prod_id=<%= prodId %>">해지</a><% } %>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>혜택1</dt>
                                                <dd>
                                                    <%= member.dataBenf === '2053-DAT1G'? '데이터500M 무료' : 'LTE안심옵션 무료' %><br />
                                                    <% if (isMine) { %><button class="bt-link-tx underline fe-benefit" data-index="1" data-benefit="<%= member.dataBenf %>">변경</button><% } %>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>혜택2</dt>
                                                <dd><%= member.asgnNum || '-' %><br />
                                                    <% if (isMine && benefit > 2) { %><button class="bt-link-tx underline fe-benefit" data-index="2" data-benefit="<%= member.asgnNum %>">변경</button><% } %>
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    <% }); %>

                    <%  combination.combinationWireMemberList.map((member, index) => { 
                        const isMine = svcInfo.svcMgmtNum === member.mblSvcMgmtNum; %>
                        <li class="acco-list">
                            <!-- on , off -->
                            <div class="acco-title">
                                <button role="button" aria-pressed="false">
                                    <div class="list-wrap">
                                        <div class="list-info">
                                            <div>
                                                <% if (isMine) { %>
                                                    <strong class="me"><%= member.custNm %></strong>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                    <i class="icon-me ml5"><span class="blind">나</span></i><!-- 뱃지-나 -->
                                                <% } else { %>
                                                    <em class="me"><%= member.custNm %></em>
                                                    <i class="icon-<%= member.badge %> ml9"><span class="blind"><%= member.relClNm %></span></i>
                                                <% } %>
                                            </div>
                                            <div class="num"><%= member.svcCdNm %></div>
                                        </div>
                                        <div class="list-arrow">
                                            <span class="ico-arrow"><span class="blind">결합가족 <%= member.custNm %> 내용 자세히 보기</span></span>
                                        </div>
                                    </div>
                                </button>
                            </div>
                            <div class="acco-content">
                                <div class="data-info-list toggle-inner-list">
                                    <ul>
                                        <li>
                                            <dl>
                                                <dt>관계</dt>
                                                <dd>
                                                    <%= member.relClNm || '-' %><br />
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>B인터넷 가입여부</dt>
                                                <dd><%= member.svcCdNm %></dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    <% }); %>
                </ul>
            </div>
        </div>
    </div>
    <!-- //.widget -->
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true" />
<!-- .cont-box --><!-- 2018-11-02 수정 -->
<div class="cont-box nogaps-btm">
    <h3 class="tx-bold">꼭 확인해 주세요</h3>
    <ul class="noti-list02">
        <li><button id="MS_07_01_04_tip_01" type="button" class="tip-view-btn" title="TB끼리 온가족프리 해지 할 경우 TIP보기" aria-haspopup="true">TB끼리 온가족프리 해지 할 경우<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_04_tip_02" type="button" class="tip-view-btn" title="휴대폰/인터넷 서비스 해지 할 경우 TIP보기" aria-haspopup="true">휴대폰/인터넷 서비스 해지 할 경우<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_04_tip_03" type="button" class="tip-view-btn" title="휴대폰 회선 수 기준 적용 TIP보기" aria-haspopup="true">휴대폰 회선 수 기준 적용<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_04_tip_04" type="button" class="tip-view-btn" title="혜택 적용 시점 TIP보기" aria-haspopup="true">혜택 적용 시점<span class="tip-view">TIP</span></button></li>
        <li><button id="MS_07_01_04_tip_05" type="button" class="tip-view-btn" title="신규 개통 후 30일 TIP보기" aria-haspopup="true">신규 개통 후 30일<span class="tip-view">TIP</span></button></li>
    </ul>
</div>
<!--// .cont-box -->