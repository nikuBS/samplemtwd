<%#
* 나의 가입정보 > 나의 요금제/부가상품 (유선)
* @file myt-join.myplan.wire.html
* ID: MS_05
_%>
<%_ var feePlanProd = feePlan.product; _%>
<div class="tod-plan-compact-info-v2">
  <%_ if (feePlanProd.prodDetailLinkYn === 'Y' && feePlanProd.linkProdId) { _%>
  <a href="/product/callplan?prod_id=<%- feePlanProd.linkProdId %>">
    <%- include('./myt-join.myplan.wire.header-info.html', { feePlanProd }) _%>
  </a>
  <%_ } else { _%>
  <div class="none-link">
    <%- include('./myt-join.myplan.wire.header-info.html', { feePlanProd }) _%>
  </div>
  <%_ } _%>
</div>
<%# IPTV 회선이 결합상품(TB끼리 TV플러스)이 아닌 경우 _%>
<%_ if (svcInfo.svcAttrCd === 'S2') { _%>

<!-- .cont-box -->
<div class="cont-box nogaps noborder">
  <div class="banner-area">
    <%# 결합상품 확인하기 터치 시 상품 원장으로 이동(TB끼리 TV플러스 TW00000016) _%>
    <a href="/product/callplan?prod_id=TW00000016"><img src="<%= CDN %>/img/etc/banner_combine_prd.png" alt="결합하고 할인도 받으세요. 결합하고 할인도 받으세요. 결합상품 확인하기"></a>
  </div>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
<%_ } _%>
<%# 나의 부가상품 _%>
<%_
var additionsPaid = additions.joined.paids;
var additionsFree = additions.joined.frees;
var showMoreButton = (additionsPaid && additionsPaid.length > 2) || (additionsFree && additionsFree.length > 2);
_%>
<%_ if ((additionsPaid && additionsPaid.length > 0) || (additionsFree && additionsFree.length > 0)) { _%>

<!-- .cont-box -->
<div class="cont-box nogaps-btm">
  <h3 class="tit-type7">나의 부가상품</h3>
  <ul class="tod-full-link-list<%- showMoreButton ? ' tod-hidden-list' : null %>" data-id="addition-prods"><!-- 전체열기 : tod-hidden-list 삭제 -->
  <%_ if (additionsPaid && additionsPaid.length > 0) { _%>
    <li>
      <a href="/myt-join/additions#tod-cont1">
        <span class="inner">
          <span class="tit">유료 부가서비스</span>
          <span class="text tod-txt-point"><%- additionsPaid.length %>건</span>
        </span>
      </a>
      <ul class="inner-list">
        <%_ for (var i = 0, j = additionsPaid.length; i < j; i += 1) { _%>
          <%_ var paid = additionsPaid[i]; _%>
        <!--<li><a href="#none" data-link-prod-id="<%- paid.linkProdId %>"><%= paid.prodNm %></a></li>-->
        <li><%= paid.prodNm %></li>
        <%_ } _%>
      </ul>
    </li>
  <%_ } _%>
  <%_ if (additionsFree && additionsFree.length > 0) { _%>
    <li>
      <a href="/myt-join/additions#tod-cont2">
        <span class="inner">
          <span class="tit">무료 서비스</span>
          <span class="text tod-txt-point"><%- additionsFree.length %>건</span>
        </span>
      </a>
      <ul class="inner-list">
        <%_ for (var i = 0, j = additionsFree.length; i < j; i += 1) { _%>
          <%_ var free = additionsFree[i]; _%>
        <!--<li><a href="#none" data-link-prod-id="<%- free.linkProdId %>"><%= free.prodNm %></a></li>-->
        <li><%= free.prodNm %></li>
        <%_ } _%>
      </ul>
    </li>
  <%_ } _%>
  </ul>
  <%_ if (showMoreButton) { _%>
  <div class="btn-more">
    <button>나의 부가상품 전체보기 <i class="ico-plus-32"></i> </button>
  </div>
  <%_ } _%>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
<%_ } else { _%>
  <%_
  var additionsReserved = additions.reserved;
  var additionsJoinable = additions.joinable;
  _%>
  <%_ if (additionsReserved && additionsReserved.length > 0) { _%>

<!-- .cont-box -->
<div class="cont-box nogaps">
  <ul class="full-link-list type02">
    <li>
      <a href="/myt-join/additions">
        <span class="inner">
          <span class="tit">신청 접수 중인 부가서비스</span>
        </span>
      </a>
    </li>
  </ul>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
  <%_ } else if (additionsJoinable && additionsJoinable.length > 0) { _%>

<!-- .cont-box -->
<div class="cont-box nogaps">
  <ul class="full-link-list type02">
    <li>
      <a href="/myt-join/additions">
        <span class="inner">
          <span class="tit">가입 가능한 부가서비스</span>
        </span>
      </a>
    </li>
  </ul>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
  <%_ } _%>
<%_ } _%>

<%# OP002-12175 나의 결합상품 건수 노출%>
<%_if(combinations && combinations.comProdCnt > 0) {_%>
<div class="cont-box nogaps">
  <ul class="full-link-list type02">
    <li>
      <a href="/myt-join/combinations">
        <span class="inner">
            <span class="tit">나의 결합상품</span>
            <span class="text tod-txt-point"><%-combinations.comProdCnt%>건</span>
        </span>
      </a>
    </li>
  </ul>
</div>
<hr class="cont-sp type1" aria-hidden="true"/>
<%_}_%>

<%# 무료 할인 혜택 _%>
<%_ var dcBenefits = additions.dcBenefits; _%>
<%_ if (dcBenefits && dcBenefits.length > 0) { _%>
  <%_ var dcCttClCds = ['01', '02']; _%>

<!-- .cont-box -->
<div class="cont-box nogaps-btm">
  <h3 class="tit-type7">무료 할인 혜택</h3>
  <ul class="review-list">
    <%_ for (var i = 0, j = dcBenefits.length; i < j; i += 1) { _%>
      <%_ var dcBenefit = dcBenefits[i]; _%>
    <li>
      <div class="txt">
        <strong class="tit"><%= dcBenefit.dcOferNm %></strong>
        <div class="sub-info">
          <%_ if (dcBenefit.penText) { _%>
          <span class="item"><%= dcBenefit.penText %></span>
          <%_ } _%>
          <%_ if (dcBenefit.dcObjInvItmTypNm) { _%>
          <span class="item"><%= dcBenefit.dcObjInvItmTypNm %> 대상</span>
          <%_ } _%>
        </div>
        <%_ if (dcBenefit.dcStaDt && dcBenefit.dcEndDt) { _%>
        <div class="sale-period">
          <span class="sale-tit">할인기간</span>
          <span class="period"><%- dcBenefit.dcStaDt %> ~ <%- dcBenefit.dcEndDt %></span>
        </div>
        <%_ } _%>
      </div>
      <%_ if (dcCttClCds.indexOf(dcBenefit.dcCttClCd) !== -1) { _%>
      <span class="val">
        <span class="txt-red"><%- dcBenefit.dcCttClCd !== '01' ? Math.ceil(dcBenefit.dcVal) : dcBenefit.dcVal %><%- (dcBenefit.dcCttClCd === '01') ? '원' : '%' %></span>
        <span class="val-txt">할인</span>
      </span>
      <%_ } _%>
    </li>
    <%_ } _%>
  </ul>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
<%_ } _%>
<%# 요금 _%>
<%# // TODO: 성능 문제로 배포 연기(요금(이용/청구)는 확정된 후 적용) _%>
<%_ if (false) { _%>

<!-- .cont-box -->
<div class="cont-box nogaps-hoz">
  <ul class="tod-full-link-list">
    <li>
      <a href="/myt-fare/billguide/guide">
        <%_ if (usageFee.type === 'UF') { _%>
        <p class="sub-tit">이번 달 이용요금</p>
        <span class="inner">
          <span class="tit"><%- usageFee.usageDate %> (통합청구 이용 중)</span>
          <span class="text tod-txt-point"><%- usageFee.useAmtTot %>원</span>
        </span>
        <%_ } else { _%>
        <p class="sub-tit">이번 달 청구요금</p>
        <span class="inner">
          <span class="tit"><%- usageFee.claimDate %></span>
          <span class="text tod-txt-point"><%- usageFee.claimPay %>원</span>
        </span>
        <%_ } _%>
      </a>
    </li>
  </ul>
</div>
<!--// .cont-box -->

<hr class="cont-sp type1" aria-hidden="true"/>
<%_ } _%>
<%_ if (tipList) { _%>

<!-- .cont-box -->
<div class="cont-box noborder bgnone">
  <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
  <ul class="pg-chk-list02">
    <%_ for (var i in tipList) { _%>
      <%_ var tip = tipList[i]; _%>
    <li><button id="<%- tip.code %>" class="btn-tip" aria-haspopup="true" page-id="<%- pageInfo.menuId %>"><%= tip.title %><i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
    <%_ } _%>
  </ul>
</div>
<!--// .cont-box -->
<%_ } _%>
