<%#
* FileName: customer.researches.html
* Author: Jiyoung Jo (jiyoungjo@sk.com)
* Date: 2018.11.02
* id: CS_12_01
%>

<% include ../../components/start.component.html %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#gnb">메뉴 바로가기</a></li>
            <li><a href="#contents">본문 바로가기</a></li>
            <li><a href="#footer">푸터 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <!-- #header -->
        <div id="header" class="header-wrap">
            <div class="header">
                <div class="header-ti align-l">
                    <h1>설문조사</h1>
                </div>
                <button class="prev-step"><span class="blind">이전으로</span></button>
            </div>
        </div>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 class="blind">내용</h2>
            <div class="container">
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <!-- .poll-info -->
                    <div class="poll-info">
                        <h3 class="poll-tit">설문으로<strong>고객님의 의견</strong>을<br /> 들려주세요!</h3>
                    </div>
                    <!-- // .poll-info -->
                    <!-- .widget -->
                    <div class="widget">
                        <div class="widget-box accordion">
                            <h5 class="tit-a blind">설문조사</h5>
                            <div class="acco-cover focuson">
                                <!-- toggle : 한개만 열기 -->
                                <div class="acco-style poll">
                                    <ul class="acco-list">
                                        <!-- .on: 열기 -->  
                                        <% researches.map(research => { %>
                                        <li class="acco-box <%= research.isProceeding && 'on' %>" data-research-id="<%= research.bnnrRsrchId %>" data-type-code="<%= research.bnnrRsrchTypCd %>" data-answer-num="<%= research.canswNum %>">
                                            <div class="acco-tit">
                                                <span class="poll-question"><%= research.bnnrRsrchTitleNm %></span>
                                                <span class="poll-date"><%= research.staDtm %><span class="blind">에서</span><span
                                                        class="vt" aria-hidden="true">-</span> <%= research.endDtm %></span>
                                                <em class="poll-condition"><%= research.isProceeding? '진행중':'종료' %></em>
                                                <button role="button" aria-pressed="true"></button>
                                            </div>
                                            <div class="acco-cont">
                                                <div class="cont-box">
                                                    <% if (research.bnnrRsrchTypCd === 'Q' && research.hintExUrl) { %><div class="mb20"><button class="bt-link-tx underline">힌트보기</button></div><% }
                                                    const examCount = research.examples.length;
                                                    if (examCount > 0) { %>
                                                        <!-- .widget -->
                                                        <div class="widget">
                                                            <% if (research.bnnrRsrchRpsTypCd === 'C') { %>
                                                                <div class="widget-box radio">
                                                                    <ul class="select-list alignment01 <%= research.bnnrRsrchSortMthdCd === 'D' ? 'division-two' : '' %> <%= research.examples[0].image ? 'has-image' : '' %>" role="radiogroup">
                                                                        <% research.examples.map(exam => { %>
                                                                        <li class="radiobox type01" role="radio" aria-checked="false"><!-- 체크 상태일 경우 .checked 클래스 추가, aria-checked="true" -->
                                                                            <% if (exam.image) { %>
                                                                                <div class="poll-img"><img src="<%= exam.image %>" /></div>
                                                                                <input type="radio" name="radio<%= research.bnnrRsrchId %>" value="" title="<%= exam.content %>" /><!-- 체크상태일 경우 checked="checked" -->
                                                                                <div class="poll-text"><%= exam.content %><% if (exam.motHtml) { %><br/><%- exam.motHtml %><% } %></div>
                                                                            <% } else { %>
                                                                                <input type="radio" name="radio<%= research.bnnrRsrchId %>" value="" title="<%= exam.content %>" /><!-- 체크상태일 경우 checked="checked" -->
                                                                                <%= exam.content %><% if (exam.motHtml) { %><br/><%- exam.motHtml %><% } %>
                                                                            <% } %>
                                                                        </li>
                                                                        <% }); %>
                                                                    </ul>
                                                                </div>
                                                            <% } else { %>
                                                                <div class="widget-box check">
                                                                    <ul class="select-list alignment01 <%= research.bnnrRsrchSortMthdCd === 'D' ? 'division-two' : '' %> <%= research.examples[0].image ? 'has-image' : '' %>" role="group">
                                                                        <% research.examples.map(exam => { %>
                                                                        <li class="checkbox type01" role="checkbox" aria-checked="false"><!-- 체크 상태일 경우 .checked 클래스 추가, aria-checked="true" -->
                                                                            <% if (exam.image) { %>
                                                                                <div class="poll-img"><img src="<%= exam.image %>" /></div>
                                                                                <input type="checkbox" name="checkbox" value="" title="<%= exam.content %>" /><!-- 체크상태일 경우 checked="checked" -->
                                                                                <div class="poll-text"><%= exam.content %><% if (exam.motHtml) { %><br/><%- exam.motHtml %><% } %></div>
                                                                            <% } else { %>
                                                                                <input type="checkbox" name="checkbox" value="" title="<%= exam.content %>" /><!-- 체크상태일 경우 checked="checked" -->
                                                                                <%= exam.content %><% if (exam.motHtml) { %><br/><%- exam.motHtml %><% } %>
                                                                            <% } %>
                                                                        </li>
                                                                        <% }); %>
                                                                    </ul>
                                                                </div>
                                                            <% } %>
                                                        </div>
                                                        <!--// .widget -->
                                                        <% if (research.examples[examCount - 1].isEtc) { %><textarea class="poll-area mt10 mb10" data-etc-idx="<%= examCount %>" cols="20" rows="3" placeholder="기타항목 선택시 내용을 입력해주세요."></textarea><% } %>
                                                        <% if (research.motMsgHtmlCtt) { %><div class="mb20"><%- research.motMsgHtmlCtt %></div><% } %>
                                                    <% } %>
                                                    <% if (research.isProceeding) { %>
                                                        <% if (research.bnnrRsrchRpsTypCd === "R") { %>
                                                            <ul class="bt-slice">
                                                                <li class="bt-blue1">
                                                                    <a href="/customer/researches/<%= research.hintExUrl %>">설문 시작하기</a>
                                                                </li>
                                                            </ul>
                                                        <% } else { %>
                                                            <ul class="bt-slice item-two">
                                                                <li class="bt-white2">
                                                                    <a href="/customer/researches/result?researchId=<%= research.bnnrRsrchId %>">결과보기</a>
                                                                </li>
                                                                <li class="bt-blue1">
                                                                    <button disabled>참여하기</button>
                                                                </li>
                                                            </ul>
                                                        <% } %>
                                                    <% } else { %>
                                                        <ul class="bt-slice">
                                                            <li class="bt-blue1">
                                                                <a href="/customer/researches/result?researchId=<%= research.bnnrRsrchId %>">결과보기</a>
                                                            </li>
                                                        </ul>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </li>
                                        <% }); %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--// .widget -->
                    <!-- .bt-more -->
                    <div class="bt-more none">
                        <button>더보기</button>
                    </div>
                    <!-- // .bt-more -->
                </div>
                <!-- .bt-top -->
                <div class="bt-top">
                    <button>top으로 이동</button>
                </div>
                <!-- // .bt-top -->
            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>

<% include ../../components/javascript.component.html %>
<script>
    $(document).ready(function () {
        new Tw.CustomerResearches($('.wrap'));
    });
</script>
<% include ../../components/end.component.html %>