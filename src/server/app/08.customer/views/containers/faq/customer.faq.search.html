<%#
* @file customer.faq.html (CS_05_04)
* @author Hakjoon Sim (hakjoon.sim@sk.com)
* @since 2018.11.05
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body <%= total === 0 ? 'class=bg-white' : '' %>>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <%- include('../../../../common/views/components/header.component.html', { title: 'FAQ', svcInfo: svcInfo }); %>
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container">
                <!-- .cont-box -->
                <!-- 190516_수정 -->
                <div class="cont-box">
                    <div class="tod-form-wrap">
                        <span class="select mb10">
                            <button class="bt-dropdown big fe-search-category" title="카테고리 선택" aria-haspopup="true">전체<span class="ico"></span></button>
                        </span>
                        <span class="inputbox">
                            <span class="input">
                                <input id="fe-input" type="text" value="<%= keyword %>" title="검색어 입력" placeholder="궁금하신 점을 직접 찾아보실 수 있어요" value="" />
                                <button class="cancel"><span class="blind">삭제</span></button>
                            </span>
                        </span>
                    </div>
                    <div class="btn-search mt20">
                        <ul class="bt-slice disabled">
                            <li class="bt-red1"><button id="fe-search">검색</button></li>
                        </ul>
                    </div>
                </div>
                <!--// .cont-box -->

                <!-- searchInfo.searchFilters.indexOf('false') == -1 -->
                <!-- 190516_추가 -->
                <div class="cont-box bgnone noborder gaps-style03">
                    <div class="contheader-box">
                        <div class="totalfilter-wrap">
                            <span class="total">총 <strong class="number-text"><%= total %></strong>건</span>
                            <!-- 검색 결과 리스트가 0 이상이거나 필터로 검색 했을때는 필터 버튼을 표시 -->
                            <% if (total > 0 || !!searchInfo.searchFilters.searchFltNames) { %>
                            <!-- <button type="button" class="filter-btn" aria-haspopup="true">전체</button> -->
                            <% if( (!!searchInfo.searchFilters.searchFltNames)) { %>
                                <button type="button" class="filter-btn date-in fe-select-filter" aria-haspopup="true"> <!-- 필터를 선택하기전에는 전체 표시, date-in 클래스는 검색 후 파란색 테두리 나오게함-->
                            <% } else { %> 
                                <button type="button" class="filter-btn fe-select-filter" aria-haspopup="true">
                            <% } %>
                            
                            <!-- <span class="datebox">휴대폰가격공시 기타, 요금제 기타 </span> -->
                                <span class="datebox"><%= !!searchInfo.searchFilters.searchFltNames ? searchInfo.searchFilters.searchFltNames : '전체' %></span>
                                <% if( searchInfo.searchFilters.count > 2) { %>
                                <span class="text">외</span>
                                <span class="number"><%= searchInfo.searchFilters.count -2 %></span><span class="text">건</span>
                                <% } %>
                            </button>
                            <% } %>

                        </div>
                    </div>
                </div>
                <!-- //190516_추가 -->

                <!-- .cont-box -->
                <div class="cont-box nogaps <%= total === 0 ? 'noborder' : '' %> ">

                    <% if (total !== 0) { %>
                    <div class="widget">
                        <div class="widget-box accordion2">
                            <div class="acco-style qanda-list"><!-- 스타일별 클래스 추가 -->
                                <ul class="acco-box" id="fe-search-result">
                                    <% for (let i = 0; i < result.length; i++) { %>
                                    <li class="acco-list"><!-- on , off -->
                                        <div class="acco-title">
                                            <button role="button" aria-pressed="false" class="list-q" data-faq-id="<%= result[i].ifaqId %>"><!-- .none-event 클릭못하게할때 -->
                                                <em class="ico">질문</em><%= result[i].inqCtt %>
                                            </button>
                                        </div>
                                        <div class="acco-content">
                                            <em class="ico">답변</em><%- result[i].answCtt %>
                                        </div>
                                    </li>
                                    <% } %>
                                </ul>
                            </div>
                        </div>
                        <% } %>
                        <% if (total === 0) { %>
                        <div class="contents-empty">
                            <span class="ico type1"></span>
                            <p class="desc">검색 결과가 없습니다.<br><strong>다시 시도해 주세요.</strong></p>
                        </div>
                        <% } %>
                    </div>

                    <% if (total > 20) { %>
                    <div class="btn-more mr16 ml16">
                        <button id="fe-more">더보기</button>
                    </div>
                    <% } %>
                </div>
                <!--// .cont-box -->
            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
          <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
          <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>
<% include ../../components/javascript.component.html %>
<script type="text/template" id="tpl_item">
  {{#list}}
  <li class="acco-list"><!-- on , off -->
      <div class="acco-title">
          <button role="button" aria-pressed="false" class="list-q"><!-- .none-event 클릭못하게할때 -->
              <em class="ico">질문</em>{{inqCtt}}
          </button>
      </div>
      <div class="acco-content">
          <em class="ico">답변</em>{{{answCtt}}}
      </div>
  </li>
  {{/list}}
</script>
<script>
  $(document).ready(function () {
    // var data = '<% JSON.stringify(searchInfo) %>';
    // if(!!data){
    //     data = JSON.parse(data);
    // }
    new Tw.CustomerFaqSearch($('.wrap'), '<%= keyword %>', JSON.parse('<%- JSON.stringify(searchInfo) %>'));
  })
</script>
<% include ../../components/end.component.html %>