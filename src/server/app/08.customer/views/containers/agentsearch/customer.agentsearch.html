<%#
* @file customer.agentsearch.search.html
* @author Hakjoon Sim (hakjoon.sim@sk.com)
* @since 2018.10.16
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body class="o2o-body">
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <%- include('../../../../common/views/components/header.component.html', { title: '지점/대리점 찾기', svcInfo: svcInfo }); %>
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container">
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <!-- .component -->
                    <div class="component">
                        <div class="component-box tabs" data-header-noborder="true">
                            <div class="tab-area new01"><!-- 타입별 탭형태 변환 -->
                                <div class="tab-linker">
                                    <ul role="tablist" class="fe-tabs">
                                        <li role="presentation" aria-selected="false" aria-controls="tab1-tab" id="tab1">
                                            <a  role="tab" aria-selected="false" href="#name">매장명</a>
                                        </li><!-- 링크 이동시 활성화 된 탭에 aria-selected="true" 설정 -->
                                        <li role="presentation" aria-selected="false" aria-controls="tab2-tab" id="tab2">
                                            <a role="tab" aria-selected="false" href="#addr">주소</a>
                                        </li>
                                        <li role="presentation" aria-selected="false" aria-controls="tab3-tab" id="tab3">
                                            <a role="tab" aria-selected="false" href="#tube">지하철</a>
                                        </li>
                                    </ul>
                                </div> <!-- end of tab-linker -->
                                <hr class="cont-sp type1" aria-hidden="true">
                                <div class="tab-contents">
                                    <ul>
                                        <li role="tabpanel" id="tab1-tab" aria-labelledby="tab1">
                                            <!-- .search-point -->
                                            <div class="search-point tod-search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box nogaps-btm">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox mb20">
                                                        <span class="input">
                                                            <input class="fe-keyword" type="text" title="지점/대리점명" placeholder="지점/대리점명" autocomplete="off" />
                                                            <button class="cancel fe-cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                        <button class="ico-search-red fe-search"><span class="blind">검색</span></button>
                                                    </span>
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab2-tab" aria-labelledby="tab2">
                                            <!-- .search-point -->
                                            <div class="search-point tod-search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box nogaps-btm">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox mb20">
                                                        <span class="input">
                                                            <input class="fe-keyword" type="text" title="주소/지역명" placeholder="주소/지역명" autocomplete="off" />
                                                            <button class="cancel fe-cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                        <button class="ico-search-red fe-search"><span class="blind">검색</span></button>
                                                    </span>
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab3-tab" aria-labelledby="tab3">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box nogaps-btm">
                                                    <!-- 2019.02.22 역이름 검색 프로세스 수정-->
                                                    <!-- .filter -->
                                                    <div class="filter subway mb20 fe-subway">    <!-- mb20 넣는게 맞는지 확인 필요 20190704 -->
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02 fe-select-area" title="지역선택" aria-haspopup="true" data-type="area">지역선택</button>
                                                        </div>
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02 fe-select-line" title="노선선택" aria-haspopup="true" data-type="line" data-error-msg="지역을 선택해 주세요.">노선선택</button>
                                                        </div>
                                                        <div class="tod-station-sel">
															<button class="bt-dropdown text-type02 fe-select-name" title="지하철 역명 선택" aria-haspopup="true" data-type="name" data-error-msg="지역 및 노선을 선택해 주세요.">지하철 역명 선택</button>
														</div>
                                                    </div>
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-red1">
                                                                <button id="fe-btn-search-tube" class="fe-search">검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--// .component -->
                </div>
                <!--// .cont-box -->

                <!-- 위치동의를 하지 않은 고객이 검색하였을 경우, 노출되는 배너 -->
                <div class="fe-location-alert none">
                    <hr class="cont-sp type1" aria-hidden="true" />
                    <div class="tod-dialog-box">
                        <div class="dialog-ico"><i class="ico-location"><span class="blind">emoji</span></i></div>
                        <button class="dialog-txt">
                            <span class="key">
                                위치정보 이용동의를 하시면<br>
                                <strong>근처 지점/대리점을 확인하실 수 있습니다. </strong>
                            </span>
                        </button>
                        <div class="dialog-right-btn fe-close-alert"><button class="icon-32px-exit"><span class="blind">닫기</span></button></div>
                    </div>
                    <!--<hr class="cont-sp type1" aria-hidden="true" />-->
                </div>
                <hr class="cont-sp type1" aria-hidden="true" />
                <!--필터옵션 영역-->
                <div class="tod-filter-option fe-filter-area">
                    <div class="contheader-box">
                        <div class="totalfilter-wrap">
                            <span class="total">총<span id="fe-result-count" class="number-text">0</span>개</span>
                            <button type="button" class="filter-btn fe-options" aria-haspopup="true">
                                <span class="datebox">필터</span>
                            </button>
                        </div>

                        <!-- 지도보기/리스트보기 토글 버튼-->
                        <div class="btn-wrap fe-toggle-button">
                            <button class="btn-round2 btn-style3 btn-display-list" data-map="지도보기" data-list="리스트보기">리스트보기</button>
                        </div>
                    </div>
                </div>
                <!--필터옵션 영역-->

                <!-- 결과 없을경우 -->
                <div class="fe-nodata none">
                    <div class="cont-box nogaps-hoz">
                        <div class="contents-empty tod-contents-empty">
                            <span class="ico type-map fe-icon"></span>
                            <p class="desc fe-err-msg"
                               data-error1="<strong>반경 3km 이내에 지점/대리점이 없습니다.</strong><br />원하시는 지점/대리점을 검색해주세요."
                               data-error2="<strong>검색 결과가 없습니다.</strong><br />다시 검색해주세요."
                               data-error3="<strong>반경 3km 이내에 지점/대리점이 없습니다.</strong><br />원하시는 업무 처리가 가능한 매장을 안내 드립니다."
                               data-error4="<strong>원하시는 업무 처리가 가능한 매장이 없습니다.</strong><br />원하시는 지점/대리점을 검색해주세요."
                               data-error5="<strong>반경 3km 이내에 지점/대리점이 없습니다.</strong><br />지도 검색 반경을 변경하시거나, <br>원하시는 지점/대리점을 검색해주세요."
                            >
                            </p>
                        </div>
                    </div>
                    <hr class="cont-sp type1" aria-hidden="true" />
                </div>
                <!--// 결과 없을경우 -->

                <!--로딩 영역-->
                <div class="cont-box nogaps-hoz fe-loading none">
                    <div class="tod-o2o-loading">
                        <span class="ico-loading"><img src="<%-CDN%>/img/ico/loading.gif" alt=""></span>
                        <p class="txt">데이터를 불러오는 중 입니다.</p>
                    </div>
                </div>
                <!--// 로딩 영역-->

                <!--지도 형식일때-->
                <div class="tod-o2o-comp map-type fe-map-list-area none">
                    <!-- 지도 노출 영역 :  디바이스 스크린  바닥까지 노출 -->
                    <div id="fe-map-area" style="position: relative;">
                        <!-- 반경 -->
                        <div class="map-pos-select" style="position: absolute; right: 53px; top: 20px;z-index: 1;">
                            <button type="button" class="tod-map-select fe-radius" aria-haspopup="true" title="거리반경 선택"><span>500m 반경</span></button>
                            <!-- 1Km 반경, 2Km 반경 -->
                        </div>

                        <!-- 나의 위치 -->
                        <div class="map-pos-my" style="position: absolute; right: 16px; top: 20px;z-index: 1;">
                            <button id="fe-myLocation" type="button" class="tod-map-pos"><span class="blind">내위치</span></button>
                        </div>
                        <div id="fe-tmap-box" style="width: 100%; height:100%"></div>
                    </div>

                    <!-- 매장정보 -->
                    <div class="tod-o2o-display fe-shop-info-area"  data-expanded="false" style="z-index:2;">
                        <div class="tod-o2o-list fe-list-area">
                            <ul class="fe-result-list">
                                <!--#tpl_search_result_item 리스트 바인딩 영역-->
                            </ul>
                            <div class="btn-more fe-btn-more none">
                                <button>더 보기</button>
                            </div>
                        </div>
                        <!-- 반경 500m 이내 지점/대리점 없는 경우 -->
                        <div class="contents-empty tod-contents-empty fe-no-shop none">
                            <span class="ico type-map fe-icon"></span>
                            <p class="desc" data-desc="<strong>{distance} 이내에 지점/대리점이 없습니다.</strong><br />지도 검색 반경을 변경하시거나, <br>원하시는 지점/대리점을 검색해주세요."></p>
                        </div>
                        <!--// 반경 500m 이내 지점/대리점 없는 경우 -->
                    </div> <!--// 매장정보 -->
                </div>
                <!--// 지도 형식일때-->

                <!--리스트 형식일때-->
                <div class="tod-o2o-comp normal-type fe-normal-list-area none">
                    <!-- 타이틀 노출 -->
                    <div class="tod-o2o-title fe-list-title none">
                        <p>T world가 추천하는 지점/대리점</p>
                    </div>
                    <!-- 리스트 -->
                    <div class="tod-o2o-list">
                        <ul class="fe-result-list">
                            <!--#tpl_search_result_item 리스트 바인딩 영역-->
                        </ul>
                    </div>
                    <div class="btn-more fe-btn-more none">
                        <button>더 보기</button>
                    </div>
                </div>
                <!--// 리스트 형식일때-->

            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>
<% include ../../components/javascript.component.html %>
<% include ../../components/tmap.component.html %>
<!--지점/대리점 리스트 템플릿-->
<script type="text/template" id="tpl_search_result_item">
  {{#list}}
  <li data-loc-code="{{locCode}}" class="fe-branch-detail">
      <div class="tod-o2o-item" role="button" tabindex="0">
          <dl>
              <dt class="item-tit">
                  <span class="tit">{{storeName}}</span>
                  {{#shopTypeNm}}
                  <span class="type">{{this}}</span>
                  {{/shopTypeNm}}
              </dt>
              <dd class="item-txt">
                  <span class="txt"><em class="blind">도로명주소</em>{{searchAddr}}</span>
                  <span class="txt"><em class="blind">지번주소</em>{{jibunAddr}}</span>
              </dd>
          </dl>
          <!--매장 처리 가능업부 영역-->
          <p class="item-etc">{{ableTask}}</p>
      </div>
      <!--예약상담 가능인경우-->
      {{#if isReserve}}
      <div class="tod-o2o-btns col2">
          <a href="" class="btn btn-phone fe-tel" data-tel="{{tel}}">전화걸기</a>
          <a href="#" class="btn btn-booking fe-booking" data-booking-url="{{url}}" data-charge="{{charge}}">상담 예약</a>
      </div>
      {{else}}
      <div class="tod-o2o-btns col1">
          <a href="" class="btn btn-phone fe-tel" data-tel="{{tel}}">전화걸기</a>
      </div>
      {{/if}}
  </li>
  {{/list}}
</script>
<script>
  $(document).ready(function () {
    new Tw.CustomerAgentsearch($('.wrap'), '<%-isAcceptAge%>', '<%-JSON.stringify(svcInfo)%>');
  });
</script>
<% include ../../components/end.component.html %>
