<%#
* @file customer.agentsearch.search.html
* @author Hakjoon Sim (hakjoon.sim@sk.com)
* @since 2018.10.16
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <%- include('../../../../common/views/components/header.component.html', { title: '지점/대리점 찾기', svcInfo: svcInfo }); %>
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container">
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <!-- .component -->
                    <div class="component">
                        <div class="component-box tabs" data-header-noborder="true">
                            <div class="tab-area new01"><!-- 타입별 탭형태 변환 -->
                                <div class="tab-linker">
                                    <ul role="tablist">
                                        <li role="presentation" class="fe-tab" aria-selected="true" aria-controls="tab1-tab" id="tab1">
                                            <a  role="tab" aria-selected="true" class="fe-custom-replace-history" href="#name">매장명</a>
                                        </li><!-- 링크 이동시 활성화 된 탭에 aria-selected="true" 설정 -->
                                        <li role="presentation" class="fe-tab" aria-selected="false" aria-controls="tab2-tab" id="tab2">
                                            <a role="tab" aria-selected="false" class="fe-custom-replace-history" href="#addr">주소</a>
                                        </li>
                                        <li role="presentation" class="fe-tab" aria-selected="false" aria-controls="tab3-tab" id="tab3">
                                            <a role="tab" aria-selected="false" class="fe-custom-replace-history" href="#tube">지하철</a>
                                        </li>
                                    </ul>
                                </div> <!-- end of tab-linker -->
                                <hr class="cont-sp type1" aria-hidden="true">
                                <div class="tab-contents">
                                    <ul>
                                        <li role="tabpanel" id="tab1-tab" aria-labelledby="tab1">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box pb0">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox mb20">
                                                        <span class="input">
                                                            <input id="fe-input-name" type="text" title="지점/대리점명" placeholder="지점/대리점명" value="<%= isSearch && type === 'name' ? keyword : '' %>" autocomplete="off" />
                                                            <button id="fe-cancel-name" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span>
                                                    <!-- // .inputbox -->
                                                    <!-- .filter 201907004 삭제-->
                                                    <!-- <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div> -->
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-red1">
                                                                <button id="fe-btn-search-name" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab2-tab" aria-labelledby="tab2">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box pb0">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox mb20">
                                                        <span class="input">
                                                            <input id="fe-input-addr" type="text" title="주소/지역명" placeholder="주소/지역명" value="<%= isSearch && type === 'addr' ? keyword : undefined %>" aria-labelledby="aria-citation-phone" autocomplete="off" />
                                                            <button id="fe-cancel-addr" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span>
                                                    <!-- // .inputbox -->
                                                    <!-- .filter 20190704 삭제-->
                                                    <!-- <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div> -->
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-red1"> <!-- //190520_리디자인 02 : 클래스 수정 -->
                                                                <button id="fe-btn-search-addr" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab3-tab" aria-labelledby="tab3">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box nogaps-btm">
                                                    <!-- 2019.02.22 역이름 검색 프로세스 수정-->
                                                    <!-- .filter -->
                                                    <div class="filter subway mb20">    <!-- mb20 넣는게 맞는지 확인 필요 20190704 -->
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02" id="fe-select-area" title="지역선택" aria-haspopup="true">지역선택</button>
                                                        </div>
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02" id="fe-select-line" title="노선선택" aria-haspopup="true">노선선택</button>
                                                        </div>
                                                        <div class="tod-station-sel">
															<button class="bt-dropdown text-type02" id="fe-select-name" title="지하철 역명 선택" aria-haspopup="true">지하철 역명 선택</button>
														</div>
                                                    </div>
                                                    <!-- // .filter -->
                                                    <!-- .inputbox 삭제 예정 20190704-->
                                                    <!-- <span class="inputbox">
                                                        <span class="input">
                                                            <input id="fe-input-tube" type="text" title="지하철명" placeholder="정확한 역명 예) 홍대역(X), 홍대입구역(O)" value="<%= isSearch && type === 'tube' ? keyword : undefined %>" aria-labelledby="aria-citation-phone" autocomplete="off" />
                                                            <button id="fe-cancel-tube" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span> -->
                                                    <!-- // .inputbox -->
                                                    <!-- .filter 20190704 삭제-->
                                                    <!-- <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div> -->
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-red1">
                                                                <button id="fe-btn-search-tube" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--// .component -->
                </div>
                <!--// .cont-box -->

                <div class="fe-none fe-result <%= isSearch && result.totalCount === 0 ? undefined : 'none' %>">
                        <!-- .ti-caption-gray -->
                        <!-- <div class="ti-caption-gray"> -->
                    <div class="cont-box bgnone noborder gaps-style03">
                        <div class="contheader-box">
                            <div class="totalfilter-wrap">
                                <span class="total">총 <span class="number-text"><%= isSearch ? result.totalCount : '0' %></span>개</span>
                                <!-- <button type="button" class="filter-btn">전체</button> -->
                                <!-- <button type="button" class="filter-btn date-in">
                                    <span class="datebox"><%= isSearch ? optionsText : '전체' %></span><span class="text">외</span>
                                    <span class="number pl4">2</span><span class="text">건</span>
                                </button> -->
                                <% if( (isSearch && optionsText.text.indexOf('전체') == -1) ||  ( isSearch &&optionsText.text.indexOf('전체') !== -1 && optionsText.count > 0)) { %>
                                    <button type="button" class="filter-btn date-in fe-options" aria-haspopup="true">
                                    <% } else { %>
                                    <button type="button" class="filter-btn fe-options" aria-haspopup="true">
                                <% } %>
                                    <span class="datebox"><%= isSearch ? optionsText.text : '전체' %></span>
                                    <!-- if(<%= isSearch && 'count' in optionsText %>) { -->
                                    <% if( isSearch && optionsText.count > 1) { %>
                                        <span class="text">외</span>
                                        <span class="number pl4"><%= optionsText.count - 1 %></span><span class="text">건</span>
                                    <% } %>
                                </button>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="fe-result <%= isSearch && result.totalCount > '0' ? undefined : 'none' %>">
                    <div class="cont-box bgnone noborder gaps-style03">
                        <div class="contheader-box">
                            <div class="totalfilter-wrap">
                                <!-- <% isSearch ? optionsText.count : '' %> -->
                                <span class="total">총<span class="number-text"><%= isSearch ? result.totalCount : '0' %></span>개</span>
                                <!-- <button type="button" class="filter-btn">전체</button> -->
                                <% if( (isSearch && optionsText.text.indexOf('전체') == -1) ||  ( isSearch &&optionsText.text.indexOf('전체') !== -1 && optionsText.count > 0)) { %>
                                <button type="button" class="filter-btn date-in fe-options" aria-haspopup="true">
                                <% } else { %>
                                <button type="button" class="filter-btn fe-options" aria-haspopup="true">
                                <% } %>
                                    <span class="datebox"><%= isSearch ? optionsText.text : '전체' %></span>
                                    <!-- if(<%= isSearch && 'count' in optionsText %>) { -->
                                    <% if( isSearch && optionsText.count > 1) { %>
                                        <span class="text">외</span>
                                        <span class="number pl4"><%= optionsText.count - 1 %></span><span class="text">건</span>
                                    <% } %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- .cont-box -->
                <div class="cont-box nogaps-hoz">
                    <!-- .search-point -->
                    <div class="search-point">


                            <!-- <div class="totalfilter-wrap"> -->
                                <!-- <h3 class="tit">총 <em>0</em>개의 매장이 검색되었습니다.</h3> -->
                                <!-- <span class="total">총 <span class="number-text">0</span>개</span> -->
                            <!-- </div> -->
                            <!-- // .ti-caption-gray -->
                        <div class="fe-none fe-result <%= isSearch && result.totalCount === 0 ? undefined : 'none' %>">
                        <!-- .contents-empty -->
                            <div class="contents-empty">
                                <span class="ico type1"></span>
                                <p class="desc">검색 결과가 없습니다.<br /><strong>다시 검색해주세요.</strong></p>
                            </div>
                            <!-- // .contents-empty -->
                        </div>


                        <div class="fe-result <%= isSearch && result.totalCount > '0' ? undefined : 'none' %>">


                            <!-- .ti-caption-gray -->
                            <!-- <div class="ti-caption-gray"> -->
                            <!-- <div class="totalfilter-wrap"> -->
                                <!-- <h3 class="tit">총 <em id="fe-result-count"><%= isSearch ? result.totalCount : '0' %></em>개의 매장이 검색되었습니다.</h3> -->
                                <!-- <span class="total">총 <span class="number-text"><%= isSearch ? result.totalCount : '0' %></span>개</span> -->
                                <!-- <h3 class="tit">총 <em id="fe-result-count"><%= isSearch ? result.totalCount : '0' %></em>개의 매장이 검색되었습니다.</h3> -->
                                <!-- <button type="button" class="filter-btn date-in">
                                        <span class="datebox">대리점, 공식인증 대리점, 애플취급점</span><span class="text">외</span> 
                                        <span class="number pl4">2</span><span class="text">건</span>
                                </button> -->

<!-- 
                            <div class="filter">
                                <div class="inline">
                                    <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                </div>
                            </div> -->


                            <!-- </div> -->

                            <!-- // .ti-caption-gray -->
                            <!-- .shop-info -->
                            <div class="shop-info">
                                <div class="shop-txt">
                                    <ul id="fe-result-list">
                                        <% if (isSearch && result.regionInfoList.length > 0) { %>
                                        <% for (let i = 0; i < result.regionInfoList.length; i++) { %>
                                        <li>
                                            <dl class="type02 fe-branch-detail" value="<%= result.regionInfoList[i].locCode %>">
                                                <dt><%= result.regionInfoList[i].storeName %></dt>
                                                <dd><%= result.regionInfoList[i].searchAddr %><br><%= result.regionInfoList[i].jibunAddr %>
                                                    <a class="bt-tel" href="tel:<%= result.regionInfoList[i].tel %>"><span class="blind">매장으로 전화하기</span></a>
                                                </dd>
                                            </dl>
                                        </li>
                                        <% } %>
                                        <% } %>
                                    </ul>
                                </div>
                            </div>
                            <!-- // .shop-info -->
                            <!-- .btn-more -->
                            <!-- <div class="btn-more <ejs isSearch && result.lastPageType === 'N' ? undefined : 'none' ejs>"> -->
                                <!-- <div class="bt-more"> -->
                                    <!-- <button role="button" title="">더보기</button> -->
                                <!-- </div> -->
                            <!-- </div> -->
                            <!-- // .btn-more -->
                            <% if (isSearch && result.totalCount > 20) { %>
                            <div class="paging-wrap top-line type1">
                                <div class="paging">
                                    <% if (lastPage > 3) { %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-first" data-page="1" class="first <%= page === 1 ? 'disabled' : '' %>"><span class="pg-blind">처음 페이지로 이동</span></a>
                                    <% } %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-prev" data-page="<%= page - 1 %>" class="prev <%= page === 1 ? 'disabled' : '' %>"><span class="pg-blind">이전 페이지로 이동</span></a>
                                    <% const start = page - (page % 3 === 0 ? 2 : page % 3 - 1) %>
                                    <% const end = start + 2 >= lastPage ? lastPage : start + 2; %>
                                    <% for (let i = start; i <= end; i += 1) { %>
                                    <% if (i === page) { %>
                                    <a href="javascript:void(0)" role="button" class="active fe-go-page" title="현재페이지"><%= i %></a>
                                    <% } else { %>
                                    <a href="javascript:void(0)" role="button" class="fe-go-page"><%= i %></a>
                                    <% } %>
                                    <% } %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-next" data-page="<%= page + 1 %>" class="next <%= page === lastPage ? 'disabled' : '' %>"><span class="pg-blind">다음 페이지로 이동</span></a><!-- 비활성화시 disabled 클래스 추가 -->
                                    <% if (lastPage > 3) { %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-last" data-page="<%= lastPage %>" class="last <%= page === lastPage ? 'disabled' : '' %>"><span class="pg-blind">마지막 페이지로 이동</span></a>
                                    <% } %>
                                </div>
                            </div>
                            <% } %>
                        </div>

                        <% if (isAcceptAge) { %>
                        <!-- .bn-search -->
                        <div class="bn-search">
                            <div class="inner">
                                <span class="ico"></span>
                                <div class="txt">
                                    나의 위치와
                                    <strong>가까운 매장을 찾아보세요</strong>
                                    <a class="bt-link-tx underline" href="/customer/agentsearch/near">찾아보기</a>
                                </div>
                            </div>
                        </div>
                        <!-- // .bn-search -->
                        <% } else { %>
                            <hr class="cont-sp type1 tod-hr-line01" aria-hidden="true">
                        <% } %>

                        <!-- 190920 [OP002-3790] 수정_02 -->
                        <!-- .widget -->
                        <div class="widget">
                            <div class="widget-box accordion">
                                <div class="acco-cover"><!-- toggle : 한개만 열기 -->
                                    <div class="acco-style office_hours">
                                        <ul class="acco-list pd0"><!-- .on: 열기 -->
                                            <li class="acco-box on">
                                                <div class="acco-tit">
                                                    <button role="button" aria-pressed="false">
                                                        <span class="ico-wrap"><img src="<%=CDN%>/img/customer/ico_office_hours.png" alt=""></span>
                                                        <div class="txt">
                                                            <p>업무시간 안내</p>
                                                            <span>대리점 업무시간은 매장마다 다릅니다. <br>토, 일요일 및 공휴일 휴무</span>
                                                        </div>
                                                    </button>
                                                </div>
                                                <div class="acco-cont hours-of-business">
                                                    <div class="inner">
                                                        <div class="time-list">
                                                            <dl>
                                                                <dt>일반지점</dt>
                                                                <dd>(월~금) 09:00 ~ 18:00</dd>
                                                            </dl>
                                                            <dl>
                                                                <dt>대리점 복합형 지점</dt>
                                                                <dd>(월~금) 10:00 ~ 19:00</dd>
                                                            </dl>
                                                            <p class="stitle">특수상권</p>
                                                            <dl class="subtext-dl">
                                                                <dt class="title">테크노마트</dt>
                                                                <dd class="text">(월~금) 09:00 ~ 18:00</dd>
                                                            </dl>
                                                            <p class="stitle">소형지점</p>
                                                            <dl class="subtext-dl">
                                                                <dt class="title">부천, 구미, 충주, 서산, 순천, 군산</dt>
                                                                <dd class="text">(월~금) 09:00 ~ 18:00</dd>
                                                            </dl>
                                                        </div>

                                                        <div class="link-long">
                                                            <a href="https://tbooking.svctop.co.kr" class="disabled" aria-haspopup="true" target="_blank" title="지점 방문 예약 바로가기">
                                                                <span class="ico-wrap">
                                                                    <img src="<%=CDN%>/img/ico/ico_reserve.png" alt="" style=" width: 2.75rem;height: 2.75rem;">
                                                                </span>
                                                                <div class="txt">
                                                                    <p>지점 방문 예약</p>
                                                                    <span>지점 방문 예약 후 방문하시면<br>대기시간 없이 바로 상담 받으실 수 있습니다.</span>
                                                                </div>

                                                                <span class="tx-sub">
                                                                    <span class="ico"><span class="blind">더보기</span></span>
                                                                </span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--// .widget -->
                        <!-- //190920 [OP002-3790] 수정_02 -->

                    </div>
                    <!-- // .search-point -->
                </div>
                <!--// .cont-box -->
            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>
<% include ../../components/javascript.component.html %>
<script type="text/template" id="tpl_search_result_item">
  {{#list}}
  <li>
      <dl class="type02 fe-branch-detail" value={{locCode}}>
          <dt>{{storeName}}</dt>
          <dd>{{searchAddr}}<br>{{jibunAddr}}<a class="bt-tel" href="tel:{{tel}}"><span class="blind">매장으로 전화하기</span></a></dd>
      </dl>
  </li>
  {{/list}}
</script>
<script>
  $(document).ready(function () {
    var data = '<%- isSearch ? JSON.stringify(params) : undefined %>';
    if (!!data) {
        data = JSON.parse(data);
    }
    new Tw.CustomerAgentsearch($('.wrap'), data);
  });
</script>
<% include ../../components/end.component.html %>
