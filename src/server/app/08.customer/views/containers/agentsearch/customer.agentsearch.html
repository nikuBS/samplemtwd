<%#
* @file customer.agentsearch.search.html
* @author Hakjoon Sim (hakjoon.sim@sk.com)
* @since 2018.10.16
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap">
        <%- include('../../../../common/views/components/header.component.html', { title: '지점/대리점 찾기', svcInfo: svcInfo }); %>
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <div class="container">
                <!-- .cont-box -->
                <h2 class="blind">내용</h2>
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <!-- .component -->
                    <div class="component">
                        <div class="component-box tabs">
                            <div class="tab-area type1"><!-- 타입별 탭형태 변환 -->
                                <div class="tab-linker">
                                    <ul role="tablist">
                                        <li role="presentation" class="fe-tab" aria-selected="true" aria-controls="tab1-tab" id="tab1">
                                            <a  role="tab" aria-selected="true" class="fe-custom-replace-history" href="#name">매장명</a>
                                        </li><!-- 링크 이동시 활성화 된 탭에 aria-selected="true" 설정 -->
                                        <li role="presentation" class="fe-tab" aria-selected="false" aria-controls="tab2-tab" id="tab2">
                                            <a role="tab" aria-selected="false" class="fe-custom-replace-history" href="#addr">주소</a>
                                        </li>
                                        <li role="presentation" class="fe-tab" aria-selected="false" aria-controls="tab3-tab" id="tab3">
                                            <a role="tab" aria-selected="false" class="fe-custom-replace-history" href="#tube">지하철</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-contents">
                                    <ul>
                                        <li role="tabpanel" id="tab1-tab" aria-labelledby="tab1">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box pb0">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox">
                                                        <span class="input">
                                                            <input id="fe-input-name" type="text" title="지점/대리점명" placeholder="지점/대리점명" value="<%= isSearch && type === 'name' ? keyword : '' %>" autocomplete="off" />
                                                            <button id="fe-cancel-name" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span>
                                                    <!-- // .inputbox -->
                                                    <!-- .filter -->
                                                    <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div>
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-blue1">
                                                                <button id="fe-btn-search-name" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab2-tab" aria-labelledby="tab2">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box pb0">
                                                    <!-- .inputbox -->
                                                    <span class="inputbox">
                                                        <span class="input">
                                                            <input id="fe-input-addr" type="text" title="주소/지역명" placeholder="주소/지역명" value="<%= isSearch && type === 'addr' ? keyword : undefined %>" aria-labelledby="aria-citation-phone" autocomplete="off" />
                                                            <button id="fe-cancel-addr" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span>
                                                    <!-- // .inputbox -->
                                                    <!-- .filter -->
                                                    <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div>
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-blue1">
                                                                <button id="fe-btn-search-addr" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                        <li role="tabpanel" id="tab3-tab" aria-labelledby="tab3">
                                            <!-- .search-point -->
                                            <div class="search-point">
                                                <!-- .cont-box -->
                                                <div class="cont-box nogaps-btm">
                                                    <!-- 2019.02.22 역이름 검색 프로세스 수정-->
                                                    <!-- .filter -->
                                                    <div class="filter subway">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02" id="fe-select-area" title="지역선택" aria-haspopup="true">지역선택</button>
                                                        </div>
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type02" id="fe-select-line" title="노선선택" aria-haspopup="true">노선선택</button>
                                                        </div>
                                                    </div>
                                                    <!-- // .filter -->
                                                    <!-- .inputbox -->
                                                    <span class="inputbox">
                                                        <span class="input">
                                                            <input id="fe-input-tube" type="text" title="지하철명" placeholder="정확한 역명 예) 홍대역(X), 홍대입구역(O)" value="<%= isSearch && type === 'tube' ? keyword : undefined %>" aria-labelledby="aria-citation-phone" autocomplete="off" />
                                                            <button id="fe-cancel-tube" class="cancel"><span class="blind">삭제</span></button>
                                                        </span>
                                                    </span>
                                                    <!-- // .inputbox -->
                                                    <!-- .filter -->
                                                    <div class="filter">
                                                        <div class="inline">
                                                            <button class="bt-dropdown text-type01 fe-options" title="검색조건" aria-haspopup="true"><%= isSearch ? optionsText : '전체' %></button>
                                                        </div>
                                                    </div>
                                                    <!-- // .filter -->
                                                    <!-- .btn-search -->
                                                    <div class="btn-search">
                                                        <ul class="bt-slice">
                                                            <li class="bt-blue1">
                                                                <button id="fe-btn-search-tube" <%= isSearch ? undefined : 'disabled' %>>검색</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <!-- // .btn-search -->
                                                </div>
                                                <!-- // .cont-box -->
                                            </div>
                                            <!-- // .search-point -->
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--// .component -->
                </div>
                <!--// .cont-box -->
                <!-- .cont-box -->
                <div class="cont-box pt0">
                    <!-- .search-point -->
                    <div class="search-point">
                        <div class="fe-none fe-result <%= isSearch && result.totalCount === 0 ? undefined : 'none' %>">
                            <!-- .ti-caption-gray -->
                            <div class="ti-caption-gray">
                                <h3 class="tit">총 <em>0</em>개의 매장이 검색되었습니다.</h3>
                            </div>
                            <!-- // .ti-caption-gray -->
                            <!-- .contents-empty -->
                            <div class="contents-empty">
                                <span class="ico type1"></span>
                                <p class="desc">검색 결과가 없습니다.<br /><strong>다시 검색해주세요.</strong></p>
                            </div>
                            <!-- // .contents-empty -->
                        </div>

                        <div class="fe-result <%= isSearch && result.totalCount > '0' ? undefined : 'none' %>">
                            <!-- .ti-caption-gray -->
                            <div class="ti-caption-gray">
                                <h3 class="tit">총 <em id="fe-result-count"><%= isSearch ? result.totalCount : '0' %></em>개의 매장이 검색되었습니다.</h3>
                            </div>
                            <!-- // .ti-caption-gray -->
                            <!-- .shop-info -->
                            <div class="shop-info">
                                <div class="shop-txt">
                                    <ul id="fe-result-list">
                                        <% if (isSearch && result.regionInfoList.length > 0) { %>
                                        <% for (let i = 0; i < result.regionInfoList.length; i++) { %>
                                        <li>
                                            <dl class="type02 fe-branch-detail" value="<%= result.regionInfoList[i].locCode %>">
                                                <dt><%= result.regionInfoList[i].storeName %></dt>
                                                <dd><%= result.regionInfoList[i].searchAddr %><br><%= result.regionInfoList[i].jibunAddr %>
                                                    <a class="bt-tel" href="tel:<%= result.regionInfoList[i].tel %>" alt="매장으로 전화하기"><span class="blind">매장으로 전화하기</span></a>
                                                </dd>
                                            </dl>
                                        </li>
                                        <% } %>
                                        <% } %>
                                    </ul>
                                </div>
                            </div>
                            <!-- // .shop-info -->
                            <!-- .btn-more -->
                            <!-- <div class="btn-more <ejs isSearch && result.lastPageType === 'N' ? undefined : 'none' ejs>"> -->
                                <!-- <div class="bt-more"> -->
                                    <!-- <button role="button" title="">더보기</button> -->
                                <!-- </div> -->
                            <!-- </div> -->
                            <!-- // .btn-more -->
                            <% if (isSearch && result.totalCount > 20) { %>
                            <div class="paging-wrap top-line type1">
                                <div class="paging">
                                    <% if (lastPage > 3) { %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-first" data-page="1" class="first <%= page === 1 ? 'disabled' : '' %>"><span class="pg-blind">처음 페이지로 이동</span></a>
                                    <% } %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-prev" data-page="<%= page - 1 %>" class="prev <%= page === 1 ? 'disabled' : '' %>"><span class="pg-blind">이전 페이지로 이동</span></a>
                                    <% const start = page - (page % 3 === 0 ? 2 : page % 3 - 1) %>
                                    <% const end = start + 2 >= lastPage ? lastPage : start + 2; %>
                                    <% for (let i = start; i <= end; i += 1) { %>
                                    <% if (i === page) { %>
                                    <a href="javascript:void(0)" role="button" class="active fe-go-page" title="현재페이지"><%= i %></a>
                                    <% } else { %>
                                    <a href="javascript:void(0)" role="button" class="fe-go-page"><%= i %></a>
                                    <% } %>
                                    <% } %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-next" data-page="<%= page + 1 %>" class="next <%= page === lastPage ? 'disabled' : '' %>"><span class="pg-blind">다음 페이지로 이동</span></a><!-- 비활성화시 disabled 클래스 추가 -->
                                    <% if (lastPage > 3) { %>
                                    <a href="javascript:void(0)" role="button" id="fe-go-last" data-page="<%= lastPage %>" class="last <%= page === lastPage ? 'disabled' : '' %>"><span class="pg-blind">마지막 페이지로 이동</span></a>
                                    <% } %>
                                </div>
                            </div>
                            <% } %>
                        </div>

                        <!-- .bn-search -->
                        <div class="bn-search">
                            <div class="inner">
                                <span class="ico"></span>
                                <div class="txt">
                                    나의 위치와
                                    <strong>가까운 매장을 찾아보세요</strong>
                                    <a class="bt-link-tx underline" href="/customer/agentsearch/near">찾아보기</a>
                                </div>
                            </div>
                        </div>
                        <!-- // .bn-search -->
                        <!-- .hours-of-business -->
                        <div class="hours-of-business">
                            <div class="tit">업무시간 안내</div>
                            <div class="as-time-list">
                                <dl>
                                    <dt>일반지점</dt>
                                    <dd>(월~금) 09:00 ~ 18:00</dd>
                                </dl>
                                <p class="stitle">대리점 복합형 지점</p>
                                <dl class="subtext-dl">
                                    <dt class="title">창원, 마산</dt>
                                    <dd class="text">(월~금) 09:00 ~ 18:00</dd>
                                </dl>
                                <p class="stitle">특수상권</p>
                                <dl class="subtext-dl">
                                    <dt class="title">테크노마트</dt>
                                    <dd class="text">(월~금) 09:00 ~ 18:00</dd>
                                </dl>
                                <p class="stitle">소형지점</p>
                                <dl class="subtext-dl">
                                    <dt class="title">경주, 거제</dt>
                                    <dd class="text">(월~금) 09:30 ~ 18:30</dd>
                                </dl>
                                <dl class="subtext-dl">
                                    <dt class="title">부천, 구미, 충주, 서산, 순천, 군산</dt>
                                    <dd class="text">(월~금) 09:00 ~ 18:00</dd>
                                </dl>
                            </div>
                            <p class="dot">대리점 업무시간은 매장마다 다릅니다.</p>
                            <p class="dot">토, 일요일 및 공휴일 휴무</p>
                        </div>
                        <!-- // .hours-of-business -->
                    </div>
                    <!-- // .search-point -->
                </div>
                <!--// .cont-box -->
            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>
<% include ../../components/javascript.component.html %>
<script type="text/template" id="tpl_search_result_item">
  {{#list}}
  <li>
      <dl class="type02 fe-branch-detail" value={{locCode}}>
          <dt>{{storeName}}</dt>
          <dd>{{searchAddr}}<br>{{jibunAddr}}<a class="bt-tel" href="tel:{{tel}}"><span class="blind">매장으로 전화하기</span></a></dd>
      </dl>
  </li>
  {{/list}}
</script>
<script>
  $(document).ready(function () {
    var data = '<%- isSearch ? JSON.stringify(params) : undefined %>';
    if (!!data) {
        data = JSON.parse(data);
    }
    new Tw.CustomerAgentsearch($('.wrap'), data);
  });
</script>
<% include ../../components/end.component.html %>