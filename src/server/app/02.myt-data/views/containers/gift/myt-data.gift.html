<%#
* @file myt-data.gift.html
* @author Jiman Park (jiman.park@sk.com)
* @since 2018.09.06
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body class="bg-white">
<div class="wrap" data-menuId="<%= pageInfo.menuId %>">
    <div class="popup-page tw-popup nobg fixed-bottom h60">
    <!-- #header -->
    <%- include('../components/header.component.html', { title: 'T끼리 데이터 선물', type: 'popup', headerClass: 'noborder', svcInfo: svcInfo, pageInfo: pageInfo }); %>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <h2 class="blind">내용</h2>
        <div class="container">
            <!-- .cont-box -->
            <div class="cont-box nogaps bgnone noborder">
                <div class="component">
                    <div class="component-box tabs">
                        <div class="tab-area new01"><!-- 타입별 탭형태 변환 -->
                            <div class="tab-linker">
                                <ul role="tablist" style="width: 100%;">
                                    <li role="presentation" aria-selected="true" aria-controls="tab1-tab" id="tab1">
                                        <a role="tab" aria-selected="true" class="fe-replace-history fe-gift-tab" href="/myt-data/giftdata">바로 선물</a>
                                    </li>
                                    <!-- 링크 이동시 활성화 된 탭에 aria-selected="true" 설정 -->
                                    <% if ( autoList ) { %>
                                    <li role="presentation" aria-selected="false" aria-controls="tab2-tab" id="tab2">
                                        <a role="tab" aria-selected="false" class="fe-replace-history fe-gift-tab" href="/myt-data/giftdata?auto=true#auto">자동 선물 (<span><%-autoList.length%></span>)</a>
                                    </li>
                                    <% } %>
                                </ul>
                            </div>
                            <div class="tab-contents">
                                <ul>
                                    <li role="tabpanel" id="tab1-tab" aria-labelledby="tab1" aria-selected="true">
                                        <% include ../../components/gift/myt-data.gift.immediately.html %>
                                    </li>
                                    <li role="tabpanel" id="tab2-tab" aria-labelledby="tab2" aria-selected="true">
                                        <% include ../../components/gift/myt-data.gift.monthly.html %>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--// .cont-box -->
        </div>
        <div class="bt-fixed-area">
            <ul class="bt-slice full">
                <li class="bt-red1">
                    <button class="fe-request_sending_data" disabled>선물하기</button>
                    <button class="fe-request_sending_auto" disabled style="display:none;">선물하기</button>
                </li>
            </ul>
        </div>
    </div>
    <!--// #contents -->
    <!--<div class="popup-page tw-popup fe-layer_available_product" style="display:none"></div>-->
    <button class="prev-step fe-common-back">취소</button>
    </div>
</div>
</body>

<script type="text/x-handlebars-template" id="tpl-available-product">
    <!-- #header -->
    <div class="header-wrap">
        <div class="page-header">
            <div class="header-ti">
                <h1>선물 가능한 대상자 요금제</h1>
            </div>
        </div>
    </div>
    <!--// #header -->
    <!-- .container-wrap -->
    <div class="container-wrap">
        <h2 class="blind">내용</h2>
        <div class="container">
            {{#each sortedList}}
            <div class="ti-caption-gray">
                <span class="tit">{{initial}}</span>
            </div>
            <!-- .cont-box -->
            <div class="cont-box">
                <ul class="round-dot-list">
                    {{#each item}}
                    <li>{{prodNm}}</li>
                    {{/each}}
                </ul>
            </div>
            {{/each}}
        </div>
    </div>
    <!-- // .container-wrap -->
    <!-- .popup-closeBtn -->
    <button class="popup-closeBtn fe-close-available_product"><span class="blind">팝업 페이지 닫기</span></button>
    <!--// .popup-closeBtn -->
</script>

<script type="text/x-handlebars-template" id="tpl_recently_gift">
    {{#each contactList}}
    <li class="fe-opdtm" data-opdtm="{{opDtm}}">
        <button class="tel-select">{{svcNum}}</button>
        <!--<button class="del-bt">삭제</button>-->
    </li>
    {{/each}}
</script>

<script type="text/x-handlebars-template" id="tpl_immediately_error">
    <hr class="cont-sp type1" aria-hidden="true">
    <div class="cont-box nogaps">
        <p class="addree-no-result result-nolist no-sch">
            <span class="ico"></span>
            <span class="msg-no-sch"><span class="txt fe-immediately-error">{{{content}}}</span></span>
        </p>
    </div>
</script>

<script type="text/x-handlebars-template" id="tpl_immediately_limit_error">
    <div class="result-nolist">
        <i class="ico"></i>
        <p>{{{content}}}</p>
    </div>
</script>

<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    var oMyTDataGiftImmediately = new Tw.MyTDataGiftImmediately($('#tab1-tab'), '<%- JSON.stringify(svcInfo) %>');
    var oMyTDataGiftMonthly = new Tw.MyTDataGiftMonthly($('#tab2-tab'), '<%- JSON.stringify(svcInfo) %>');
    var oMyTDataGift = new Tw.MyTDataGift($('.wrap'), '<%- JSON.stringify(svcInfo) %>', '<%- JSON.stringify(lteProdIds) %>');
  });
</script>
<% include ../../components/end.component.html %>
