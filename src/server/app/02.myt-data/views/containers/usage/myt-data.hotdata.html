<%#
* MenuName: 나의 데이터/통화 > 실시간 잔여량
* @file myt-data.hotdata.html
* @author 이정민 (skt.p130713@partner.sk.com)
* @since 2018.11.28
* Summary: 실시간 휴대폰 잔여량 및 부가 서비스 조회 화면
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
    </ul>
</div>
<div id="myt-data-hotdata" class="wrap" data-menuId="<%= pageInfo.menuId %>">
    <!-- #header -->
    <%- include('../../../../../common/views/components/header.component.html', { title: '실시간 잔여량', svcInfo: svcInfo }); %>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <div class="container">
            <hr class="cont-sp type1" aria-hidden="true" />
            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <div class="calling-plan">
                    <a class="wrap-link" href="/myt-join/myplan">
                        <!-- DV001-14236 뱃지 MY-> 이용중으로 변경 -->
                        <i class="badge icon-badge-plan-my use"><span class="blind">이용 중</span></i>
                        <span class="stit"><%= svcInfo && svcInfo.prodNm %></span>
                    </a>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />

            <% if (usageData && usageData.data && usageData.data.length > 0) { %>
            <%- include('../../components/usage/myt-data.usage.circle-graphbox.html', { type: 'data', color: 'red', typeStr: '데이터', items: usageData.data, usageData: usageData }); %>
            <% } %>
            <!--// .cont-box -->

            <!--
            [DV001-9828] 기본제공 데이터는 없는데 데이터 함께쓰기에 가입된 경우 표시(통합공유데이터 영역이 없기때문에 바닥페이지에 표시함)
            SKTX_PRO_화면정의서_SKMT_My T_나의 데이터 통화_실시간 잔여량_DV001-9828_데이터함께쓰기표기case추가(부가....pptx
            -->
            <% if (usageData && !usageData.hasDefaultData && balanceAddOns && balanceAddOns.dataSharing === 'Y') { %>
            <div id="fe-data-share" class="cont-box pb0">
                <div class="ti-caption-type01 fe-data-share-header">
                    <h2 class="tit">데이터 함께쓰기
                        <button class="btn-tip" id="TC000003" aria-haspopup="true"><i
                            class="icon-badge-tip"><span class="blind">tip</span></i></button>
                    </h2>
                    <p class="num">총 사용
                        <em></em>
                        <span></span>
                    </p>
                </div>
                <div class="data-list-type1">
                    <script id="fe-child-tmpl" type="text/x-handlebars-template">
                        <li>
                            <span class="stit">{{ feeProdNm }}</span>
                            <div class="sta">
                                <span>설정일: {{ auditDtm }}</span>
                                <span class="txt-type1">{{ svcNum }}</span>
                            </div>
                            <span class="use btn">
                                <button type="button" class="btn-round2 btn-style3 fe-btn-used-data" data-svcmgmtnum="{{ svcMgmtNum }}">조회</button>
                                <span class="fe-used-data-result" style="display: none;">
                                    <strong>
                                        <span class="str fe-data"></span>
                                        <span class="fe-unit"></span>
                                    </strong>사용
                                </span>
                            </span>
                        </li>
                    </script>
                    <ul class="type1 fe-children"></ul>
                </div>

            </div>
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } %>

            <% if (balanceAddOns && balanceAddOns.tdataSharing === 'Y') { %>
            <div id="fe-tdata-share" class="cont-box pb0">
                <div id="fe-head-tdata-share" class="ti-caption-type01">
                    <h2 class="tit">T데이터셰어링
                        <span></span>
                    </h2>
                    <p class="num">총 사용
                        <em>0</em>
                        <span>GB</span>
                    </p>
                </div>
                <div class="data-list-type1">
                    <script id="fe-tdata-share-child-item" type="text/x-handlebars-template">
                        <li>
                            <span class="stit">{{ usimFormat usimNum }}</span>
                            <div class="sta">
                                <span>{{ dateFormat svcScrbDt }}</span>
                                <span>
                                        {{ svcStNm }}
                                        {{#if isUsing }}
                                        <a class="bt-link-tx underline" href="/myt-data/hotdata/cancel-tshare?cSvcMgmtNum={{cSvcMgmtNum}}" role="button">해지하기</a>
                                        {{/if}}
                                    </span>
                            </div>
                            <span class="use">
                                    <strong>{{ byteFormat useAmt }}{{ byteUnit useAmt}}</strong>
                                    사용
                                </span>
                        </li>
                    </script>
                    <ul class="type1" id="fe-list-tdata-share">
                    </ul>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } else { %>
            <!--<div class="cont-box nogaps">-->
                <!--<div class="t-data-sharing">-->
                    <!--<a class="submain-findyourplan" href="/product/callplan?prod_id=NA00002887" style="color: #fff;">-->
                        <!--<strong>T데이터셰어링 이용해보기</strong>-->
                        <!--<p>하나의 데이터 요금으로 여러 디지털기기 이용하기 &gt;</p>-->
                    <!--</a>-->
                <!--</div>-->
            <!--</div>-->
            <!--<hr class="cont-sp type1" aria-hidden="true" />-->
            <% } %>

            <% if (balanceAddOns && balanceAddOns.troamingSharing === 'Y') { %>
            <!-- .cont-box -->
            <div id="fe-troaming-share" class="cont-box pb0">
                <div id="fe-head-troaming-share" class="ti-caption-type01 pb20">
                    <% if (balanceAddOns && balanceAddOns.troamingData === 'Y') { %>
                    <div class="calling-plan1">
                        <a role="button" href="/product/roaming/my-use" class="wrap-link" style="padding: 0;">
                            <span class="stit">T로밍 데이터 잔여량</span>
                        </a>
                    </div>
                    <% } else { %>
                    <h2 class="tit">T로밍 데이터 잔여량</h2>
                    <% } %>
                    <p class="num">총 잔여량
                        <em>0</em>GB
                    </p>
                </div>
                <ul id="fe-cont-troaming-share" class="date-graph-list">
                    <li>
                        <div class="left">
                            <div class="donut-chart small">
                                <div class="donut-chart-area">
                                    <!-- loop -->
                                    <div id="fe-troaming-share-graph" class="c100"><!-- .p+(0~100) // -->
                                        <div class="red"><!-- red, yellow, green, blue // -->
                                            <div class="slice">
                                                <div class="bar"></div>
                                                <div class="fill"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- // loop -->
                                </div>
                            </div>
                        </div>
                        <div class="cont">
                            <span class="txt1 graphbox-title"></span>
                            <div class="date">
                                <span class="remain data-state">
                                    <strong>
                                        <em></em>
                                        <em></em>
                                    </strong> 남음
                                </span>
                                <span class="use data-state">
                                    <strong>
                                        <em></em>
                                        <em></em>
                                    </strong> 사용
                                </span>
                            </div>
                            <span class="txt3 fe-chargedate-box">
                                <span></span>
                                남음
                            </span>
                        </div>
                    </li>
                </ul>
                <div class="data-list-type1">
                    <script id="fe-troaming-share-child-item" type="text/x-handlebars-template">
                        <li>
                            <span class="stit">{{ dashPhoneNum svcNum }}</span>
                            <div class="sta">
                                <span>설정일 {{ dateFormat auditDtm }}</span>
                            </div>
                            <span class="use"><strong>{{ byteFormat used }}{{ byteUnit used }}</strong>사용</span>
                        </li>
                    </script>
                    <ul id="fe-list-troaming-share">
                    </ul>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } else { %>
                <% if (balanceAddOns && balanceAddOns.troamingData === 'Y') { %>
                <div class="cont-box calling-plan">
                    <a role="button" href="/product/roaming/my-use" class="wrap-link" style="padding: 0;">
                        <span class="stit">T로밍 데이터 잔여량</span>
                    </a>
                </div>
                <hr class="cont-sp type1" aria-hidden="true" />
                <% } %>
            <% } %>

            <% if (usageData && usageData.dataTopUp === 'Y') { %>
            <!-- .cont-box -->
            <div id="fe-cont-data-limit" class="cont-box pb0">
                <div class="ti-caption-type01">
                    <h2 class="tit">데이터 한도 요금제 잔여량</h2>
                    <p class="r-btn"><button type="button" class="btn-round3 btn-style3 fe-btn-recharge">충전하기</button></p>
                </div>
                <div class="data-list-type1">
                    <ul class="type1">
                        <li>
                            <span class="stit fe-skipnm">기본 데이터 충전</span>
                            <div class="sta">
                                <span>
                                    충전 금액:
                                    <span class="fe-recharge-amt"></span>
                                원</span>
                            </div>
                            <span class="use">
                                <strong>
                                    <span class="fe-remain-amt"></span>
                                원</strong>남음
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } %>

            <% if (usageData && usageData.ting === 'Y') { %>
            <!-- .cont-box -->
            <div class="cont-box pb0">
                <div class="ti-caption-type01">
                    <h2 class="tit">팅 요금제 잔여량<button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_08"><i class="icon-badge-tip"><span class="blind">tip</span></i></button></h2>
                </div>
                <div class="data-list-type1">
                    <script id="fe-ting-child-item" type="text/x-handlebars-template">
                        <li>
                            <span class="stit">{{ skipLabel }}</span>
                            <div class="sta">
                                <span>{{ skipNm }}</span>
                            </div>
                            <span class="use"><strong>{{ numComma remained }}
                                {{ unitLabel }}
                            </strong>남음</span>
                        </li>
                    </script>
                    <ul id="fe-list-ting" class="type1">
                    </ul>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } %>

            <% if (usageData && usageData.dataDiscount === 'Y') { %>
            <!-- .cont-box -->
            <div class="cont-box pb0">
                <div class="ti-caption-type01">
                    <h2 class="tit">24시간 데이터 50% 할인 사용량<button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_09"><i class="icon-badge-tip"><span class="blind">tip</span></i></button></h2>
                </div>
                <div id="fe-cont-discount" class="data-list-type1">
                    <ul class="type1">
                        <li>
                            <span class="stit">할인된 데이터</span>
                            <div class="sta">
                                <span class="fe-use-date"></span>
                            </div>
                            <span class="use">
                                <strong class="fe-use-data"><span></span><span></span></strong>사용
                            </span>
                        </li>
                    </ul>
                    <div class="btn-more">
                        <button>실시간 이용요금 바로가기</button>
                    </div>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } %>


            <% if (balanceAddOns && balanceAddOns.bandDataSharing === 'Y') { %>
            <!-- .cont-box -->
            <div class="cont-box pb0">
                <div id="head-band-data-share" class="ti-caption-type01">
                    <h2 class="tit">내폰끼리 결합 사용량</h2>
                    <p class="num">총 사용
                        <em></em><span></span>
                    </p>
                </div>
                <div class="data-list-type1">
                    <ul id="list-band-data-share" class="type1">
                    </ul>
                    <script id="fe-band-data-share-li" type="text/x-handlebars-template">
                        <li>
                            <span class="stit">{{ feeProdNm }}</span>
                            <div class="sta">
                                <span>설정일: {{ dateFormat auditDtm }}</span>
                                <span class="f-type1">{{ dashPhoneNum svcNum }}</span>
                            </div>
                            <span class="use" data-child-svcnum="{{ svcMgmtNum }}">
                                <button type="button" class="btn-round2 btn-style3 fe-btn-request">조회</button>
                            </span>
                        </li>
                    </script>
                    <script id="fe-band-data-share-li-detail" type="text/x-handlebars-template">
                        <strong>
                            {{ byteFormat used }}{{ byteUnit used }}
                        </strong> 사용
                    </script>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <% } %>



            <% if (usageData && usageData.voice && usageData.voice.length > 0) { %>
            <%- include('../../components/usage/myt-data.usage.circle-graphbox.html', { type: 'voice', color: 'green', typeStr: '음성통화·영상통화', items: usageData.voice }); %>
            <% } %>

            <% if (usageData && usageData.sms && usageData.sms.length > 0) { %>
            <%- include('../../components/usage/myt-data.usage.circle-graphbox.html', { type: 'sms', color: 'yellow', typeStr: '문자', items: usageData.sms }); %>
            <% } %>

            <% if (usageData && usageData.etc && usageData.etc.length > 0) { %>
            <%- include('../../components/usage/myt-data.usage.circle-graphbox.html', { type: 'etc', color: 'blue', typeStr: '기타', items: usageData.etc }); %>
            <% } %>


            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                <ul class="pg-chk-list02">
                    <% if (isWireLess) { %>
                    <!--접근성 수정-->
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_01">실시간 사용량 조회 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_02">실시간 사용량 조회가 불가능한 경우<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_03">월중 요금상품 변경, 일시정지 시 유의사항<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_04">마이벨 서비스/다다익선요금제 이용 가능 고객 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_07">사용량 조회 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_05">이용제한/자동해지 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_06">유심 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <!-- //접근성 수정-->
                    <% } else { %>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_01">실시간 사용량 조회 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_02">실시간 사용량 조회가 불가능한 경우<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_03">월중 요금상품 변경, 일시정지 시 유의사항<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li><button class="btn-tip" aria-haspopup="true" id="DC_01_01_tip_04">마이벨 서비스/다다익선요금제 이용 가능 고객 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <% } %>
                </ul>
            </div>

        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
</div>

<!--// #skip_navigation -->
<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    new Tw.MyTDataUsage($('#myt-data-hotdata'), {
      svcAttrCd : '<%= svcInfo && svcInfo.svcAttrCd %>',
      hasDefaultData: '<%= usageData && usageData.hasDefaultData %>',
      dataSharing : '<%= balanceAddOns && balanceAddOns.dataSharing %>',
      tdataSharing : '<%= balanceAddOns && balanceAddOns.tdataSharing %>',
      troamingSharing : '<%= balanceAddOns && balanceAddOns.troamingSharing %>',
      dataTopUp : '<%= usageData && usageData.dataTopUp %>',
      ting : '<%= usageData && usageData.ting %>',
      dataDiscount : '<%= usageData && usageData.dataDiscount %>',
      bandDataSharing : '<%= balanceAddOns && balanceAddOns.bandDataSharing %>'
    });
  });
</script>
<% include ../../components/end.component.html %>
