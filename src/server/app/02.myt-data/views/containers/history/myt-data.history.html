<%#
* @file myt-data.history.html
* @author Jiyoung Jo
* @since 2018.09.20
* ID: DC_07
%>


<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <!-- Grand open 접근성 수정 -->
            <li><a href="#contents-area" class="fe-replace-history">본문 바로가기</a></li>
            <!--  //Grand open 접근성 수정 -->
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap" data-menuId="<%= pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../../common/views/components/header.component.html', { title: '최근 충전/선물 내역', svcInfo: svcInfo, pageInfo: locals.pageInfo }); %>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <h2 id="contents-area" tabindex="-1"><span class="blind">본문시작</span></h2>
            <div class="container noscroll">
                <% const TYPE_NAMES = ['T끼리 데이터 선물', '데이터 한도 요금', '팅 쿠키즈 안심요금', '팅 요금 선물', '데이터 음성 리필', '전체']; 
                const list = filterIdx === 5 ? chargeData.all : chargeData.display, DEFALUT_LIST_COUNT = 20; %>
                <div class="cont-box nogaps">
                    <div class="ti-caption-blue">
                        <div class="num">총 <em><%= list.length %></em>건</div>
                        <button class="bt-select" id="fe-type" title="최근 충전/선물 내역 보기유형 선택" aria-haspopup="true" <%= list.length === 0 ? 'disabled' : '' %>><%= TYPE_NAMES[filterIdx] %></button>
                    </div>

                    <div class="cont-box pt0 pb0">
                        <div class="list-comp-history type01">
                            <ul class="comp-box" data-filter-index="<%= filterIdx %>">
                                <% const length = Math.min(list.length, DEFALUT_LIST_COUNT);
                                for (let i = 0; i < length; i++) { 
                                    const item = list[i]; %>
                                    <li class="list-box">
                                        <span class="badge"><i class="icon-<%= item.badge %>-88"><span class="blind"><%= item.badgeName %></span></i></span>
                                        <ul class="list-con">
                                            <li>
                                                <p class="list-text">
                                                    <span class="stext-b"><%= item.typeName %></span>
                                                    <span class="stext">
                                                        <% item.bottom.map(data => { %><span class="gray-tx"><%= data%></span><% }); %>
                                                        <% if (item.refundable) { %><button class="bt-link-tx underline fe-cancel">취소</button><% } %>
                                                    </span>
                                                </p>
                                                <div class="list-data">
                                                    <p class="data-tx ff-tg-black"><%= item.right %></p>
                                                    <span class="date"><%= item.date %></span>
                                                </div>
                                            </li>
                                        </ul>
                                    </li>                       
                                <% } %>
                            </ul>
                        </div>
                    </div>

                    <div class="result-none <%= list.length > 0 ? 'none': '' %>" aria-hidden="<%= list.length > 0 %>">
                        충전/선물 내역이 없습니다.
                    </div>
                    <% const leftCount = list.length - DEFALUT_LIST_COUNT; %>
                    <div class="bt-more <%= leftCount > 0 ? '' : 'none' %>" aria-hidden="<%= leftCount <= 0 %>"><button>더 보기</button></div>
                </div>
                <!--// .cont-box -->

                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                    <ul class="pg-chk-list02">
                        <li><button id="DC_07_tip_04" type="button" class="btn-tip" aria-haspopup="true">T끼리 데이터 선물 내역 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button id="DC_07_tip_05" type="button" class="btn-tip" aria-haspopup="true">리필 쿠폰 사용내역 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button id="DC_07_tip_01" type="button" class="btn-tip" aria-haspopup="true">팅 요금제 충전 선물 내역 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button id="DC_07_tip_02" type="button" class="btn-tip" aria-haspopup="true">T팅/쿠키즈 요금한도 충전 내역 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button id="DC_07_tip_03" type="button" class="btn-tip" aria-haspopup="true">데이터 한도 요금제 충전 내역 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    </ul>
                </div>
            </div>
        </div>
        <!--// #contents -->
        <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
    </div>
</body>
<%- include ../../components/history/myt-data.history.list.html %>
<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function() {
    new Tw.MyTDataHistory($('.wrap'), JSON.parse('<%- JSON.stringify(chargeData) %>'));
  });
</script>
<% include ../../components/end.component.html %>
