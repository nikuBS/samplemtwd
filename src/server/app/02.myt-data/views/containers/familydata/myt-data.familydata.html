<%#
* FileName: myt-data.familydata.html
* Author: Jiyoung Jo (jiyoungjo@sk.com)
* Date: 2018.09.28
* id: DC_02
%>

<% include ../../components/start.component.html %>
<body>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#gnb">메뉴 바로가기</a></li>
        <li><a href="#contents">본문 바로가기</a></li>
        <li><a href="#footer">푸터 바로가기</a></li>
    </ul>
</div>
<!--// #skip_navigation -->
<div class="wrap" data-menuId="<%= pageInfo.menuId %>">
    <!-- #header -->
    <%- include('../../../common/views/components/header.component.html', { title: 'T가족모아데이터', svcInfo: svcInfo }); %>
    <% const INFINITY = 'NA00005959'; %>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap">
        <h2 class="blind">내용</h2>
        <div class="container">
            <hr class="cont-sp type1" aria-hidden="true" />
            <!-- .cont-box -->
            <div class="cont-box nogaps">
                <% if (familyInfo.mine) { %>
                <ul class="data-realtime-wrap">
                    <li>
                        <div class="graph">
                            <div class="donut-chart small">
                                <div class="donut-chart-area">
                                    <!-- loop -->
                                    <div class="c100 p<%= familyInfo.mine.ratio %>"><!-- .p+(0~100) // -->
                                        <div class="blue"><!-- red, yellow, green, blue // -->
                                            <div class="slice">
                                                <div class="bar"></div>
                                                <div class="fill"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- // loop -->
                                </div>
                            </div>
                        </div>
                        <div class="cont">
                            <span class="stit">나의 T가족모아데이터<button id="DC_02_tip_01" class="btn-tip"><i class="icon-badge-tip"><span class="blind">tip</span></i></button></span>
                            <% if (familyInfo.mine.prodId === INFINITY) { %>
                                <span class="txt1"><span class="ff-type1">0GB</span> (Data 인피니티 이용)</span>
                            <% } else { %>
                                <span class="txt1"><span class="ff-type1"><%= familyInfo.mine.remained.data + familyInfo.mine.remained.unit %></span>남음</span>
                            <% } %>
                        </div>
                        <% if (familyInfo.mine.shrblYn === "Y") { %>
                        <span class="btn-r">
                            <a href="/myt-data/familydata/share" class="btn-round2 btn-style3">공유</a>
                        </span>
                        <% } %>
                    </li>
                </ul>
                <% } %>
                <div class="total-data">
                    <span class="stit">총 가족 공유 데이터</span>
                    <span class="r-txt"><span class="ff-type1"><%= familyInfo.total + 'GB' %></span></span>
                </div>
            </div>
            <!--// .cont-box -->
            <hr class="cont-sp type1" aria-hidden="true" />
            <div class="cont-box">
                <div class="ti-caption-type01">
                    <h2 class="tit">이용현황</h2>
                </div>
                <div class="use-state-wrap">
                    <ul>
                        <% familyInfo.mbrList.map(member => { 
                            const isInfinity = member.prodId === INFINITY; %>
                            <li data-member="<%= JSON.stringify({ name: member.custNm, svcNum: member.svcNum, isRepresentation: member.repYn === 'Y', mgmtNum: member.svcMgmtNum }) %>">
                                <span class="icon"><i class="icon-cellphone-48"><span class="blind">cellphone</span></i></span>
                                <div class="info">
                                    <span class="stit">
                                        <%= member.custNm %>
                                        <% if (member.repYn === 'Y') { %>
                                            <span class="sicon"><i class="icon-f-delegate"><span class="blind">가족대표</span></i></span>
                                        <% } %>
                                    </span>
                                    <span class="r-txt">
                                        <% if (isInfinity) { %>
                                            <span class="ff-type1">무제한</span>
                                        <% } else { %>
                                            <span class="ff-type1"><%= member.used.data + member.used.unit %></span>이용
                                        <% } %>
                                    </span>
                                    <p><%= member.svcNum %></p>
                                </div>
                                <div class="detail">
                                    <dl>
                                        <dt>이용요금제</dt>
                                        <dd><%= member.prodNm %></dd>
                                        <dt>공유한 데이터</dt>
                                        <dd><%= member.shared %>GB</dd>
                                        <% if (!isInfinity) { %>
                                            <dt>이용한도</dt>
                                            <dd>
                                                <span><%= member.limitedYn === 'Y' ? member.limitation + 'GB' : '자유 사용' %></span>
                                                <% if (familyInfo.isRepresentation) { %>
                                                <button class="bt-link-tx underline fe-setting-limit" data-limitation="<%= member.limitedYn === 'Y' && member.limitation %>">설정</button>
                                                <% } %>
                                            </dd>
                                        <% } %>
                                    </dl>
                                </div>
                            </li>
                        <% }); %>
                    </ul>
                </div>
            </div>
            <!--// .cont-box -->

            <hr class="cont-sp type1" aria-hidden="true">

            <!-- .cont-box -->
            <!-- 범위 제외 -->
            <!-- <div class="cont-box nogaps">
                <div class="calling-plan type3">
                    <button class="wrap-link fs-type01">
                        <span class="left">이번달 공유내역 / 회수하기</span>
                        <span class="right fc-type01"><strong class="fs-type03">28건</strong></span>
                    </button>
                </div>
            </div> -->
            <!--// .cont-box -->

            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                <ul class="pg-chk-list">
                    <li>T가족모아데이터 유의사항<button id="DC_02_tip_02" class="btn-tip"><i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    <li>T가족모아데이터 이용한도 설정 안내<button id="DC_02_tip_03" class="btn-tip"><i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                </ul>
            </div>
        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../common/views/components/footer.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
</div>
</body>
<% include ../../components/javascript.component.html %>
<script>
  $(document).ready(function () {
    new Tw.MyTDataFamily($('.container-wrap'));
  });
</script>
<% include ../../components/end.component.html %>
