<%#
* @file myt-data.recharge.coupon.html (DC_05)
* @author Hakjoon Sim (hakjoon.sim@sk.com)
* @since 2018.09.17
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<body>
    <!-- #skip_navigation -->
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    <!--// #skip_navigation -->
    <div class="wrap" data-menuId="<%= pageInfo.menuId %>">
        <!-- #header -->
        <%- include('../../../../common/views/components/header.component.html', { title: '리필쿠폰', svcInfo: svcInfo }); %>
        <!--// #header -->
        <!-- #contents -->
        <div id="contents" class="container-wrap">
            <div class="container">
                <!-- .cont-box -->
                <% if (available !== 'ALL' && list.length !== 0) { %>
				<hr class="cont-sp type1" aria-hidden="true"/>
                <div class="cont-box">
                    <div class="refill-except">
                        <% if (available === 'NONE') { %>
                        <p><%= name %>님이 사용하시는 <%= product %> 요금제는 리필쿠폰을  사용할 수 없는 요금제입니다.</p>
                        <% } else if (available === 'DATA') { %>
                        <p><%= name %>님은 데이터 리필쿠폰만 사용 가능합니다.</p>
                        <% } else { %>
                        <p><%= name %>님은 음성 리필쿠폰만 사용 가능합니다.</p>
                        <% } %>
                        <span class="btn-area">
                            <button type="button" id="fe-btn-plans" class="btn-round1 btn-style4">대상 요금제 확인</button>
                        </span>
                    </div>
                </div>
                <% } %>

                <% if (list.length === 0) { %>
                <div class="cont-box nogaps-hoz">
                    <div class="result-none">
                        사용할 수 있는 쿠폰이 없습니다.
                    </div>
                </div>
                <% } else { %>
                <div class="cont-box bgnone pb0 <%= list.length > 20 ? '' : 'noborder' %>"><!-- 190207 더보기 버튼이 없을 경우에 .cont-box에 .noborder 추가-->
                    <ul class="coupon-list-wrap">
                        <% for (let i = 0; i < (list.length > 20 ? 20 : list.length); i++) { %>
                        <li>
                            <span class="icon"><i class="<%= list[i].isGift ? 'icon-gift-80' : 'icon-discount1-80' %>"></i></span>
                            <div class="cont">
                                <h2 class="tit"><%= list[i].copnNm %></h2>
                                <span class="txt1"><%= list[i].usePsblStaDt %>~<%= list[i].usePsblEndDt %></span>
                            </div>
                            <% if (available !== 'NONE') { %>
                            <div class="btn-wrap <%= list[i].isGift ? '' : 'two' %>">
                                <% if (!list[i].isGift) { %>
                                <button class="btn fe-btn-gift" data-id="<%= list[i].copnIsueNum %>" value="<%= list[i].copnNm%>::<%= list[i].usePsblStaDt %>~<%= list[i].usePsblEndDt %>::N">선물하기</button>
                                <% } %>
                                <button class="btn fe-btn-refill" data-id="<%= list[i].copnIsueNum %>" value="<%= list[i].copnNm%>::<%= list[i].usePsblStaDt %>~<%= list[i].usePsblEndDt %>::<%= list[i].isGift ? 'Y' : 'N' %>">리필하기</button>
                            </div>
                            <% } %>
                        </li>
                        <% } %>
                    </ul>
                    <% if (list.length > 20) { %>
                    <div class="bt-more bg-none font-type1">
                        <button>더 보기</button>
                    </div>
                    <% } %>
                </div>
                <!--// .cont-box -->
                <% } %>

                <div class="cont-box noborder bgnone">
                    <h3 class="pg-chk-tit">꼭 확인해 주세요</h3>
                    <ul class="pg-chk-list02">
                        <li><button class="btn-tip" id="DC_05_tip_01">리필하기 이용안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button class="btn-tip" id="DC_05_tip_02">유효기간 내 미사용 시 자동 소멸 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button class="btn-tip" id="DC_05_tip_03">가입기간별 제공 쿠폰 안내<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                        <li><button class="btn-tip" id="DC_05_tip_04">요금제별 유의사항<i class="icon-badge-tip"><span class="blind">tip</span></i></button></li>
                    </ul>
                </div>

            </div>
        </div>
        <!--// #contents -->
        <footer id="fe-all-menu">
            <%- include('../../../../common/views/components/footer.component.html', { svcInfo: svcInfo }); %>
            <%- include('../../../../common/views/components/masking.component.html', { svcInfo: svcInfo, pageInfo: pageInfo }); %>
        </footer>
    </div>
</body>
<% include ../../components/javascript.component.html %>
<script type="text/template" id="tpl_coupon_item">
  {{#list}}
  <li>
        <span class="icon"><i class="icon-discount1-80"></i></span>
        <div class="cont">
            <h2 class="tit">{{copnNm</h2>
            <span class="txt1">{{usePsblStaDt}}~{{usePsblEndDt}}</span>
        </div>
        <div class="btn-wrap two">
            {{#ifCond copnOperStCd '!==' 'A20'}}
            <button class="btn fe-btn-gift">선물하기</button>
            {{/ifCond}}
            <button class="btn fe-btn-refill">리필하기</button>
        </div>
    </li>
  {{/list}}
</script>
<script>
  $(document).ready(function () {
    new Tw.MyTDataRechargeCoupon($('.wrap'), '<%- JSON.stringify(list) %>');
  });
</script>
<% include ../../components/end.component.html %>