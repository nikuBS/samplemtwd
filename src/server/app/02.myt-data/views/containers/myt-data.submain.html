<%#
* @file myt-data.submain.html
* @author Kim InHwan (skt.p132150@partner.sk.com)
* @since 2018.09.17
* Update: 2018.11.26
%>

<%- include('../components/start.component.html', { pageInfo: data.pageInfo }); %>
<body>
<!-- #skip_navigation -->
<div id="skipNav" class="skip_navi">
    <ul>
        <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
        <!--<li><a class="fe-replace-history" href="#contents-area">본문 바로가기</a></li>-->
        <!-- 191115 웹접근성 수정_01 -->
    </ul>
</div>
<!--// #skip_navigation -->
<div class="wrap" data-menuId="<%= data.pageInfo.menuId %>">
    <!-- #header -->
    <%- include('../../../common/views/components/header.component.html', { title: '나의 데이터/통화', svcInfo: data.svcInfo,  pageInfo: data.pageInfo }); %>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap" data-id="wrapper">
        <h2 class="blind">내용</h2>
        <div class="container" data-id="submain-container">
            <%- include('../components/submain/myt-data.submain.remnant.html', data) %>

            <% if (data.svcInfo.svcAttrCd === 'M1') { %>
                <% if(data.refill) { %>
                <!-- .cont-box -->
                <hr class="cont-sp type1" aria-hidden="true"/>
                <!-- .cont-box -->
                <div class="cont-box nogaps">
                    <div class="recharge-sum-change">
                        <span>리필쿠폰
                            <button type="button" class="btn-tip" title="리필쿠폰" id="DC1_tip_01" page-id="DC1" aria-haspopup="true">
                                <i class="icon-badge-tip"><span class="blind">tip</span></i>
                            </button>
                        </span>
                        <button class="change txt1" data-id="refill"><%= data.refill.length %>장</button>
                    </div>
                </div>
                <!--// .cont-box -->
                <% } %>
            <% } else if (data.svcInfo.svcAttrCd === 'M2') { %>
                <hr class="cont-sp type1" aria-hidden="true"/>
                <div class="cont-box nogaps-hoz">
                    <ul class="full-link-list type1">
                        <li>
                            <button data-id="present">
                                    <span class="inner">
                                        <span class="tit">음성1회 자동알람 서비스</span>
                                        <span class="text"><strong>설정하기</strong></span>
                                    </span>
                            </button>
                        </li>
                    </ul>
                </div>
            <% } %>
            <!-- //.cont-box -->

            <% if (data.isPrepayment) { %>
            <!-- .coupon-genre-box -->
            <hr class="cont-sp type1" aria-hidden="true" />

            <!-- .cont-box -->
            <div class="cont-box">
                <div class="ti-caption-type01 pb20">
                    <h2 class="tit">선불쿠폰</h2>
                </div>
                <div class="prepayment-coupon" data-id="prepay-container">
                    <!-- .widget -->
                    <div class="widget">
                        <div class="widget-box horizontal">
                            <div class="horizontal-slide">
                                <ul class="horizontal-list add-prod">
                                    <li>
                                        <div class="bg01">
                                            <button type="button" data-type="data" title="T 데이터" aria-haspopup="true">
                                                <span class="stit">T 데이터</span>
                                                <span class="txt">국내 데이터 통화<br>선불쿠폰</span>
                                            </button>
                                        </div>
                                    </li>
                                    <!-- OP002-2865 [myT] (W-1907-166-01) T단기데이터 노출 화면 변경 및 메뉴 추가 요청 OP002-2928 start -->
                                    <li>
                                        <div class="bg05">
                                            <button type="button" data-type="sdata" title="T단기데이터" aria-haspopup="true">
                                                <span class="stit">T단기데이터</span>
                                                <span class="txt">표시된 기간,용량만큼<br>바로 충전</span>
                                            </button>
                                        </div>
                                    </li>
                                    <!-- OP002-2865 [myT] (W-1907-166-01) T단기데이터 노출 화면 변경 및 메뉴 추가 요청 OP002-2928 end -->
                                    <li>
                                        <div class="bg02">
                                            <button type="button" data-type="coupon" title="T 쿠폰" aria-haspopup="true">
                                                <span class="stit">T 쿠폰</span>
                                                <span class="txt">음성, 문자, 영상,<br>데이터통화 선불쿠폰</span>
                                            </button>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="bg03">
                                            <button type="button" data-type="jeju" title="제주도 프리" aria-haspopup="true">
                                                <span class="stit">제주도 프리</span>
                                                <span class="txt">제주도에서<br>
													원하는 기간 동안<br>
													데이터 프리</span>
                                            </button>
                                        </div>
                                    </li>
                                    <!-- OP002-2515 [myT] (W-1907-114-01) 옥수수 데이터 프리 가입중단(8.1)에 따른 영향도 파악 및 적용 OP002-2518 관련 삭제 start -->
                                    <!--
                                    <li>
                                        <div class="bg04">
                                            <button type="button" data-type="oksusu" title="oksusu" aria-haspopup="true">
                                                <span class="stit">oksusu</span>
                                                <span class="txt">데이터 프리</span>
                                            </button>
                                        </div>
                                    </li>
                                    -->
                                    <!-- OP002-2515 [myT] (W-1907-114-01) 옥수수 데이터 프리 가입중단(8.1)에 따른 영향도 파악 및 적용 OP002-2518 관련 삭제 end -->
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- .widget -->
                </div>
            </div>
            <!--// .coupon-genre-box -->
            <% } %>
            <!-- 충전/선물 내역 -->
            <% if (data.breakdownList && data.breakdownList.length > 0) { %>

            <hr class="cont-sp type1" aria-hidden="true" />

            <!-- .cont-box -->
            <div class="cont-box pb0" data-id="bd-container">
                <!-- 2019.02.20 패딩 간격 수정 pb20 -> pb14 -->
                <div class="ti-caption-type01 pb14">
                    <h2 class="tit">
                        <% if (data.svcInfo.svcAttrCd === 'M2') { %>
                        충전 내역
                        <% } else { %>
                        최근 충전·선물 내역
                        <% } %>
                    </h2>
                    <% var bkListUrl = '/myt-data/history'; %>
                    <% if (data.svcInfo.svcAttrCd === 'M2') { %>
                    <% bkListUrl = '/myt-data/recharge/prepaid/history'; %>
                    <% } %>
                    <span class="r-btn"><a href="<%= bkListUrl %>" class="more">더보기</a></span>
                </div>
                <div class="list-comp-history type01">
                    <ul class="comp-box">
                        <% if (data.svcInfo.svcAttrCd === 'M2') { %>
                        <%- include('../components/submain/myt-data.submain.breakdown-pps.html', { data: data.breakdownList }); %>
                        <% } else { %>
                        <%- include('../components/submain/myt-data.submain.breakdown.html', { data: data.breakdownList }); %>
                        <% } %>
                    </ul>
                </div>
            </div>
            <% } %>
            <!-- 사용량 -->
            <% if (data.isWireLess) { %>
                <%- include('../components/submain/myt-data.submain.recent-usages.html', data) %>
            <% } %>
            <!-- .cont-box -->
            <% if(data.isBenefit) { %>
            <hr class="cont-sp type1" aria-hidden="true" />
            <div class="cont-box nogaps">
                <ul class="btn-link-list line-type01">
                    <!-- btn-link-list 인경우 버튼 하나만 있는 경우 full 클래스명 추가 -->
                    <!--<li class="last-line full" data-id="pester"><button>데이터 조르기</button></li>-->
                    <!--TODO: GrandOpen 때 enable 처리 -->
                    <% if (data.isPrepayment) { %>
                    <li class="last-line" data-id="pester"><button>데이터 조르기</button></li>
                    <li class="last-line" data-id="benefit"><button>데이터 혜택</button></li>
                    <% } else { %>
                    <li class="last-line full" data-id="pester"><button>데이터 조르기</button></li>
                    <% } %>
                </ul>
            </div>
            <% } %>

            <% if (data.svcInfo.svcAttrCd === 'M1') { %>
            <hr class="cont-sp type1" aria-hidden="true" data-id="banners-empty" />
            <div class="cont-box nogaps noborder" data-id="banners">
                <div class="main-slide-banner slide-pagingtype pg-rtop">
                    <!-- .widget -->
                    <div class="widget">
                        <div class="widget-box">
                            <div class="slider-box">
                                <ul class="slider" data-id="banner-list" data-location="M"></ul>
                            </div>
                        </div>
                    </div>
                    <!--// .widget -->
                </div>
            </div>
            <!-- //.cont-box -->
            <% } %>

            <% if (data.otherLines.length > 0) { %>
            <% var length = (data.otherLines.length > 20 ? 20 : data.otherLines.length); %>
                <hr class="cont-sp type1" aria-hidden="true" data-id="empty-other-lines"/>
                <!-- .cont-box -->
                <div class="cont-box noborder nogaps-btm b-line1" data-id="other-lines">
                    <div class="ti-caption-type01 pb0">
                        <h2 class="tit">다른 회선의 실시간 잔여량
                        <button class="btn-tip" id="DC1_tip_02" page-id="DC1" title="다른 회선의 실시간 잔여량">
                            <i class="icon-badge-tip"><span class="blind">tip</span></i>
                        </button>
                        </h2>
                    </div>

                    <div class="my-line-info-wrap">
                        <ul class="my-line-info">
                        </ul>
                    </div>
                    <% if (length === 20) { %>
                    <!-- 다른 회선(자녀포함)이 총 20개 이상인 경우 -->
                    <div class="btn-more">
                        <button>더 보기</button>
                    </div>
                    <% } %>
                </div>
                <!-- .cont-box -->
            <% } %>
            <%
                const eid = data.xtEid;
                <!--무선인 경우-->
                if (data.isWireLess) {
            %>
            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">다른 페이지를 찾고 계신가요?</h3>
                <ul class="pg-link-list" data-id="other-pages">
                    <!--PPS 아닌경우-->
                    <% if (data.svcInfo.svcAttrCd !== 'M2') { %>
                    <li>
                        <button data-href="/myt-data/hotdata" data-xt_eid="<%=eid.hotdata%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-history-40"><span class="blind"></span></i>나의 데이터/통화 > 실시간 잔여량
                        </button>
                    </li>
                    <%}%>
                    <li>
                        <button data-href="/myt-fare/billguide/guide" data-xt_eid="<%=eid.guide%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-charge-40"><span class="blind"></span></i>나의 요금 &gt; 요금안내서
                        </button>
                    </li>
                    <!--PPS 인 경우-->
                    <% if (data.svcInfo.svcAttrCd === 'M2') { %>
                    <li>
                        <button data-href="/myt-join/myplan" data-xt_eid="<%=eid.myplan%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입정보 > 나의 요금제
                        </button>
                    </li>
                    <!--PPS 아닌경우-->
                    <%} if (data.svcInfo.svcAttrCd !== 'M2') { %>
                    <li>
                        <button data-href="/myt-fare/bill/hotbill" data-xt_eid="<%=eid.hotbill%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-charge-40"><span class="blind"></span></i>나의 요금 &gt; 실시간 이용요금
                        </button>
                    </li>
                    <% } %>
                    <li>
                        <button data-href="/myt-join/additions" data-xt_eid="<%=eid.additions%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입 정보 &gt; 나의 부가서비스
                        </button>
                    </li>
                    <li>
                        <button data-href="/product/roaming/my-use" data-xt_eid="<%=eid.roaming%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-roaming-40"><span class="blind"></span></i>T로밍 &gt; 나의 T로밍 이용현황
                        </button>
                    </li>
                </ul>
                <!--PPS(선불폰) 이 아닌경우만 노출-->
                <% if (data.svcInfo.svcAttrCd !== 'M2') { %>
                <ul class="pg-link-list" data-id="other-pages">
                    <li class="tod-linktype2">
                        <button data-href="/benefit/submain" data-xt_eid="<%=eid.benefit%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-discount-40"></i>혜택/할인 <span class="stxt">고객님을 위한 다양한 혜택을 확인하세요</span>
                        </button>
                    </li>
                    <li class="tod-linktype2">
                        <button data-href="/product/mobileplan" data-xt_eid="<%=eid.mobileplan%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-price-plan-40"></i>요금제 <span class="stxt">내게 맞는 요금제로 변경하세요</span>
                        </button>
                    </li>
                </ul>
                <%}%>
            </div>
            <!--유선인 경우-->
            <% } else { %>
            <div class="cont-box noborder bgnone">
                <h3 class="pg-chk-tit">다른 페이지를 찾고 계신가요?</h3>
                <ul class="pg-link-list" data-id="other-pages">
                    <li>
                        <button data-href="/myt-fare/billguide/guide" data-xt_eid="<%=eid.guide%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-charge-40"><span class="blind"></span></i>나의 요금 &gt; 요금안내서
                        </button>
                    </li>
                    <li>
                        <button data-href="/myt-join/myplan" data-xt_eid="<%=eid.myplan%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입 정보 &gt; 나의 요금제
                        </button>
                    </li>
                    <li>
                        <button data-href="/myt-join/combinations" data-xt_eid="<%=eid.combinations%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-my-40"><span class="blind"></span></i>나의 가입정보 > 결합상품
                        </button>
                    </li>
                    <li>
                        <button data-href="/benefit/submain/combinations" data-xt_eid="<%=eid.combiDiscount%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-charge-40"><span class="blind"></span></i>혜택/할인 > 결합할인
                        </button>
                    </li>
                </ul>
                <ul class="pg-link-list" data-id="other-pages">
                    <li class="tod-linktype2">
                        <button data-href="/product/wireplan" data-xt_eid="<%=eid.wireplan%>" data-xt_csid="NO" data-xt_action="BC">
                            <i class="icon-internet-40"></i>인터넷/전화/IPTV <span class="stxt">내게 맞는 결합상품을 확인하세요</span>
                        </button>
                    </li>
                </ul>
            </div>
            <% } %>

            <!-- //.cont-box -->
        </div>
    </div>
    <!--// #contents -->
    <%- include('../../../common/views/components/footer.component.html', { svcInfo: data.svcInfo, pageInfo: data.pageInfo }); %>
</div>
<% include ../components/javascript.component.html %>
</body>
<script>
    var data = '<%- JSON.stringify(data) %>';
    $(document).ready(function () {
      new Tw.MyTDataSubMain({
        $element: $('[data-id=submain-container]'),
        data: JSON.parse(data)
      });
    });
</script>
<% include ../components/end.component.html %>
