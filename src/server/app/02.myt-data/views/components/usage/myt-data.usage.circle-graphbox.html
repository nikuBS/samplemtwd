<%#
* @file myt-data.usage.circle-graphbox.html
* @author 이정민 (skt.p130713@partner.sk.com)
* @since 2018.11.28
_%>

<hr class="cont-sp type1" aria-hidden="true" />

<!-- .cont-box -->
<div class="cont-box pb0">
    <div class="ti-caption-type01 pb20">
        <h2 class="tit"><%= typeStr %></h2>
        <% if (type === 'data' && usageData) { %>
        <p class="num">총 데이터 잔여량
            <em>
            <% if(usageData.totalRemainUnLimited) { %>
                <%= usageData.totalRemained %>
            <% } else { %>
                <%- usageData.totalRemained.data + usageData.totalRemained.unit %>
            <% } %>
            </em>
        </p>
        <% } %>
    </div>
    <ul class="date-graph-list">
        <%_ for (var i = 0, length = items.length; i < length; i += 1) { _%>
        <li style="display: block;height: auto;">
            <div style="display: table;height: 5.75rem;position: relative;">
                <div class="left">
                    <div class="donut-chart small">
                        <div class="donut-chart-area">
                            <!-- loop -->
                            <div class="c100 p<%= (items[i].isRunout) ? '0' : (items[i].isRemainUnlimited) ? '100' : items[i].remainedRatio %>"><!-- .p+(0~100) // -->
                                <div class="<%= items[i].isTFamilyData ? 'blue' : color %>"><!-- red, yellow, green, blue // -->
                                    <div class="slice">
                                        <div class="bar"></div>
                                        <div class="fill"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- // loop -->
                        </div>
                    </div>
                </div>
                <div class="cont">
                    <span class="txt1"><%= items[i].skipNm %></span>
                    <div class="date">
                        <span class="remain">
                            <%_ if (items[i].isRemainUnlimited) { _%>
                            <strong><%- items[i].remained %></strong>
                            <% } else {
                                for (var j = 0; j < items[i].showRemaineds.length; j++) { %>
                                <strong>
                                    <em><%- items[i].showRemaineds[j].data %></em>
                                    <em><%- items[i].showRemaineds[j].unit %></em>
                                </strong>
                                <% } %> 남음
                            <% } %>
                        </span>
                        <% if (items[i].isVisibleDayBtn) { %>
                        <span class="use fe-use" style="display: none;">
                            <strong></strong>
                            오늘사용
                        </span>
                        <button class="bt-link-tx underline ml6 fe-btn-daily-used" data-prodid="<%= items[i].prodId %>">당일 사용량 조회</button>
                        <% } else {
                            if (!items[i].isUsedUnlimited) { %>
                            <span class="use">
                                <%_ for (var j = 0; j < items[i].showUseds.length; j++) { _%>
                                <strong>
                                    <em><%- items[i].showUseds[j].data %></em>
                                    <em><%- items[i].showUseds[j].unit %></em>
                                </strong>
                                <%_
                                }
                                if (items[i].isDailyUsed) {
                                _%>
                                    오늘
                                <% } %>
                                사용
                            </span>
                            <%_ }
                        } _%>
                    </div>
                    <% if (items[i].rgstDtm !== '') { %>
                    <%# TODO: [OP002-3871] 5GX 시간권인 경우, 만료일시를 출력해야 한다. %>
                    <span class="txt2">쿠폰 등록일: <%= items[i].rgstDtm  %></span>
                    <% } %>
                </div>
            </div>

            <% if (!usageData.childSvcNum) { %>
                <% if (items[i].tOPlanSharedData) { %>
                <div class="calling-plan type01">
                    <button class="wrap-link fs-type01 fe-btn-share">
                        <% if (items[i].tOPlanSharedData.showRemained) { %>
                        <span class="left" style="width: auto;"><strong class="ff-tb"><%= items[i].tOPlanSharedData.showRemained.data %><%= items[i].tOPlanSharedData.showRemained.unit %></strong> 공유 가능</span>
                        <% } %>
                        <% if (items[i].tOPlanSharedData.showUsed) { %>
                        <span class="right fc-type01"><strong class="ff-tb fs-type02"><%= items[i].tOPlanSharedData.showUsed.data %><%= items[i].tOPlanSharedData.showUsed.unit %></strong> 공유</span>
                        <% } %>
                    </button>
                </div>
                <hr class="cont-sp type1" aria-hidden="true" style="margin: 0 -1rem -1px;">
                <% } else if (items[i].sharedData) { %>
                <div class="calling-plan type01">
                    <button class="wrap-link fs-type01 fe-btn-share">
                        <span class="left" style="width: auto;">
                            <strong class="ff-tb fe-remained fe-coach-share-target">
                                <% if(items[i].isRemainUnlimited) { %>
                                    <%= items[i].remained %>
                                <% } else { %>
                                    <% for (var j = 0; j < items[i].showRemaineds.length; j++) { %>
                                    <%= items[i].showRemaineds[j].data %><%= items[i].showRemaineds[j].unit %>
                                    <% } %>
                                <% } %>
                            </strong> 공유 가능
                        </span>
                        <span class="right fc-type01">
                            <strong id="sharedDataUsed" class="ff-tb fs-type02 fe-used"></strong> 공유
                        </span>
                    </button>
                    <span class="tod-coach-mark fe-coach-share none">
                        <strong class="point">데이터를 공유</strong>할 수 있어요
                        <button class="close"><span class="blind">닫기</span></button>
                    </span>
                </div>
                <% } %>
            <% } %>
        </li>
        <% } %>
    </ul>
</div>
<!--// .cont-box -->
