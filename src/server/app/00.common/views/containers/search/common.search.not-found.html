<%#
* @file common.search.not-found.html
* @author Hyunkuk Lee (max5500@pineone.com)
* @since 2018.12.31
%>

<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>
<%
function recognizeLastChar(keyword){
    if(!keyword||keyword.length<=0){
      return '';
    }
    var endCharIdx = (keyword.charCodeAt(keyword.length-1) - parseInt('0xac00',16)) % 28;
    return endCharIdx>0 ? '으' : '';
}
    keyword = encodeURIComponent(keyword);
    inKeyword = encodeURIComponent(inKeyword);
%>
<!-- body -->
<!-- #skip_navigation 팝업페이지 바로가기 삭제 Grand open 접근성
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    // #skip_navigation -->
<div class="wrap">
<div class="searchbox-header fe-header-wrap fe-aria-hidden-el">
    <!-- 191001 [OP002-4009] 수정01 -->
    <div class="sch-form tod-sch-form">
        <div class="searchbox-close"><button class="close-area"><span class="tod-blind">취소</span></button></div>
        <span class="inputbox">
            <span class="input">
                <input type="search" class="fe-nofocus-move" id="search_keyword" name="keyword" placeholder="원하는 업무나 상품을 찾아보세요" title="검색어 입력" value="<%= decodeURIComponent(keyword===inKeyword?keyword:inKeyword.replace(keyword,'').trim()) %>">
                <button class="cancel" style="display: none;"><span class="blind">삭제</span></button>
            </span>
        </span>
        <button class="icon-gnb-search"><span class="blind">검색</span></button>
    </div>
    <!-- //191001 [OP002-4009] 수정01 -->
</div>

<div id="contents" class="search-content fe-aria-hidden-el fe-container-wrap container-wrap">
    <% if(suggestQuery.length>0){ %>
    <div class="cont-box noborder gaps-style03">
        <p class="re-searchword">
            혹시 이것을 찾으시나요?<a href="/common/search?keyword=<%= encodeURIComponent(suggestQuery) %>&step=<%= Number(step)+1%>" data-keyword="<%= suggestQuery %>" class="re-searchword-text search-element"><%= suggestQuery %><%= recognizeLastChar(suggestQuery) %>로 검색하기</a>
        </p>
    </div>
    <% } %>
    <% if(relatedKeyword.result&&relatedKeyword.result.Word&&relatedKeyword.result.Word.length>0){ %>
    <div class="connection-searchword">
        <dl class="searchword-list">
            <dt class="tit">연관</dt>
            <% for(var i=0;i<relatedKeyword.result.Word.length&&i<5;i++){ %>
            <dd>
                <a href="/common/search?step=<%= Number(step)+1 %>&keyword=<%= encodeURIComponent(relatedKeyword.result.Word[i]) %>" data-xt_csid="NO" data-xt_action="BC" data-xt_eid="CMMA_A11_B4-3<%= i+1 %>" data-keyword="<%= relatedKeyword.result.Word[i] %>" data-param="<%= relatedKeyword.result.Word[i] %>" class="link search-element xtractor">
                    <%= relatedKeyword.result.Word[i] %>
                </a>
            </dd>
            <% } %>
        </dl>
    </div>
    <% } %>
    <% if(suggestQuery.length>0||(relatedKeyword.result&&relatedKeyword.result.Word&&relatedKeyword.result.Word.length>0)){ %>
    <hr class="cont-sp type1" aria-hidden="true">
    <% } %>

    <div class="search-didnot-generatehits">
        <p class="title">‘<%= decodeURIComponent(keyword===inKeyword?keyword:inKeyword.replace(keyword,'').trim()) %>’에 대한<br>검색 결과가 없습니다.</p>
        <p class="text">검색어의 맞춤법이 정확한지 확인해 주세요.<br>검색어의 길이를 줄이거나 비슷한 다른<br>검색어를 입력해 보세요.</p>
    </div>

    <hr class="cont-sp type1" aria-hidden="true">
    <% if(surveyList.code==='00'){ %>
    <div class="cont-box nogaps-btm">
        <p class="opinion-text">찾는 답이 없다면 T world에 의견을 주세요.<br>고객님의 말씀을 귀담아 듣고 있습니다.</p>
        <ul class="searchapplication-list">
            <% for(var i=0;i<surveyList.result.invstQstnInqItm.length;i++){ %>
            <li class="opinion-selectbox" data-type="<%= surveyList.result.invstQstnInqItm[i].srchId %>">
                <p class="text"><%= surveyList.result.invstQstnInqItm[i].title %></p>
                <div class="btn">
                    <button type="button" class="btn-round3 btn-style3 request_keyword" data-type="<%= surveyList.result.invstQstnInqItm[i].srchId %>"><%= i==0? '입력하기' : '신청하기'%></button>
                </div>
            </li>
            <% } %>
        </ul>
    </div>

    <hr class="cont-sp type1" aria-hidden="true">
    <% } %>
    <!-- 191001 [OP002-4009] 수정02 -->
    <div class="cont-box nogaps-btm">
        <div class="rec-list">
            <p class="tod-search-tit">인기 검색어</p>
            <div class="tod-popularword-wrap">
                <ul class="popularsearchword-list linklist-type tod-popularsearchword-list">
                    <% for(var i=0;i<popularKeyword.Query.length;i++){ %>
                    <% if(i>4) break;%>
                    <li>
                        <a href="/common/search?keyword=<%= encodeURIComponent(popularKeyword.Query[i].content) %>&step=<%= Number(step)+1%>" data-keyword="<%= popularKeyword.Query[i].content %>" class="category-type search-element">
                            <strong class="number"><%= i+1 %></strong>
                            <span class="text"><%= popularKeyword.Query[i].content %></span>
                        </a>
                    </li>
                    <% } %>
                </ul>
            </div>
        </div>
    </div>
    <!-- //191001 [OP002-4009] 수정02 -->
</div>


</div>
<% include ../../components/javascript.component.html %>
<% include ../../components/search/search.keyword-list.component.html %>
<script>
    $(document).ready(function () {
        new Tw.CommonSearchNotFound($('.wrap'),<%- JSON.stringify(surveyList) %>,<%- step %>,'<%- from %>','<%- keyword %>');
    });
</script>
<% include ../../components/end.component.html %>
