<%#
* FileName: common.search.more.html
* Author: Hyunkuk Lee (max5500@pineone.com)
* Date: 2018.12.11
%>
<%
    keyword = encodeURIComponent(keyword);
    inKeyword = encodeURIComponent(inKeyword);
    var moreViewUrl = '/common/search/more?keyword='+keyword+'&category='+accessQuery.category;
    var inResultViewUrl = '/common/search/in-result?keyword='+keyword+'&category='+accessQuery.category;
    function recognizeLastChar(keyword){
        if(!keyword||keyword.length<=0){
            return '';
        }
        var endCharIdx = (keyword.charCodeAt(keyword.length-1) - parseInt('0xac00',16)) % 28;
        return endCharIdx>0 ? '으' : '';
    }
%>
<%- include('../../components/start.component.html', { pageInfo: locals.pageInfo }); %>

<!-- body -->
<!-- #skip_navigation 팝업페이지 바로가기 삭제 Grand open 접근성
    <div id="skipNav" class="skip_navi">
        <ul>
            <li><a href="#contents" class="fe-replace-history">본문 바로가기</a></li>
        </ul>
    </div>
    // #skip_navigation -->
<div class="wrap">
    <!-- #header -->
    <div id="header" class="header-wrap search-height fe-header-wrap"><!-- .header-wrap min-height:52px .rescan시 min-height:97px -->
        <div class="h-belt"><!-- border-bottom : 1px -->
            <div class="sch-form">
                    <span class="inputbox">
                        <span class="input">
                            <input id="keyword" class="fe-nofocus-move" type="text" value="<%= decodeURIComponent(keyword===inKeyword?keyword:inKeyword.replace(keyword,'').trim()) %>">
                            <button class="cancel" style="display: none;"><span class="blind">삭제</span></button>
                        </span>
                    </span>
                <button class="icon-gnb-search"><span class="blind">검색</span></button>
                <div class="searchbox-close"><button class="close-area">취소</button></div>
            </div>
            <div class="resultsearch-box">
                <span class="custom-form">
                    <% if(keyword===inKeyword){ %>
                        <input type="checkbox" id="resultsearch" name="resultsearch">
                    <% }else{ %>
                        <input type="checkbox" id="resultsearch" checked="checked" name="resultsearch">
                    <% } %>
                    <span class="c-type1"></span></span>
                <label for="resultsearch">결과 내 재검색</label>
                <!-- <label for="resultsearch" class="on">결과 내 재검색</label> -->
            </div>
        </div>
    </div>
    <!--// #header -->
    <!-- #contents -->
    <div id="contents" class="container-wrap none fe-container-wrap">
        <div class="container">

            <% if(searchInfo.suggestQuery.length>0){ %>
            <div class="cont-box noborder gaps-style03">
                <p class="re-searchword">
                    혹시 이것을 찾으시나요? <a href="/common/search?step=<%= Number(step)+1 %>&keyword=<%= encodeURIComponent(searchInfo.suggestQuery) %>" data-param="<%= searchInfo.suggestQuery %>"class="re-searchword-text search-element"><%= searchInfo.suggestQuery %><%= recognizeLastChar(searchInfo.suggestQuery) %>로 검색하기</a>
                </p>
            </div>
            <% } %>

            <!-- .cont-box -->
            <% if(relatedKeyword.result&&relatedKeyword.result.Word&&relatedKeyword.result.Word.length>0){ %>
            <div class="connection-searchword">
                <dl class="searchword-list">
                    <dt class="tit">연관</dt>
                    <% for(var i=0;i<relatedKeyword.result.Word.length&&i<=4;i++){ %>
                    <dd>
                        <a href="/common/search?step=<%= Number(step)+1 %>&keyword=<%= encodeURIComponent(relatedKeyword.result.Word[i]) %>" data-xt_csid="NO" data-xt_action="BC" data-xt_eid="CMMA_A11_B4-3<%= i+1 %>" data-param="<%= relatedKeyword.result.Word[i] %>" class="link search-element xtractor">
                            <%= relatedKeyword.result.Word[i] %>
                        </a>
                    </dd>
                    <% } %>
                </dl>
            </div>
            <% } %>
            <% if(searchInfo.suggestQuery.length>0||(relatedKeyword.result&&relatedKeyword.result.Word&&relatedKeyword.result.Word.length>0)){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>

            <% if(accessQuery.category=='shortcut'&&searchInfo.search[0]&&searchInfo.search[0].shortcut){ %>
            <div class="cont-box nogaps-btm">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">바로가기</h2>
                    <div class="numberbox"><span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <div class="keyword-search-list">
                    <ul id="shortcut_list">

                    </ul>
                </div>
            </div>
            <% } %>
            <!--// .cont-box -->
            <% if(accessQuery.category=='rate'&&searchInfo.search[0]&&searchInfo.search[0].rate){ %>
            <div class="cont-box bgnone noborder nogaps-btm rate">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">요금제</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
            </div>

            <div class="cont-box bgnone noborder gaps-style05 rate">
                <ul class="extraservice-list" id="rate_list">

                </ul>
            </div>

            <% } %>

            <% if(accessQuery.category=='troaming'&&searchInfo.search[0]&&searchInfo.search[0].troaming){ %>
            <!--<hr class="cont-sp type1" aria-hidden="true">-->
            <div class="cont-box bgnone noborder nogaps-btm troaming">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">T로밍</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
            </div>

            <div class="cont-box bgnone noborder gaps-style07 troaming">
                <ul class="extraservice-list" id="troaming_list">

                </ul>
            </div>
            <% } %>

            <% if(accessQuery.category=='service'&&searchInfo.search[0]&&searchInfo.search[0].service){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box bgnone noborder nogaps-btm service">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">부가서비스</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
            </div>

            <div class="cont-box bgnone noborder gaps-style06 service">
                <ul class="extraservice-list" id="service_list">

                </ul>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>

            <% if(accessQuery.category=='tv_internet'&&searchInfo.search[0]&&searchInfo.search[0].tv_internet){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box bgnone noborder nogaps-btm tv_internet">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">인터넷 · 집전화 · IPTV</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
            </div>

            <div class="cont-box bgnone noborder gaps-style06 tv_internet">
                <ul class="extraservice-list" id="tv_internet_list">

                </ul>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>

            <% if(accessQuery.category=='direct'&&searchInfo.search[0]&&searchInfo.search[0].direct){ %>

            <div class="cont-box bgnone noborder gaps-style03">
                <div class="contheader-box">
                    <div class="totalfilter-wrap"></div>
                    <div class="filter-select">
                        <button type="button" class="filterselect-btn" aria-haspopup="true" data-type="<%= searchInfo.search[0].direct.sort %>">
                            <%=
                                searchInfo.search[0].direct.sort==='R'?'정확도순':
                                searchInfo.search[0].direct.sort==='D'?'최신순':
                                searchInfo.search[0].direct.sort==='L'?'낮은가격순':'높은가격순'
                            %>
                        </button>
                    </div>
                </div>
            </div>

            <div class="cont-box pb0 direct">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">T world 다이렉트</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <div class="direct-shop-wrap">
                    <ul id="direct_list">
                        <!--<li>
                            <a href="" class="link">
                                <div class="img"><img src="/img/etc/img-phone03.png" alt="샤오미 포코폰"></div>
                                <div class="cont">
                                    <div class="tit">[타거스]<span class="highlight-text">링버클</span> 충전/싱크 라이트닝 USB 8핀 케이블 9cm</div>
                                    <div class="price">17,900원~/월<span class="price2">18,900원</span></div>
                                </div>
                            </a>
                        </li> -->
                    </ul>

                </div>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>
            <!--// .cont-box -->

            <% if(accessQuery.category=='tmembership'&&searchInfo.search[0]&&searchInfo.search[0].tmembership){ %>
            <hr class="cont-sp type1" aria-hidden="true">

            <!-- .cont-box -->
            <div class="cont-box pb0 tmembership">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">T멤버십</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <div class="t-membership-wrap">
                    <ul id="tmembership_list">

                    </ul>
                </div>
            </div>
            <!--// .cont-box -->
            <% } %>

            <% if(accessQuery.category=='event'&&searchInfo.search[0]&&searchInfo.search[0].event){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm bgnone noborder event">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">진행 중인 이벤트</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <div class="event-list">
                    <ul id="event_list">

                    </ul>
                </div>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>

            <% if(accessQuery.category=='sale'&&searchInfo.search[0]&&searchInfo.search[0].sale){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box bgnone noborder gaps-style09 list sale">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">혜택/할인</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="discountbenefit-list" id="sale_list">

                </ul>
            </div>
            <% } %>

            <% if(accessQuery.category=='as_outlet'&&searchInfo.search[0]&&searchInfo.search[0].as_outlet){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <!-- 지점 · 대리점, A/S센터 -->
            <div class="cont-box nogaps-btm as_outlet">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">지점/대리점, A/S센터</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="as_outlet_list">

                </ul>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <!-- //지점 · 대리점, A/S센터 -->
            <% } %>
            <% if(accessQuery.category=='question'&&searchInfo.search[0]&&searchInfo.search[0].question){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm question">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">자주 하는 질문</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="question_list">

                </ul>
            </div>
            <hr class="cont-sp type1" aria-hidden="true">
            <% } %>
            <% if(accessQuery.category=='notice'&&searchInfo.search[0]&&searchInfo.search[0].notice){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm notice">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">공지사항</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="notice_list">

                </ul>
            </div>
            <% } %>
            <% if(accessQuery.category=='prevent'&&searchInfo.search[0]&&searchInfo.search[0].prevent){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm prevent">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">이용자 피해예방 주의보</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="prevent_list">

                </ul>
            </div>
            <% } %>
            <% if(accessQuery.category=='manner'&&searchInfo.search[0]&&searchInfo.search[0].manner){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm manner">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">이럴 땐 이렇게 하세요</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="manner_list">

                </ul>
            </div>
            <% } %>
            <% if(accessQuery.category=='serviceInfo'&&searchInfo.search[0]&&searchInfo.search[0].serviceInfo){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm serviceInfo">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">서비스 이용안내</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="service-guide-s" id="serviceInfo_list">

                </ul>
            </div>
            <% } %>
            <% if(accessQuery.category=='siteInfo'&&searchInfo.search[0]&&searchInfo.search[0].siteInfo){ %>
            <hr class="cont-sp type1" aria-hidden="true">
            <div class="cont-box nogaps-btm siteInfo">
                <div class="searchnumbox-wrap">
                    <h2 class="tit">사이트 이용방법</h2>
                    <div class="numberbox">
                        <span class="num"><%= searchInfo.totalcount %></span>건
                    </div>
                </div>
                <ul class="site-guide-s" id="siteInfo_list">

                </ul>
            </div>
            <% } %>
            <% if(searchInfo.totalcount>20){ %>
            <div class="newpaging-wrap">
                <div class="prev">
                    <% if(pageNum==1){ %>
                        <button type="button" disabled class="prev-btn" >이전</button>
                    <% }else{ %>
                        <button type="button" class="prev-btn page-change"
                        value="<%= accessQuery.in_keyword?inResultViewUrl+'&in_keyword='+accessQuery.in_keyword:moreViewUrl%>&page=<%= Number(pageNum)-1 %><%= accessQuery.arrange?'&arrange='+accessQuery.arrange:''%>&step=<%= Number(step)+1 %>">
                            이전
                        </button>
                    <!-- category=direct&keyword=갤럭시&arrange=P&pageNum-->
                    <% } %>
                </div>
                <div  class="numberbox">
                    <div class="number" id="page_selector">
                        <% var totalPageNum = parseInt(searchInfo.totalcount/20)+(searchInfo.totalcount%20>0?1:0) %>
                        <strong class="str"><%= pageNum %></strong> / <%= totalPageNum %>
                    </div>
                </div>
                <div class="next">
                    <% if(pageNum==totalPageNum){ %>
                        <button type="button" disabled class="next-btn">다음</button>
                    <% }else{ %>
                        <button type="button" class="next-btn page-change"
                                value="<%= accessQuery.in_keyword?inResultViewUrl+'&in_keyword='+accessQuery.in_keyword:moreViewUrl%>&page=<%= Number(pageNum)+1 %><%= accessQuery.arrange?'&arrange='+accessQuery.arrange:''%>&step=<%= Number(step)+1 %>">>
                            다음
                        </button>
                    <% } %>
                </div>
            </div>
            <% } %>


        </div>
    </div>
    <!--// #contents -->
</div>


<div></div>
<% include ../../components/javascript.component.html %>
<% include ../../components/search/search.template.component.html %>
<% include ../../components/search/search.keyword-list.component.html %>
<script>
    $(document).ready(function () {
        new Tw.CommonSearchMore($('.wrap'),<%- JSON.stringify(searchInfo).replace(/\\"/g,"&quot;").replace(/\\/gi,'/').replace(/\n/g,'') %>
            ,<%- JSON.stringify(svcInfo) %>,'<%- CDN %>',<%- JSON.stringify(accessQuery)%>,'<%- step %>',<%- JSON.stringify(paramObj) %>,'<%- pageNum %>','<%- nowUrl %>');
    });
</script>
<% include ../../components/end.component.html %>
